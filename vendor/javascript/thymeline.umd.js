(function(tt,f){typeof exports=="object"&&typeof module<"u"?f(exports):typeof define=="function"&&define.amd?define(["exports"],f):(tt=typeof globalThis<"u"?globalThis:tt||self,f(tt.Thymeline={}))})(this,(function(tt){"use strict";class f extends Array{constructor(t,n){if(super(t),this.sign=n,Object.setPrototypeOf(this,f.prototype),t>f.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded")}static BigInt(t){var n=Math.floor,r=Number.isFinite;if(typeof t=="number"){if(t===0)return f.__zero();if(f.__isOneDigitInt(t))return 0>t?f.__oneDigit(-t,!0):f.__oneDigit(t,!1);if(!r(t)||n(t)!==t)throw new RangeError("The number "+t+" cannot be converted to BigInt because it is not an integer");return f.__fromDouble(t)}if(typeof t=="string"){const i=f.__fromString(t);if(i===null)throw new SyntaxError("Cannot convert "+t+" to a BigInt");return i}if(typeof t=="boolean")return t===!0?f.__oneDigit(1,!1):f.__zero();if(typeof t=="object"){if(t.constructor===f)return t;const i=f.__toPrimitive(t);return f.BigInt(i)}throw new TypeError("Cannot convert "+t+" to a BigInt")}toDebugString(){const t=["BigInt["];for(const n of this)t.push((n&&(n>>>0).toString(16))+", ");return t.push("]"),t.join("")}toString(t=10){if(2>t||36<t)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":(t&t-1)==0?f.__toStringBasePowerOfTwo(this,t):f.__toStringGeneric(this,t,!1)}valueOf(){throw new Error("Convert JSBI instances to native numbers using `toNumber`.")}static toNumber(t){const n=t.length;if(n===0)return 0;if(n===1){const y=t.__unsignedDigit(0);return t.sign?-y:y}const r=t.__digit(n-1),i=f.__clz30(r),o=30*n-i;if(1024<o)return t.sign?-1/0:1/0;let s=o-1,a=r,c=n-1;const u=i+3;let l=u===32?0:a<<u;l>>>=12;const h=u-12;let d=12<=u?0:a<<20+u,g=20+u;for(0<h&&0<c&&(c--,a=t.__digit(c),l|=a>>>30-h,d=a<<h+2,g=h+2);0<g&&0<c;)c--,a=t.__digit(c),d|=30<=g?a<<g-30:a>>>30-g,g-=30;const p=f.__decideRounding(t,g,c,a);if((p===1||p===0&&(1&d)==1)&&(d=d+1>>>0,d===0&&(l++,l>>>20!=0&&(l=0,s++,1023<s))))return t.sign?-1/0:1/0;const w=t.sign?-2147483648:0;return s=s+1023<<20,f.__kBitConversionInts[f.__kBitConversionIntHigh]=w|s|l,f.__kBitConversionInts[f.__kBitConversionIntLow]=d,f.__kBitConversionDouble[0]}static unaryMinus(t){if(t.length===0)return t;const n=t.__copy();return n.sign=!t.sign,n}static bitwiseNot(t){return t.sign?f.__absoluteSubOne(t).__trim():f.__absoluteAddOne(t,!0)}static exponentiate(t,n){if(n.sign)throw new RangeError("Exponent must be positive");if(n.length===0)return f.__oneDigit(1,!1);if(t.length===0)return t;if(t.length===1&&t.__digit(0)===1)return t.sign&&(1&n.__digit(0))==0?f.unaryMinus(t):t;if(1<n.length)throw new RangeError("BigInt too big");let r=n.__unsignedDigit(0);if(r===1)return t;if(r>=f.__kMaxLengthBits)throw new RangeError("BigInt too big");if(t.length===1&&t.__digit(0)===2){const s=1+(0|r/30),a=t.sign&&(1&r)!=0,c=new f(s,a);c.__initializeDigits();const u=1<<r%30;return c.__setDigit(s-1,u),c}let i=null,o=t;for((1&r)!=0&&(i=t),r>>=1;r!==0;r>>=1)o=f.multiply(o,o),(1&r)!=0&&(i===null?i=o:i=f.multiply(i,o));return i}static multiply(t,n){if(t.length===0)return t;if(n.length===0)return n;let r=t.length+n.length;30<=t.__clzmsd()+n.__clzmsd()&&r--;const i=new f(r,t.sign!==n.sign);i.__initializeDigits();for(let o=0;o<t.length;o++)f.__multiplyAccumulate(n,t.__digit(o),i,o);return i.__trim()}static divide(t,n){if(n.length===0)throw new RangeError("Division by zero");if(0>f.__absoluteCompare(t,n))return f.__zero();const r=t.sign!==n.sign,i=n.__unsignedDigit(0);let o;if(n.length===1&&32767>=i){if(i===1)return r===t.sign?t:f.unaryMinus(t);o=f.__absoluteDivSmall(t,i,null)}else o=f.__absoluteDivLarge(t,n,!0,!1);return o.sign=r,o.__trim()}static remainder(t,n){if(n.length===0)throw new RangeError("Division by zero");if(0>f.__absoluteCompare(t,n))return t;const r=n.__unsignedDigit(0);if(n.length===1&&32767>=r){if(r===1)return f.__zero();const o=f.__absoluteModSmall(t,r);return o===0?f.__zero():f.__oneDigit(o,t.sign)}const i=f.__absoluteDivLarge(t,n,!1,!0);return i.sign=t.sign,i.__trim()}static add(t,n){const r=t.sign;return r===n.sign?f.__absoluteAdd(t,n,r):0<=f.__absoluteCompare(t,n)?f.__absoluteSub(t,n,r):f.__absoluteSub(n,t,!r)}static subtract(t,n){const r=t.sign;return r===n.sign?0<=f.__absoluteCompare(t,n)?f.__absoluteSub(t,n,r):f.__absoluteSub(n,t,!r):f.__absoluteAdd(t,n,r)}static leftShift(t,n){return n.length===0||t.length===0?t:n.sign?f.__rightShiftByAbsolute(t,n):f.__leftShiftByAbsolute(t,n)}static signedRightShift(t,n){return n.length===0||t.length===0?t:n.sign?f.__leftShiftByAbsolute(t,n):f.__rightShiftByAbsolute(t,n)}static unsignedRightShift(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}static lessThan(t,n){return 0>f.__compareToBigInt(t,n)}static lessThanOrEqual(t,n){return 0>=f.__compareToBigInt(t,n)}static greaterThan(t,n){return 0<f.__compareToBigInt(t,n)}static greaterThanOrEqual(t,n){return 0<=f.__compareToBigInt(t,n)}static equal(t,n){if(t.sign!==n.sign||t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t.__digit(r)!==n.__digit(r))return!1;return!0}static notEqual(t,n){return!f.equal(t,n)}static bitwiseAnd(t,n){var r=Math.max;if(!t.sign&&!n.sign)return f.__absoluteAnd(t,n).__trim();if(t.sign&&n.sign){const i=r(t.length,n.length)+1;let o=f.__absoluteSubOne(t,i);const s=f.__absoluteSubOne(n);return o=f.__absoluteOr(o,s,o),f.__absoluteAddOne(o,!0,o).__trim()}return t.sign&&([t,n]=[n,t]),f.__absoluteAndNot(t,f.__absoluteSubOne(n)).__trim()}static bitwiseXor(t,n){var r=Math.max;if(!t.sign&&!n.sign)return f.__absoluteXor(t,n).__trim();if(t.sign&&n.sign){const s=r(t.length,n.length),a=f.__absoluteSubOne(t,s),c=f.__absoluteSubOne(n);return f.__absoluteXor(a,c,a).__trim()}const i=r(t.length,n.length)+1;t.sign&&([t,n]=[n,t]);let o=f.__absoluteSubOne(n,i);return o=f.__absoluteXor(o,t,o),f.__absoluteAddOne(o,!0,o).__trim()}static bitwiseOr(t,n){var r=Math.max;const i=r(t.length,n.length);if(!t.sign&&!n.sign)return f.__absoluteOr(t,n).__trim();if(t.sign&&n.sign){let s=f.__absoluteSubOne(t,i);const a=f.__absoluteSubOne(n);return s=f.__absoluteAnd(s,a,s),f.__absoluteAddOne(s,!0,s).__trim()}t.sign&&([t,n]=[n,t]);let o=f.__absoluteSubOne(n,i);return o=f.__absoluteAndNot(o,t,o),f.__absoluteAddOne(o,!0,o).__trim()}static asIntN(t,n){var r=Math.floor;if(n.length===0)return n;if(t=r(t),0>t)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(t===0)return f.__zero();if(t>=f.__kMaxLengthBits)return n;const i=0|(t+29)/30;if(n.length<i)return n;const o=n.__unsignedDigit(i-1),s=1<<(t-1)%30;if(n.length===i&&o<s)return n;if((o&s)!==s)return f.__truncateToNBits(t,n);if(!n.sign)return f.__truncateAndSubFromPowerOfTwo(t,n,!0);if((o&s-1)==0){for(let a=i-2;0<=a;a--)if(n.__digit(a)!==0)return f.__truncateAndSubFromPowerOfTwo(t,n,!1);return n.length===i&&o===s?n:f.__truncateToNBits(t,n)}return f.__truncateAndSubFromPowerOfTwo(t,n,!1)}static asUintN(t,n){var r=Math.floor;if(n.length===0)return n;if(t=r(t),0>t)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(t===0)return f.__zero();if(n.sign){if(t>f.__kMaxLengthBits)throw new RangeError("BigInt too big");return f.__truncateAndSubFromPowerOfTwo(t,n,!1)}if(t>=f.__kMaxLengthBits)return n;const i=0|(t+29)/30;if(n.length<i)return n;const o=t%30;return n.length==i&&(o===0||!(n.__digit(i-1)>>>o))?n:f.__truncateToNBits(t,n)}static ADD(t,n){if(t=f.__toPrimitive(t),n=f.__toPrimitive(n),typeof t=="string")return typeof n!="string"&&(n=n.toString()),t+n;if(typeof n=="string")return t.toString()+n;if(t=f.__toNumeric(t),n=f.__toNumeric(n),f.__isBigInt(t)&&f.__isBigInt(n))return f.add(t,n);if(typeof t=="number"&&typeof n=="number")return t+n;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}static LT(t,n){return f.__compare(t,n,0)}static LE(t,n){return f.__compare(t,n,1)}static GT(t,n){return f.__compare(t,n,2)}static GE(t,n){return f.__compare(t,n,3)}static EQ(t,n){for(;;){if(f.__isBigInt(t))return f.__isBigInt(n)?f.equal(t,n):f.EQ(n,t);if(typeof t=="number"){if(f.__isBigInt(n))return f.__equalToNumber(n,t);if(typeof n!="object")return t==n;n=f.__toPrimitive(n)}else if(typeof t=="string"){if(f.__isBigInt(n))return t=f.__fromString(t),t!==null&&f.equal(t,n);if(typeof n!="object")return t==n;n=f.__toPrimitive(n)}else if(typeof t=="boolean"){if(f.__isBigInt(n))return f.__equalToNumber(n,+t);if(typeof n!="object")return t==n;n=f.__toPrimitive(n)}else if(typeof t=="symbol"){if(f.__isBigInt(n))return!1;if(typeof n!="object")return t==n;n=f.__toPrimitive(n)}else if(typeof t=="object"){if(typeof n=="object"&&n.constructor!==f)return t==n;t=f.__toPrimitive(t)}else return t==n}}static NE(t,n){return!f.EQ(t,n)}static DataViewGetBigInt64(t,n,r=!1){return f.asIntN(64,f.DataViewGetBigUint64(t,n,r))}static DataViewGetBigUint64(t,n,r=!1){const[i,o]=r?[4,0]:[0,4],s=t.getUint32(n+i,r),a=t.getUint32(n+o,r),c=new f(3,!1);return c.__setDigit(0,1073741823&a),c.__setDigit(1,(268435455&s)<<2|a>>>30),c.__setDigit(2,s>>>28),c.__trim()}static DataViewSetBigInt64(t,n,r,i=!1){f.DataViewSetBigUint64(t,n,r,i)}static DataViewSetBigUint64(t,n,r,i=!1){r=f.asUintN(64,r);let o=0,s=0;if(0<r.length&&(s=r.__digit(0),1<r.length)){const u=r.__digit(1);s|=u<<30,o=u>>>2,2<r.length&&(o|=r.__digit(2)<<28)}const[a,c]=i?[4,0]:[0,4];t.setUint32(n+a,o,i),t.setUint32(n+c,s,i)}static __zero(){return new f(0,!1)}static __oneDigit(t,n){const r=new f(1,n);return r.__setDigit(0,t),r}__copy(){const t=new f(this.length,this.sign);for(let n=0;n<this.length;n++)t[n]=this[n];return t}__trim(){let t=this.length,n=this[t-1];for(;n===0;)t--,n=this[t-1],this.pop();return t===0&&(this.sign=!1),this}__initializeDigits(){for(let t=0;t<this.length;t++)this[t]=0}static __decideRounding(t,n,r,i){if(0<n)return-1;let o;if(0>n)o=-n-1;else{if(r===0)return-1;r--,i=t.__digit(r),o=29}let s=1<<o;if((i&s)==0)return-1;if(s-=1,(i&s)!=0)return 1;for(;0<r;)if(r--,t.__digit(r)!==0)return 1;return 0}static __fromDouble(t){f.__kBitConversionDouble[0]=t;const n=2047&f.__kBitConversionInts[f.__kBitConversionIntHigh]>>>20,r=n-1023,i=(0|r/30)+1,o=new f(i,0>t);let s=1048575&f.__kBitConversionInts[f.__kBitConversionIntHigh]|1048576,a=f.__kBitConversionInts[f.__kBitConversionIntLow];const c=20,u=r%30;let l,h=0;if(u<20){const d=c-u;h=d+32,l=s>>>d,s=s<<32-d|a>>>d,a<<=32-d}else if(u===20)h=32,l=s,s=a,a=0;else{const d=u-c;h=32-d,l=s<<d|a>>>32-d,s=a<<d,a=0}o.__setDigit(i-1,l);for(let d=i-2;0<=d;d--)0<h?(h-=30,l=s>>>2,s=s<<30|a>>>2,a<<=30):l=0,o.__setDigit(d,l);return o.__trim()}static __isWhitespace(t){return 13>=t&&9<=t||(159>=t?t==32:131071>=t?t==160||t==5760:196607>=t?(t&=131071,10>=t||t==40||t==41||t==47||t==95||t==4096):t==65279)}static __fromString(t,n=0){let r=0;const i=t.length;let o=0;if(o===i)return f.__zero();let s=t.charCodeAt(o);for(;f.__isWhitespace(s);){if(++o===i)return f.__zero();s=t.charCodeAt(o)}if(s===43){if(++o===i)return null;s=t.charCodeAt(o),r=1}else if(s===45){if(++o===i)return null;s=t.charCodeAt(o),r=-1}if(n===0){if(n=10,s===48){if(++o===i)return f.__zero();if(s=t.charCodeAt(o),s===88||s===120){if(n=16,++o===i)return null;s=t.charCodeAt(o)}else if(s===79||s===111){if(n=8,++o===i)return null;s=t.charCodeAt(o)}else if(s===66||s===98){if(n=2,++o===i)return null;s=t.charCodeAt(o)}}}else if(n===16&&s===48){if(++o===i)return f.__zero();if(s=t.charCodeAt(o),s===88||s===120){if(++o===i)return null;s=t.charCodeAt(o)}}if(r!=0&&n!==10)return null;for(;s===48;){if(++o===i)return f.__zero();s=t.charCodeAt(o)}const a=i-o;let c=f.__kMaxBitsPerChar[n],u=f.__kBitsPerCharTableMultiplier-1;if(a>1073741824/c)return null;const l=c*a+u>>>f.__kBitsPerCharTableShift,h=new f(0|(l+29)/30,!1),d=10>n?n:10,g=10<n?n-10:0;if((n&n-1)==0){c>>=f.__kBitsPerCharTableShift;const p=[],w=[];let y=!1;do{let v=0,_=0;for(;;){let T;if(s-48>>>0<d)T=s-48;else if((32|s)-97>>>0<g)T=(32|s)-87;else{y=!0;break}if(_+=c,v=v<<c|T,++o===i){y=!0;break}if(s=t.charCodeAt(o),30<_+c)break}p.push(v),w.push(_)}while(!y);f.__fillFromParts(h,p,w)}else{h.__initializeDigits();let p=!1,w=0;do{let y=0,v=1;for(;;){let T;if(s-48>>>0<d)T=s-48;else if((32|s)-97>>>0<g)T=(32|s)-87;else{p=!0;break}const D=v*n;if(1073741823<D)break;if(v=D,y=y*n+T,w++,++o===i){p=!0;break}s=t.charCodeAt(o)}u=30*f.__kBitsPerCharTableMultiplier-1;const _=0|(c*w+u>>>f.__kBitsPerCharTableShift)/30;h.__inplaceMultiplyAdd(v,y,_)}while(!p)}if(o!==i){if(!f.__isWhitespace(s))return null;for(o++;o<i;o++)if(s=t.charCodeAt(o),!f.__isWhitespace(s))return null}return h.sign=r==-1,h.__trim()}static __fillFromParts(t,n,r){let i=0,o=0,s=0;for(let a=n.length-1;0<=a;a--){const c=n[a],u=r[a];o|=c<<s,s+=u,s===30?(t.__setDigit(i++,o),s=0,o=0):30<s&&(t.__setDigit(i++,1073741823&o),s-=30,o=c>>>u-s)}if(o!==0){if(i>=t.length)throw new Error("implementation bug");t.__setDigit(i++,o)}for(;i<t.length;i++)t.__setDigit(i,0)}static __toStringBasePowerOfTwo(t,n){const r=t.length;let i=n-1;i=(85&i>>>1)+(85&i),i=(51&i>>>2)+(51&i),i=(15&i>>>4)+(15&i);const o=i,s=n-1,a=t.__digit(r-1),c=f.__clz30(a);let u=0|(30*r-c+o-1)/o;if(t.sign&&u++,268435456<u)throw new Error("string too long");const l=Array(u);let h=u-1,d=0,g=0;for(let w=0;w<r-1;w++){const y=t.__digit(w),v=(d|y<<g)&s;l[h--]=f.__kConversionChars[v];const _=o-g;for(d=y>>>_,g=30-_;g>=o;)l[h--]=f.__kConversionChars[d&s],d>>>=o,g-=o}const p=(d|a<<g)&s;for(l[h--]=f.__kConversionChars[p],d=a>>>o-g;d!==0;)l[h--]=f.__kConversionChars[d&s],d>>>=o;if(t.sign&&(l[h--]="-"),h!=-1)throw new Error("implementation bug");return l.join("")}static __toStringGeneric(t,n,r){const i=t.length;if(i===0)return"";if(i===1){let w=t.__unsignedDigit(0).toString(n);return r===!1&&t.sign&&(w="-"+w),w}const o=30*i-f.__clz30(t.__digit(i-1)),s=f.__kMaxBitsPerChar[n],a=s-1;let c=o*f.__kBitsPerCharTableMultiplier;c+=a-1,c=0|c/a;const u=c+1>>1,l=f.exponentiate(f.__oneDigit(n,!1),f.__oneDigit(u,!1));let h,d;const g=l.__unsignedDigit(0);if(l.length===1&&32767>=g){h=new f(t.length,!1),h.__initializeDigits();let w=0;for(let y=2*t.length-1;0<=y;y--){const v=w<<15|t.__halfDigit(y);h.__setHalfDigit(y,0|v/g),w=0|v%g}d=w.toString(n)}else{const w=f.__absoluteDivLarge(t,l,!0,!0);h=w.quotient;const y=w.remainder.__trim();d=f.__toStringGeneric(y,n,!0)}h.__trim();let p=f.__toStringGeneric(h,n,!0);for(;d.length<u;)d="0"+d;return r===!1&&t.sign&&(p="-"+p),p+d}static __unequalSign(t){return t?-1:1}static __absoluteGreater(t){return t?-1:1}static __absoluteLess(t){return t?1:-1}static __compareToBigInt(t,n){const r=t.sign;if(r!==n.sign)return f.__unequalSign(r);const i=f.__absoluteCompare(t,n);return 0<i?f.__absoluteGreater(r):0>i?f.__absoluteLess(r):0}static __compareToNumber(t,n){if(f.__isOneDigitInt(n)){const r=t.sign,i=0>n;if(r!==i)return f.__unequalSign(r);if(t.length===0){if(i)throw new Error("implementation bug");return n===0?0:-1}if(1<t.length)return f.__absoluteGreater(r);const o=Math.abs(n),s=t.__unsignedDigit(0);return s>o?f.__absoluteGreater(r):s<o?f.__absoluteLess(r):0}return f.__compareToDouble(t,n)}static __compareToDouble(t,n){if(n!==n)return n;if(n===1/0)return-1;if(n===-1/0)return 1;const r=t.sign;if(r!==0>n)return f.__unequalSign(r);if(n===0)throw new Error("implementation bug: should be handled elsewhere");if(t.length===0)return-1;f.__kBitConversionDouble[0]=n;const i=2047&f.__kBitConversionInts[f.__kBitConversionIntHigh]>>>20;if(i==2047)throw new Error("implementation bug: handled elsewhere");const o=i-1023;if(0>o)return f.__absoluteGreater(r);const s=t.length;let a=t.__digit(s-1);const c=f.__clz30(a),u=30*s-c,l=o+1;if(u<l)return f.__absoluteLess(r);if(u>l)return f.__absoluteGreater(r);let h=1048576|1048575&f.__kBitConversionInts[f.__kBitConversionIntHigh],d=f.__kBitConversionInts[f.__kBitConversionIntLow];const g=20,p=29-c;if(p!==(0|(u-1)%30))throw new Error("implementation bug");let w,y=0;if(20>p){const v=g-p;y=v+32,w=h>>>v,h=h<<32-v|d>>>v,d<<=32-v}else if(p===20)y=32,w=h,h=d,d=0;else{const v=p-g;y=32-v,w=h<<v|d>>>32-v,h=d<<v,d=0}if(a>>>=0,w>>>=0,a>w)return f.__absoluteGreater(r);if(a<w)return f.__absoluteLess(r);for(let v=s-2;0<=v;v--){0<y?(y-=30,w=h>>>2,h=h<<30|d>>>2,d<<=30):w=0;const _=t.__unsignedDigit(v);if(_>w)return f.__absoluteGreater(r);if(_<w)return f.__absoluteLess(r)}if(h!==0||d!==0){if(y===0)throw new Error("implementation bug");return f.__absoluteLess(r)}return 0}static __equalToNumber(t,n){var r=Math.abs;return f.__isOneDigitInt(n)?n===0?t.length===0:t.length===1&&t.sign===0>n&&t.__unsignedDigit(0)===r(n):f.__compareToDouble(t,n)===0}static __comparisonResultToBool(t,n){return n===0?0>t:n===1?0>=t:n===2?0<t:n===3?0<=t:void 0}static __compare(t,n,r){if(t=f.__toPrimitive(t),n=f.__toPrimitive(n),typeof t=="string"&&typeof n=="string")switch(r){case 0:return t<n;case 1:return t<=n;case 2:return t>n;case 3:return t>=n}if(f.__isBigInt(t)&&typeof n=="string")return n=f.__fromString(n),n!==null&&f.__comparisonResultToBool(f.__compareToBigInt(t,n),r);if(typeof t=="string"&&f.__isBigInt(n))return t=f.__fromString(t),t!==null&&f.__comparisonResultToBool(f.__compareToBigInt(t,n),r);if(t=f.__toNumeric(t),n=f.__toNumeric(n),f.__isBigInt(t)){if(f.__isBigInt(n))return f.__comparisonResultToBool(f.__compareToBigInt(t,n),r);if(typeof n!="number")throw new Error("implementation bug");return f.__comparisonResultToBool(f.__compareToNumber(t,n),r)}if(typeof t!="number")throw new Error("implementation bug");if(f.__isBigInt(n))return f.__comparisonResultToBool(f.__compareToNumber(n,t),2^r);if(typeof n!="number")throw new Error("implementation bug");return r===0?t<n:r===1?t<=n:r===2?t>n:r===3?t>=n:void 0}__clzmsd(){return f.__clz30(this.__digit(this.length-1))}static __absoluteAdd(t,n,r){if(t.length<n.length)return f.__absoluteAdd(n,t,r);if(t.length===0)return t;if(n.length===0)return t.sign===r?t:f.unaryMinus(t);let i=t.length;(t.__clzmsd()===0||n.length===t.length&&n.__clzmsd()===0)&&i++;const o=new f(i,r);let s=0,a=0;for(;a<n.length;a++){const c=t.__digit(a)+n.__digit(a)+s;s=c>>>30,o.__setDigit(a,1073741823&c)}for(;a<t.length;a++){const c=t.__digit(a)+s;s=c>>>30,o.__setDigit(a,1073741823&c)}return a<o.length&&o.__setDigit(a,s),o.__trim()}static __absoluteSub(t,n,r){if(t.length===0)return t;if(n.length===0)return t.sign===r?t:f.unaryMinus(t);const i=new f(t.length,r);let o=0,s=0;for(;s<n.length;s++){const a=t.__digit(s)-n.__digit(s)-o;o=1&a>>>30,i.__setDigit(s,1073741823&a)}for(;s<t.length;s++){const a=t.__digit(s)-o;o=1&a>>>30,i.__setDigit(s,1073741823&a)}return i.__trim()}static __absoluteAddOne(t,n,r=null){const i=t.length;r===null?r=new f(i,n):r.sign=n;let o=1;for(let s=0;s<i;s++){const a=t.__digit(s)+o;o=a>>>30,r.__setDigit(s,1073741823&a)}return o!=0&&r.__setDigitGrow(i,1),r}static __absoluteSubOne(t,n){const r=t.length;n=n||r;const i=new f(n,!1);let o=1;for(let s=0;s<r;s++){const a=t.__digit(s)-o;o=1&a>>>30,i.__setDigit(s,1073741823&a)}if(o!=0)throw new Error("implementation bug");for(let s=r;s<n;s++)i.__setDigit(s,0);return i}static __absoluteAnd(t,n,r=null){let i=t.length,o=n.length,s=o;if(i<o){s=i;const u=t,l=i;t=n,i=o,n=u,o=l}let a=s;r===null?r=new f(a,!1):a=r.length;let c=0;for(;c<s;c++)r.__setDigit(c,t.__digit(c)&n.__digit(c));for(;c<a;c++)r.__setDigit(c,0);return r}static __absoluteAndNot(t,n,r=null){const i=t.length,o=n.length;let s=o;i<o&&(s=i);let a=i;r===null?r=new f(a,!1):a=r.length;let c=0;for(;c<s;c++)r.__setDigit(c,t.__digit(c)&~n.__digit(c));for(;c<i;c++)r.__setDigit(c,t.__digit(c));for(;c<a;c++)r.__setDigit(c,0);return r}static __absoluteOr(t,n,r=null){let i=t.length,o=n.length,s=o;if(i<o){s=i;const u=t,l=i;t=n,i=o,n=u,o=l}let a=i;r===null?r=new f(a,!1):a=r.length;let c=0;for(;c<s;c++)r.__setDigit(c,t.__digit(c)|n.__digit(c));for(;c<i;c++)r.__setDigit(c,t.__digit(c));for(;c<a;c++)r.__setDigit(c,0);return r}static __absoluteXor(t,n,r=null){let i=t.length,o=n.length,s=o;if(i<o){s=i;const u=t,l=i;t=n,i=o,n=u,o=l}let a=i;r===null?r=new f(a,!1):a=r.length;let c=0;for(;c<s;c++)r.__setDigit(c,t.__digit(c)^n.__digit(c));for(;c<i;c++)r.__setDigit(c,t.__digit(c));for(;c<a;c++)r.__setDigit(c,0);return r}static __absoluteCompare(t,n){const r=t.length-n.length;if(r!=0)return r;let i=t.length-1;for(;0<=i&&t.__digit(i)===n.__digit(i);)i--;return 0>i?0:t.__unsignedDigit(i)>n.__unsignedDigit(i)?1:-1}static __multiplyAccumulate(t,n,r,i){if(n===0)return;const o=32767&n,s=n>>>15;let a=0,c=0;for(let u,l=0;l<t.length;l++,i++){u=r.__digit(i);const h=t.__digit(l),d=32767&h,g=h>>>15,p=f.__imul(d,o),w=f.__imul(d,s),y=f.__imul(g,o),v=f.__imul(g,s);u+=c+p+a,a=u>>>30,u&=1073741823,u+=((32767&w)<<15)+((32767&y)<<15),a+=u>>>30,c=v+(w>>>15)+(y>>>15),r.__setDigit(i,1073741823&u)}for(;a!=0||c!==0;i++){let u=r.__digit(i);u+=a+c,c=0,a=u>>>30,r.__setDigit(i,1073741823&u)}}static __internalMultiplyAdd(t,n,r,i,o){let s=r,a=0;for(let c=0;c<i;c++){const u=t.__digit(c),l=f.__imul(32767&u,n),h=f.__imul(u>>>15,n),d=l+((32767&h)<<15)+a+s;s=d>>>30,a=h>>>15,o.__setDigit(c,1073741823&d)}if(o.length>i)for(o.__setDigit(i++,s+a);i<o.length;)o.__setDigit(i++,0);else if(s+a!==0)throw new Error("implementation bug")}__inplaceMultiplyAdd(t,n,r){r>this.length&&(r=this.length);const i=32767&t,o=t>>>15;let s=0,a=n;for(let c=0;c<r;c++){const u=this.__digit(c),l=32767&u,h=u>>>15,d=f.__imul(l,i),g=f.__imul(l,o),p=f.__imul(h,i),w=f.__imul(h,o);let y=a+d+s;s=y>>>30,y&=1073741823,y+=((32767&g)<<15)+((32767&p)<<15),s+=y>>>30,a=w+(g>>>15)+(p>>>15),this.__setDigit(c,1073741823&y)}if(s!=0||a!==0)throw new Error("implementation bug")}static __absoluteDivSmall(t,n,r=null){r===null&&(r=new f(t.length,!1));let i=0;for(let o,s=2*t.length-1;0<=s;s-=2){o=(i<<15|t.__halfDigit(s))>>>0;const a=0|o/n;i=0|o%n,o=(i<<15|t.__halfDigit(s-1))>>>0;const c=0|o/n;i=0|o%n,r.__setDigit(s>>>1,a<<15|c)}return r}static __absoluteModSmall(t,n){let r=0;for(let i=2*t.length-1;0<=i;i--)r=0|((r<<15|t.__halfDigit(i))>>>0)%n;return r}static __absoluteDivLarge(t,n,r,i){const o=n.__halfDigitLength(),s=n.length,a=t.__halfDigitLength()-o;let c=null;r&&(c=new f(a+2>>>1,!1),c.__initializeDigits());const u=new f(o+2>>>1,!1);u.__initializeDigits();const l=f.__clz15(n.__halfDigit(o-1));0<l&&(n=f.__specialLeftShift(n,l,0));const h=f.__specialLeftShift(t,l,1),d=n.__halfDigit(o-1);let g=0;for(let p,w=a;0<=w;w--){p=32767;const y=h.__halfDigit(w+o);if(y!==d){const _=(y<<15|h.__halfDigit(w+o-1))>>>0;p=0|_/d;let T=0|_%d;const D=n.__halfDigit(o-2),E=h.__halfDigit(w+o-2);for(;f.__imul(p,D)>>>0>(T<<16|E)>>>0&&(p--,T+=d,!(32767<T)););}f.__internalMultiplyAdd(n,p,0,s,u);let v=h.__inplaceSub(u,w,o+1);v!==0&&(v=h.__inplaceAdd(n,w,o),h.__setHalfDigit(w+o,32767&h.__halfDigit(w+o)+v),p--),r&&(1&w?g=p<<15:c.__setDigit(w>>>1,g|p))}if(i)return h.__inplaceRightShift(l),r?{quotient:c,remainder:h}:h;if(r)return c;throw new Error("unreachable")}static __clz15(t){return f.__clz30(t)-15}__inplaceAdd(t,n,r){let i=0;for(let o=0;o<r;o++){const s=this.__halfDigit(n+o)+t.__halfDigit(o)+i;i=s>>>15,this.__setHalfDigit(n+o,32767&s)}return i}__inplaceSub(t,n,r){let i=0;if(1&n){n>>=1;let o=this.__digit(n),s=32767&o,a=0;for(;a<r-1>>>1;a++){const l=t.__digit(a),h=(o>>>15)-(32767&l)-i;i=1&h>>>15,this.__setDigit(n+a,(32767&h)<<15|32767&s),o=this.__digit(n+a+1),s=(32767&o)-(l>>>15)-i,i=1&s>>>15}const c=t.__digit(a),u=(o>>>15)-(32767&c)-i;if(i=1&u>>>15,this.__setDigit(n+a,(32767&u)<<15|32767&s),n+a+1>=this.length)throw new RangeError("out of bounds");(1&r)==0&&(o=this.__digit(n+a+1),s=(32767&o)-(c>>>15)-i,i=1&s>>>15,this.__setDigit(n+t.length,1073709056&o|32767&s))}else{n>>=1;let o=0;for(;o<t.length-1;o++){const l=this.__digit(n+o),h=t.__digit(o),d=(32767&l)-(32767&h)-i;i=1&d>>>15;const g=(l>>>15)-(h>>>15)-i;i=1&g>>>15,this.__setDigit(n+o,(32767&g)<<15|32767&d)}const s=this.__digit(n+o),a=t.__digit(o),c=(32767&s)-(32767&a)-i;i=1&c>>>15;let u=0;(1&r)==0&&(u=(s>>>15)-(a>>>15)-i,i=1&u>>>15),this.__setDigit(n+o,(32767&u)<<15|32767&c)}return i}__inplaceRightShift(t){if(t===0)return;let n=this.__digit(0)>>>t;const r=this.length-1;for(let i=0;i<r;i++){const o=this.__digit(i+1);this.__setDigit(i,1073741823&o<<30-t|n),n=o>>>t}this.__setDigit(r,n)}static __specialLeftShift(t,n,r){const i=t.length,o=new f(i+r,!1);if(n===0){for(let a=0;a<i;a++)o.__setDigit(a,t.__digit(a));return 0<r&&o.__setDigit(i,0),o}let s=0;for(let a=0;a<i;a++){const c=t.__digit(a);o.__setDigit(a,1073741823&c<<n|s),s=c>>>30-n}return 0<r&&o.__setDigit(i,s),o}static __leftShiftByAbsolute(t,n){const r=f.__toShiftAmount(n);if(0>r)throw new RangeError("BigInt too big");const i=0|r/30,o=r%30,s=t.length,a=o!==0&&t.__digit(s-1)>>>30-o!=0,c=s+i+(a?1:0),u=new f(c,t.sign);if(o===0){let l=0;for(;l<i;l++)u.__setDigit(l,0);for(;l<c;l++)u.__setDigit(l,t.__digit(l-i))}else{let l=0;for(let h=0;h<i;h++)u.__setDigit(h,0);for(let h=0;h<s;h++){const d=t.__digit(h);u.__setDigit(h+i,1073741823&d<<o|l),l=d>>>30-o}if(a)u.__setDigit(s+i,l);else if(l!==0)throw new Error("implementation bug")}return u.__trim()}static __rightShiftByAbsolute(t,n){const r=t.length,i=t.sign,o=f.__toShiftAmount(n);if(0>o)return f.__rightShiftByMaximum(i);const s=0|o/30,a=o%30;let c=r-s;if(0>=c)return f.__rightShiftByMaximum(i);let u=!1;if(i){if((t.__digit(s)&(1<<a)-1)!=0)u=!0;else for(let h=0;h<s;h++)if(t.__digit(h)!==0){u=!0;break}}u&&a===0&&~t.__digit(r-1)==0&&c++;let l=new f(c,i);if(a===0){l.__setDigit(c-1,0);for(let h=s;h<r;h++)l.__setDigit(h-s,t.__digit(h))}else{let h=t.__digit(s)>>>a;const d=r-s-1;for(let g=0;g<d;g++){const p=t.__digit(g+s+1);l.__setDigit(g,1073741823&p<<30-a|h),h=p>>>a}l.__setDigit(d,h)}return u&&(l=f.__absoluteAddOne(l,!0,l)),l.__trim()}static __rightShiftByMaximum(t){return t?f.__oneDigit(1,!0):f.__zero()}static __toShiftAmount(t){if(1<t.length)return-1;const n=t.__unsignedDigit(0);return n>f.__kMaxLengthBits?-1:n}static __toPrimitive(t,n="default"){if(typeof t!="object"||t.constructor===f)return t;if(typeof Symbol<"u"&&typeof Symbol.toPrimitive=="symbol"&&t[Symbol.toPrimitive]){const o=t[Symbol.toPrimitive](n);if(typeof o!="object")return o;throw new TypeError("Cannot convert object to primitive value")}const r=t.valueOf;if(r){const o=r.call(t);if(typeof o!="object")return o}const i=t.toString;if(i){const o=i.call(t);if(typeof o!="object")return o}throw new TypeError("Cannot convert object to primitive value")}static __toNumeric(t){return f.__isBigInt(t)?t:+t}static __isBigInt(t){return typeof t=="object"&&t!==null&&t.constructor===f}static __truncateToNBits(t,n){const r=0|(t+29)/30,i=new f(r,n.sign),o=r-1;for(let a=0;a<o;a++)i.__setDigit(a,n.__digit(a));let s=n.__digit(o);if(t%30!=0){const a=32-t%30;s=s<<a>>>a}return i.__setDigit(o,s),i.__trim()}static __truncateAndSubFromPowerOfTwo(t,n,r){var i=Math.min;const o=0|(t+29)/30,s=new f(o,r);let a=0;const c=o-1;let u=0;for(const g=i(c,n.length);a<g;a++){const p=0-n.__digit(a)-u;u=1&p>>>30,s.__setDigit(a,1073741823&p)}for(;a<c;a++)s.__setDigit(a,0|1073741823&-u);let l=c<n.length?n.__digit(c):0;const h=t%30;let d;if(h==0)d=0-l-u,d&=1073741823;else{const g=32-h;l=l<<g>>>g;const p=1<<32-g;d=p-l-u,d&=p-1}return s.__setDigit(c,d),s.__trim()}__digit(t){return this[t]}__unsignedDigit(t){return this[t]>>>0}__setDigit(t,n){this[t]=0|n}__setDigitGrow(t,n){this[t]=0|n}__halfDigitLength(){const t=this.length;return 32767>=this.__unsignedDigit(t-1)?2*t-1:2*t}__halfDigit(t){return 32767&this[t>>>1]>>>15*(1&t)}__setHalfDigit(t,n){const r=t>>>1,i=this.__digit(r),o=1&t?32767&i|n<<15:1073709056&i|32767&n;this.__setDigit(r,o)}static __digitPow(t,n){let r=1;for(;0<n;)1&n&&(r*=t),n>>>=1,t*=t;return r}static __detectBigEndian(){return f.__kBitConversionDouble[0]=-0,f.__kBitConversionInts[0]!==0}static __isOneDigitInt(t){return(1073741823&t)===t}}f.__kMaxLength=33554432,f.__kMaxLengthBits=f.__kMaxLength<<5,f.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],f.__kBitsPerCharTableShift=5,f.__kBitsPerCharTableMultiplier=1<<f.__kBitsPerCharTableShift,f.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],f.__kBitConversionBuffer=new ArrayBuffer(8),f.__kBitConversionDouble=new Float64Array(f.__kBitConversionBuffer),f.__kBitConversionInts=new Int32Array(f.__kBitConversionBuffer),f.__kBitConversionIntHigh=f.__detectBigEndian()?0:1,f.__kBitConversionIntLow=f.__detectBigEndian()?1:0,f.__clz30=Math.clz32?function(e){return Math.clz32(e)-2}:function(e){return e===0?30:0|29-(0|Math.log(e>>>0)/Math.LN2)},f.__imul=Math.imul||function(e,t){return 0|e*t};const Ot=f.BigInt(0),Yn=f.BigInt(1),Ni=f.BigInt(2),Zc=f.BigInt(10),qc=f.BigInt(24),Xc=f.BigInt(60),Wc=f.BigInt(1e3),In=f.BigInt(1e6),Pn=f.BigInt(1e9),Go=f.multiply(f.BigInt(3600),Pn),Gc=f.multiply(Xc,Pn),Ae=f.multiply(Go,qc);function me(e){return typeof e=="bigint"?f.BigInt(e.toString(10)):e}function Vo(e){return f.equal(f.remainder(e,Ni),Ot)}function ze(e){return f.lessThan(e,Ot)?f.unaryMinus(e):e}function Yr(e,t){return f.lessThan(e,t)?-1:f.greaterThan(e,t)?1:0}function Sn(e,t){return{quotient:f.divide(e,t),remainder:f.remainder(e,t)}}var Ko,Qo;const $="slot-epochNanoSeconds",A="slot-iso-date",q="slot-iso-date-time",X="slot-time",M="slot-calendar",Bo="slot-date-brand",Jo="slot-year-month-brand",ts="slot-month-day-brand",S="slot-time-zone",lt="slot-years",ht="slot-months",Ct="slot-weeks",dt="slot-days",ft="slot-hours",mt="slot-minutes",gt="slot-seconds",pt="slot-milliseconds",yt="slot-microseconds",$t="slot-nanoseconds",es="date",ns="ym",rs="md",is="time",os="datetime",ss="instant",je="original",rn="timezone-canonical",Ri="timezone-original",zn="calendar-id",as="locale",Li="options",cs=new WeakMap,Oi=Symbol.for("@@Temporal__GetSlots");(Ko=globalThis)[Oi]||(Ko[Oi]=function(e){return cs.get(e)});const Ir=globalThis[Oi],Yi=Symbol.for("@@Temporal__CreateSlots");(Qo=globalThis)[Yi]||(Qo[Yi]=function(e){cs.set(e,Object.create(null))});const ge=globalThis[Yi];function wt(e,...t){if(!e||typeof e!="object")return!1;const n=Ir(e);return!!n&&t.every((r=>r in n))}function m(e,t){const n=Ir(e)?.[t];if(n===void 0)throw new TypeError(`Missing internal slot ${t}`);return n}function N(e,t,n){const r=Ir(e);if(r===void 0)throw new TypeError("Missing slots for the given container");if(r[t])throw new TypeError(`${t} already has set`);r[t]=n}const Ii={};function pe(e,t){Object.defineProperty(e.prototype,Symbol.toStringTag,{value:t,writable:!1,enumerable:!1,configurable:!0});const n=Object.getOwnPropertyNames(e);for(let i=0;i<n.length;i++){const o=n[i],s=Object.getOwnPropertyDescriptor(e,o);s.configurable&&s.enumerable&&(s.enumerable=!1,Object.defineProperty(e,o,s))}const r=Object.getOwnPropertyNames(e.prototype);for(let i=0;i<r.length;i++){const o=r[i],s=Object.getOwnPropertyDescriptor(e.prototype,o);s.configurable&&s.enumerable&&(s.enumerable=!1,Object.defineProperty(e.prototype,o,s))}Pi(t,e),Pi(`${t}.prototype`,e.prototype)}function Pi(e,t){const n=`%${e}%`;if(Ii[n]!==void 0)throw new Error(`intrinsic ${e} already exists`);Ii[n]=t}function rt(e){return Ii[e]}function on(e,t){let n=e;if(n===0)return{div:n,mod:n};const r=Math.sign(n);n=Math.abs(n);const i=Math.trunc(1+Math.log10(n));if(t>=i)return{div:0*r,mod:r*n};if(t===0)return{div:r*n,mod:0*r};const o=n.toPrecision(i);return{div:r*Number.parseInt(o.slice(0,i-t),10),mod:r*Number.parseInt(o.slice(i-t),10)}}function Si(e,t,n){let r=e,i=n;if(r===0)return i;const o=Math.sign(r)||Math.sign(i);r=Math.abs(r),i=Math.abs(i);const s=r.toPrecision(Math.trunc(1+Math.log10(r)));if(i===0)return o*Number.parseInt(s+"0".repeat(t),10);const a=s+i.toPrecision(Math.trunc(1+Math.log10(i))).padStart(t,"0");return o*Number.parseInt(a,10)}function Pr(e,t){const n=t==="negative";switch(e){case"ceil":return n?"zero":"infinity";case"floor":return n?"infinity":"zero";case"expand":return"infinity";case"trunc":return"zero";case"halfCeil":return n?"half-zero":"half-infinity";case"halfFloor":return n?"half-infinity":"half-zero";case"halfExpand":return"half-infinity";case"halfTrunc":return"half-zero";case"halfEven":return"half-even"}}function Sr(e,t,n,r,i){return i==="zero"?e:i==="infinity"?t:n<0?e:n>0?t:i==="half-zero"?e:i==="half-infinity"?t:r?e:t}class L{constructor(t){this.totalNs=me(t),this.sec=f.toNumber(f.divide(this.totalNs,Pn)),this.subsec=f.toNumber(f.remainder(this.totalNs,Pn))}static validateNew(t,n){if(f.greaterThan(ze(t),L.MAX))throw new RangeError(`${n} of duration time units cannot exceed ${L.MAX} s`);return new L(t)}static fromEpochNsDiff(t,n){const r=f.subtract(me(t),me(n));return new L(r)}static fromComponents(t,n,r,i,o,s){const a=f.add(f.add(f.add(f.add(f.add(f.BigInt(s),f.multiply(f.BigInt(o),Wc)),f.multiply(f.BigInt(i),In)),f.multiply(f.BigInt(r),Pn)),f.multiply(f.BigInt(n),Gc)),f.multiply(f.BigInt(t),Go));return L.validateNew(a,"total")}abs(){return new L(ze(this.totalNs))}add(t){return L.validateNew(f.add(this.totalNs,t.totalNs),"sum")}add24HourDays(t){return L.validateNew(f.add(this.totalNs,f.multiply(f.BigInt(t),Ae)),"sum")}addToEpochNs(t){return f.add(me(t),this.totalNs)}cmp(t){return Yr(this.totalNs,t.totalNs)}divmod(t){const{quotient:n,remainder:r}=Sn(this.totalNs,f.BigInt(t));return{quotient:f.toNumber(n),remainder:new L(r)}}fdiv(t){const n=me(t),r=f.BigInt(n);let{quotient:i,remainder:o}=Sn(this.totalNs,r);const s=[];let a;const c=(f.lessThan(this.totalNs,Ot)?-1:1)*Math.sign(f.toNumber(n));for(;!f.equal(o,Ot)&&s.length<50;)o=f.multiply(o,Zc),{quotient:a,remainder:o}=Sn(o,r),s.push(Math.abs(f.toNumber(a)));return c*+(ze(i).toString()+"."+s.join(""))}isZero(){return f.equal(this.totalNs,Ot)}round(t,n){const r=me(t);if(f.equal(r,Yn))return this;const{quotient:i,remainder:o}=Sn(this.totalNs,r),s=f.lessThan(this.totalNs,Ot)?"negative":"positive",a=f.multiply(ze(i),r),c=f.add(a,r),u=Yr(ze(f.multiply(o,Ni)),r),l=Pr(n,s),h=f.equal(ze(this.totalNs),a)?a:Sr(a,c,u,Vo(i),l),d=s==="positive"?h:f.unaryMinus(h);return L.validateNew(d,"rounding")}sign(){return this.cmp(new L(Ot))}subtract(t){return L.validateNew(f.subtract(this.totalNs,t.totalNs),"difference")}}L.MAX=f.BigInt("9007199254740991999999999"),L.ZERO=new L(Ot);const us=/[A-Za-z._][A-Za-z._0-9+-]*/,jn=new RegExp(`(?:${/(?:[+-](?:[01][0-9]|2[0-3])(?::?[0-5][0-9])?)/.source}|(?:${us.source})(?:\\/(?:${us.source}))*)`),ls=/(?:[+-]\d{6}|\d{4})/,zr=/(?:0[1-9]|1[0-2])/,zi=/(?:0[1-9]|[12]\d|3[01])/,Vc=new RegExp(`(${ls.source})(?:-(${zr.source})-(${zi.source})|(${zr.source})(${zi.source}))`),hs=/(\d{2})(?::(\d{2})(?::(\d{2})(?:[.,](\d{1,9}))?)?|(\d{2})(?:(\d{2})(?:[.,](\d{1,9}))?)?)?/,ds=/((?:[+-])(?:[01][0-9]|2[0-3])(?::?(?:[0-5][0-9])(?::?(?:[0-5][0-9])(?:[.,](?:\d{1,9}))?)?)?)/,fs=new RegExp(`([zZ])|${ds.source}?`),sn=/\[(!)?([a-z_][a-z0-9_-]*)=([A-Za-z0-9]+(?:-[A-Za-z0-9]+)*)\]/g,Kc=new RegExp([`^${Vc.source}`,`(?:(?:[tT]|\\s+)${hs.source}(?:${fs.source})?)?`,`(?:\\[!?(${jn.source})\\])?`,`((?:${sn.source})*)$`].join("")),Qc=new RegExp([`^[tT]?${hs.source}`,`(?:${fs.source})?`,`(?:\\[!?${jn.source}\\])?`,`((?:${sn.source})*)$`].join("")),Bc=new RegExp(`^(${ls.source})-?(${zr.source})(?:\\[!?${jn.source}\\])?((?:${sn.source})*)$`),Jc=new RegExp(`^(?:--)?(${zr.source})-?(${zi.source})(?:\\[!?${jn.source}\\])?((?:${sn.source})*)$`),ji=/(\d+)(?:[.,](\d{1,9}))?/,tu=new RegExp(`(?:${ji.source}H)?(?:${ji.source}M)?(?:${ji.source}S)?`),eu=new RegExp(`^([+-])?P${/(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?/.source}(?:T(?!$)${tu.source})?$`,"i"),ke=864e5,jr=1e6*ke,nu=6e10,ms=1e8*ke,an=ce(ms),Un=f.unaryMinus(an),ru=f.add(f.subtract(Un,Ae),Yn),iu=f.subtract(f.add(an,Ae),Yn),ou=146097*ke,gs=-271821,ps=275760,Fn=Date.UTC(1847,0,1),su=["iso8601","hebrew","islamic","islamic-umalqura","islamic-tbla","islamic-civil","islamic-rgsa","islamicc","persian","ethiopic","ethioaa","ethiopic-amete-alem","coptic","chinese","dangi","roc","indian","buddhist","japanese","gregory"],au=new Set(["ACT","AET","AGT","ART","AST","BET","BST","CAT","CNT","CST","CTT","EAT","ECT","IET","IST","JST","MIT","NET","NST","PLT","PNT","PRT","PST","SST","VST"]);function W(e){return typeof e=="object"&&e!==null||typeof e=="function"}function Ur(e){if(typeof e=="bigint")throw new TypeError("Cannot convert BigInt to number");return Number(e)}function Fr(e){if(typeof e=="symbol")throw new TypeError("Cannot convert a Symbol value to a String");return String(e)}function k(e){const t=Ur(e);if(t===0)return 0;if(Number.isNaN(t)||t===1/0||t===-1/0)throw new RangeError("invalid number value");const n=Math.trunc(t);return n===0?0:n}function ys(e,t){const n=k(e);if(n<=0)throw t!==void 0?new RangeError(`property '${t}' cannot be a a number less than one`):new RangeError("Cannot convert a number less than one to a positive integer");return n}function qt(e){const t=Ur(e);if(Number.isNaN(t))throw new RangeError("not a number");if(t===1/0||t===-1/0)throw new RangeError("infinity is out of range");if(!(function(n){if(typeof n!="number"||Number.isNaN(n)||n===1/0||n===-1/0)return!1;const r=Math.abs(n);return Math.floor(r)===r})(t))throw new RangeError(`unsupported fractional value ${e}`);return t===0?0:t}function Hn(e,t){return String(e).padStart(t,"0")}function J(e){if(typeof e!="string")throw new TypeError(`expected a string, not ${String(e)}`);return e}function Ui(e,t){if(W(e)){const n=e?.toString();if(typeof n=="string"||typeof n=="number")return n;throw new TypeError("Cannot convert object to primitive value")}return e}const Fi=["era","eraYear","year","month","monthCode","day","hour","minute","second","millisecond","microsecond","nanosecond","offset","timeZone"],cu={era:Fr,eraYear:k,year:k,month:ys,monthCode:function(e){const t=J(Ui(e));if(t.length<3||t.length>4||t[0]!=="M"||"0123456789".indexOf(t[1])===-1||"0123456789".indexOf(t[2])===-1||t[1]+t[2]==="00"&&t[3]!=="L"||t[3]!=="L"&&t[3]!==void 0)throw new RangeError(`bad month code ${t}; must match M01-M99 or M00L-M99L`);return t},day:ys,hour:k,minute:k,second:k,millisecond:k,microsecond:k,nanosecond:k,offset:function(e){const t=J(Ui(e));return gn(t),t},timeZone:_t},uu={hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0},cn=[["years","year","date"],["months","month","date"],["weeks","week","date"],["days","day","date"],["hours","hour","time"],["minutes","minute","time"],["seconds","second","time"],["milliseconds","millisecond","time"],["microseconds","microsecond","time"],["nanoseconds","nanosecond","time"]],ws=Object.fromEntries(cn.map((e=>[e[0],e[1]]))),lu=Object.fromEntries(cn.map((([e,t])=>[t,e]))),Zn=cn.map((([,e])=>e)),un={day:jr,hour:36e11,minute:6e10,second:1e9,millisecond:1e6,microsecond:1e3,nanosecond:1},Hr=["days","hours","microseconds","milliseconds","minutes","months","nanoseconds","seconds","weeks","years"],hu=Intl.DateTimeFormat,vs=new Map;function bs(e){const t=pr(e);let n=vs.get(t);return n===void 0&&(n=new hu("en-us",{timeZone:t,hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),vs.set(t,n)),n}function it(e){return wt(e,$)&&!wt(e,S,M)}function G(e){return wt(e,lt,ht,dt,ft,mt,gt,pt,yt,$t)}function V(e){return wt(e,Bo)}function K(e){return wt(e,X)}function F(e){return wt(e,q)}function ot(e){return wt(e,Jo)}function Yt(e){return wt(e,ts)}function O(e){return wt(e,$,S,M)}function b(e,t){if(!t(e))throw new TypeError("invalid receiver: method called with the wrong type of this-object")}function ln(e){if(wt(e,M)||wt(e,S))throw new TypeError("with() does not support a calendar or timeZone property");if(K(e))throw new TypeError("with() does not accept Temporal.PlainTime, use withPlainTime() instead");if(e.calendar!==void 0)throw new TypeError("with() does not support a calendar property");if(e.timeZone!==void 0)throw new TypeError("with() does not support a timeZone property")}function qn(e,t){return t==="never"||t==="auto"&&e==="iso8601"?"":`[${t==="critical"?"!":""}u-ca=${e}]`}function Zr(e){let t,n,r=!1;for(sn.lastIndex=0;n=sn.exec(e);){const{1:i,2:o,3:s}=n;if(o==="u-ca"){if(t===void 0)t=s,r=i==="!";else if(i==="!"||r)throw new RangeError(`Invalid annotations in ${e}: more than one u-ca present with critical flag`)}else if(i==="!")throw new RangeError(`Unrecognized annotation: !${o}=${s}`)}return t}function ee(e){const t=Kc.exec(e);if(!t)throw new RangeError(`invalid RFC 9557 string: ${e}`);const n=Zr(t[16]);let r=t[1];if(r==="-000000")throw new RangeError(`invalid RFC 9557 string: ${e}`);const i=+r,o=+(t[2]??t[4]??1),s=+(t[3]??t[5]??1),a=t[6]!==void 0,c=+(t[6]??0),u=+(t[7]??t[10]??0);let l=+(t[8]??t[11]??0);l===60&&(l=59);const h=(t[9]??t[12]??"")+"000000000",d=+h.slice(0,3),g=+h.slice(3,6),p=+h.slice(6,9);let w,y=!1;t[13]?(w=void 0,y=!0):t[14]&&(w=t[14]);const v=t[15];return Ji(i,o,s,c,u,l,d,g,p),{year:i,month:o,day:s,time:a?{hour:c,minute:u,second:l,millisecond:d,microsecond:g,nanosecond:p}:"start-of-day",tzAnnotation:v,offset:w,z:y,calendar:n}}function _s(e){const t=Qc.exec(e);let n,r,i,o,s,a,c;if(t){c=Zr(t[10]),n=+(t[1]??0),r=+(t[2]??t[5]??0),i=+(t[3]??t[6]??0),i===60&&(i=59);const u=(t[4]??t[7]??"")+"000000000";if(o=+u.slice(0,3),s=+u.slice(3,6),a=+u.slice(6,9),t[8])throw new RangeError("Z designator not supported for PlainTime")}else{let u,l;if({time:u,z:l,calendar:c}=ee(e),u==="start-of-day")throw new RangeError(`time is missing in string: ${e}`);if(l)throw new RangeError("Z designator not supported for PlainTime");({hour:n,minute:r,second:i,millisecond:o,microsecond:s,nanosecond:a}=u)}if(ei(n,r,i,o,s,a),/[tT ][0-9][0-9]/.test(e))return{hour:n,minute:r,second:i,millisecond:o,microsecond:s,nanosecond:a,calendar:c};try{const{month:u,day:l}=Zi(e);qe(1972,u,l)}catch{try{const{year:u,month:l}=Hi(e);qe(u,l,1)}catch{return{hour:n,minute:r,second:i,millisecond:o,microsecond:s,nanosecond:a,calendar:c}}}throw new RangeError(`invalid RFC 9557 time-only string ${e}; may need a T prefix`)}function Hi(e){const t=Bc.exec(e);let n,r,i,o;if(t){i=Zr(t[3]);let s=t[1];if(s==="-000000")throw new RangeError(`invalid RFC 9557 string: ${e}`);if(n=+s,r=+t[2],o=1,i!==void 0&&i!=="iso8601")throw new RangeError("YYYY-MM format is only valid with iso8601 calendar")}else{let s;if({year:n,month:r,calendar:i,day:o,z:s}=ee(e),s)throw new RangeError("Z designator not supported for PlainYearMonth")}return{year:n,month:r,calendar:i,referenceISODay:o}}function Zi(e){const t=Jc.exec(e);let n,r,i,o;if(t){if(i=Zr(t[3]),n=+t[1],r=+t[2],i!==void 0&&i!=="iso8601")throw new RangeError("MM-DD format is only valid with iso8601 calendar")}else{let s;if({month:n,day:r,calendar:i,year:o,z:s}=ee(e),s)throw new RangeError("Z designator not supported for PlainMonthDay")}return{month:n,day:r,calendar:i,referenceISOYear:o}}const Ts=new RegExp(`^${jn.source}$`,"i"),Ms=new RegExp(`^${/([+-])([01][0-9]|2[0-3])(?::?([0-5][0-9])?)?/.source}$`);function Es(e){const t=fu.test(e)?"Seconds not allowed in offset time zone":"Invalid time zone";throw new RangeError(`${t}: ${e}`)}function Ne(e){return Ts.test(e)||Es(e),Ms.test(e)?{offsetMinutes:gn(e)/6e10}:{tzName:e}}function Xn(e,t,n,r){let i=e,o=t,s=n;switch(r){case"reject":qe(i,o,s);break;case"constrain":({year:i,month:o,day:s}=Qs(i,o,s))}return{year:i,month:o,day:s}}function qr(e,t,n,r,i,o,s){let a=e,c=t,u=n,l=r,h=i,d=o;switch(s){case"reject":ei(a,c,u,l,h,d);break;case"constrain":a=Tt(a,0,23),c=Tt(c,0,59),u=Tt(u,0,59),l=Tt(l,0,999),h=Tt(h,0,999),d=Tt(d,0,999)}return{hour:a,minute:c,second:u,millisecond:l,microsecond:h,nanosecond:d}}function Ds(e){if(!W(e))throw new TypeError("invalid duration-like");const t={years:void 0,months:void 0,weeks:void 0,days:void 0,hours:void 0,minutes:void 0,seconds:void 0,milliseconds:void 0,microseconds:void 0,nanoseconds:void 0};let n=!1;for(let r=0;r<Hr.length;r++){const i=Hr[r],o=e[i];o!==void 0&&(n=!0,t[i]=qt(o))}if(!n)throw new TypeError("invalid duration-like");return t}function at({years:e,months:t,weeks:n,days:r},i,o,s){return{years:e,months:s??t,weeks:o??n,days:i??r}}function P(e,t){return{isoDate:e,time:t}}function I(e){return Ee(e,"overflow",["constrain","reject"],"constrain")}function Wn(e){return Ee(e,"disambiguation",["compatible","earlier","later","reject"],"compatible")}function Xt(e,t){return Ee(e,"roundingMode",["ceil","floor","expand","trunc","halfCeil","halfFloor","halfExpand","halfTrunc","halfEven"],t)}function Xr(e,t){return Ee(e,"offset",["prefer","use","ignore","reject"],t)}function Gn(e){return Ee(e,"calendarName",["auto","always","never","critical"],"auto")}function hn(e){let t=e.roundingIncrement;if(t===void 0)return 1;const n=k(t);if(n<1||n>1e9)throw new RangeError(`roundingIncrement must be at least 1 and at most 1e9, not ${t}`);return n}function dn(e,t,n){const r=n?t:t-1;if(e>r)throw new RangeError(`roundingIncrement must be at least 1 and less than ${r}, not ${e}`);if(t%e!=0)throw new RangeError(`Rounding increment must divide evenly into ${t}`)}function Vn(e){const t=e.fractionalSecondDigits;if(t===void 0)return"auto";if(typeof t!="number"){if(Fr(t)!=="auto")throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${t}`);return"auto"}const n=Math.floor(t);if(!Number.isFinite(n)||n<0||n>9)throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${t}`);return n}function Kn(e,t){switch(e){case"minute":return{precision:"minute",unit:"minute",increment:1};case"second":return{precision:0,unit:"second",increment:1};case"millisecond":return{precision:3,unit:"millisecond",increment:1};case"microsecond":return{precision:6,unit:"microsecond",increment:1};case"nanosecond":return{precision:9,unit:"nanosecond",increment:1}}switch(t){case"auto":return{precision:t,unit:"nanosecond",increment:1};case 0:return{precision:t,unit:"second",increment:1};case 1:case 2:case 3:return{precision:t,unit:"millisecond",increment:10**(3-t)};case 4:case 5:case 6:return{precision:t,unit:"microsecond",increment:10**(6-t)};case 7:case 8:case 9:return{precision:t,unit:"nanosecond",increment:10**(9-t)};default:throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${t}`)}}const ye=Symbol("~required~");function At(e,t,n,r,i=[]){let o=[];for(let u=0;u<cn.length;u++){const l=cn[u],h=l[1],d=l[2];n!=="datetime"&&n!==d||o.push(h)}o=o.concat(i);let s=r;s===ye?s=void 0:s!==void 0&&o.push(s);let a=[];a=a.concat(o);for(let u=0;u<o.length;u++){const l=o[u],h=lu[l];h!==void 0&&a.push(h)}let c=Ee(e,t,a,s);if(c===void 0&&r===ye)throw new RangeError(`${t} is required`);return c&&c in ws?ws[c]:c}function qi(e){const t=e.relativeTo;if(t===void 0)return{};let n,r,i,o,s,a="option",c=!1;if(W(t)){if(O(t))return{zonedRelativeTo:t};if(V(t))return{plainRelativeTo:t};if(F(t))return{plainRelativeTo:bt(m(t,q).isoDate,m(t,M))};i=sr(t);const u=It(i,t,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond","offset","timeZone"],[]);({isoDate:n,time:r}=Jn(i,u,"constrain")),{offset:s,timeZone:o}=u,s===void 0&&(a="wall")}else{let u,l,h,d,g;if({year:h,month:d,day:g,time:r,calendar:i,tzAnnotation:u,offset:s,z:l}=ee(J(t)),u)o=_t(u),l?a="exact":s||(a="wall"),c=!0;else if(l)throw new RangeError("Z designator not supported for PlainDate relativeTo; either remove the Z or add a bracketed time zone");i||(i="iso8601"),i=Mt(i),n={year:h,month:d,day:g}}return o===void 0?{plainRelativeTo:bt(n,i)}:{zonedRelativeTo:ct(Wr(n,r,a,a==="option"?gn(s):0,o,"compatible","reject",c),o,i)}}function we(e){return m(e,lt)!==0?"year":m(e,ht)!==0?"month":m(e,Ct)!==0?"week":m(e,dt)!==0?"day":m(e,ft)!==0?"hour":m(e,mt)!==0?"minute":m(e,gt)!==0?"second":m(e,pt)!==0?"millisecond":m(e,yt)!==0?"microsecond":"nanosecond"}function ve(e,t){return Zn.indexOf(e)>Zn.indexOf(t)?t:e}function ne(e){return e==="year"||e==="month"||e==="week"}function be(e){return ne(e)||e==="day"?"date":"time"}function Re(e){return rt("%calendarImpl%")(e)}function Qn(e){return rt("%calendarImpl%")(m(e,M))}function vt(e,t,n="date"){const r=Object.create(null),i=Re(e).isoToDate(t,{year:!0,monthCode:!0,day:!0});return r.monthCode=i.monthCode,n!=="month-day"&&n!=="date"||(r.day=i.day),n!=="year-month"&&n!=="date"||(r.year=i.year),r}function It(e,t,n,r,i){const o=Re(e).extraFields(n),s=n.concat(r,o),a=Object.create(null);let c=!1;s.sort();for(let u=0;u<s.length;u++){const l=s[u],h=t[l];if(h!==void 0)c=!0,a[l]=(0,cu[l])(h);else if(i!=="partial"){if(i.includes(l))throw new TypeError(`required property '${l}' missing or undefined`);a[l]=uu[l]}}if(i==="partial"&&!c)throw new TypeError("no supported properties found");return a}function Xi(e,t="complete"){const n=["hour","microsecond","millisecond","minute","nanosecond","second"];let r=!1;const i=Object.create(null);for(let o=0;o<n.length;o++){const s=n[o],a=e[s];a!==void 0?(i[s]=k(a),r=!0):t==="complete"&&(i[s]=0)}if(!r)throw new TypeError("invalid time-like");return i}function Bn(e,t){if(W(e)){if(V(e))return I(x(t)),bt(m(e,A),m(e,M));if(O(e)){const c=Ut(m(e,S),m(e,$));return I(x(t)),bt(c.isoDate,m(e,M))}if(F(e))return I(x(t)),bt(m(e,q).isoDate,m(e,M));const a=sr(e);return bt(Oe(a,It(a,e,["year","month","monthCode","day"],[],[]),I(x(t))),a)}let{year:n,month:r,day:i,calendar:o,z:s}=ee(J(e));if(s)throw new RangeError("Z designator not supported for PlainDate");return o||(o="iso8601"),o=Mt(o),I(x(t)),bt({year:n,month:r,day:i},o)}function Jn(e,t,n){return P(Oe(e,t,n),qr(t.hour,t.minute,t.second,t.millisecond,t.microsecond,t.nanosecond,n))}function tr(e,t){let n,r,i;if(W(e)){if(F(e))return I(x(t)),jt(m(e,q),m(e,M));if(O(e)){const a=Ut(m(e,S),m(e,$));return I(x(t)),jt(a,m(e,M))}if(V(e))return I(x(t)),jt(P(m(e,A),{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),m(e,M));i=sr(e);const o=It(i,e,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond"],[]),s=I(x(t));({isoDate:n,time:r}=Jn(i,o,s))}else{let o,s,a,c;if({year:s,month:a,day:c,time:r,calendar:i,z:o}=ee(J(e)),o)throw new RangeError("Z designator not supported for PlainDateTime");r==="start-of-day"&&(r={deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),Ji(s,a,c,r.hour,r.minute,r.second,r.millisecond,r.microsecond,r.nanosecond),i||(i="iso8601"),i=Mt(i),I(x(t)),n={year:s,month:a,day:c}}return jt(P(n,r),i)}function zt(e){const t=rt("%Temporal.Duration%");if(G(e))return new t(m(e,lt),m(e,ht),m(e,Ct),m(e,dt),m(e,ft),m(e,mt),m(e,gt),m(e,pt),m(e,yt),m(e,$t));if(!W(e))return(function(i){const{years:o,months:s,weeks:a,days:c,hours:u,minutes:l,seconds:h,milliseconds:d,microseconds:g,nanoseconds:p}=(function(w){const y=eu.exec(w);if(!y)throw new RangeError(`invalid duration: ${w}`);if(y.every(((On,te)=>te<2||On===void 0)))throw new RangeError(`invalid duration: ${w}`);const v=y[1]==="-"?-1:1,_=y[2]===void 0?0:k(y[2])*v,T=y[3]===void 0?0:k(y[3])*v,D=y[4]===void 0?0:k(y[4])*v,E=y[5]===void 0?0:k(y[5])*v,R=y[6]===void 0?0:k(y[6])*v,H=y[7],U=y[8],j=y[9],Z=y[10],C=y[11];let Y=0,z=0,B=0;if(H!==void 0){if(U??j??Z??C)throw new RangeError("only the smallest unit can be fractional");B=3600*k((H+"000000000").slice(0,9))*v}else if(Y=U===void 0?0:k(U)*v,j!==void 0){if(Z??C)throw new RangeError("only the smallest unit can be fractional");B=60*k((j+"000000000").slice(0,9))*v}else z=Z===void 0?0:k(Z)*v,C!==void 0&&(B=k((C+"000000000").slice(0,9))*v);const Qt=B%1e3,Bt=Math.trunc(B/1e3)%1e3,Jt=Math.trunc(B/1e6)%1e3;return z+=Math.trunc(B/1e9)%60,Y+=Math.trunc(B/6e10),ni(_,T,D,E,R,Y,z,Jt,Bt,Qt),{years:_,months:T,weeks:D,days:E,hours:R,minutes:Y,seconds:z,milliseconds:Jt,microseconds:Bt,nanoseconds:Qt}})(i);return new(rt("%Temporal.Duration%"))(o,s,a,c,u,l,h,d,g,p)})(J(e));const n={years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};let r=Ds(e);for(let i=0;i<Hr.length;i++){const o=Hr[i],s=r[o];s!==void 0&&(n[o]=s)}return new t(n.years,n.months,n.weeks,n.days,n.hours,n.minutes,n.seconds,n.milliseconds,n.microseconds,n.nanoseconds)}function er(e){let t;if(W(e)){if(it(e)||O(e))return re(m(e,$));t=Ui(e)}else t=e;const{year:n,month:r,day:i,time:o,offset:s,z:a}=(function(w){const y=ee(w);if(!y.z&&!y.offset)throw new RangeError("Temporal.Instant requires a time zone offset");return y})(J(t)),{hour:c=0,minute:u=0,second:l=0,millisecond:h=0,microsecond:d=0,nanosecond:g=0}=o==="start-of-day"?{}:o,p=dr(n,r,i,c,u,l,h,d,g-(a?0:gn(s)));return yn(p.isoDate),re(st(p))}function xs(e,t){if(W(e)){if(Yt(e))return I(x(t)),fn(m(e,A),m(e,M));let a;return wt(e,M)?a=m(e,M):(a=e.calendar,a===void 0&&(a="iso8601"),a=or(a)),fn(Gr(a,It(a,e,["year","month","monthCode","day"],[],[]),I(x(t))),a)}let{month:n,day:r,referenceISOYear:i,calendar:o}=Zi(J(e));if(o===void 0&&(o="iso8601"),o=Mt(o),I(x(t)),o==="iso8601")return fn({year:1972,month:n,day:r},o);let s={year:i,month:n,day:r};return Xe(s),s=Gr(o,vt(o,s,"month-day"),"constrain"),fn(s,o)}function Le(e,t){let n;if(W(e)){if(K(e))return I(x(t)),_e(m(e,X));if(F(e))return I(x(t)),_e(m(e,q).time);if(O(e)){const u=Ut(m(e,S),m(e,$));return I(x(t)),_e(u.time)}const{hour:r,minute:i,second:o,millisecond:s,microsecond:a,nanosecond:c}=Xi(e);n=qr(r,i,o,s,a,c,I(x(t)))}else n=_s(J(e)),I(x(t));return _e(n)}function Cs(e){return e===void 0?{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}:m(Le(e),X)}function nr(e,t){if(W(e)){if(ot(e))return I(x(t)),mn(m(e,A),m(e,M));const a=sr(e);return mn(ar(a,It(a,e,["year","month","monthCode"],[],[]),I(x(t))),a)}let{year:n,month:r,referenceISODay:i,calendar:o}=Hi(J(e));o===void 0&&(o="iso8601"),o=Mt(o),I(x(t));let s={year:n,month:r,day:i};return eo(s),s=ar(o,vt(o,s,"year-month"),"constrain"),mn(s,o)}function Wr(e,t,n,r,i,o,s,a){if(t==="start-of-day")return Ye(i,e);const c=P(e,t);if(n==="wall"||s==="ignore")return ut(i,c,o);if(n==="exact"||s==="use"){const h=dr(e.year,e.month,e.day,t.hour,t.minute,t.second,t.millisecond,t.microsecond,t.nanosecond-r);yn(h.isoDate);const d=st(h);return oe(d),d}yn(e);const u=st(c),l=cr(i,c);for(let h=0;h<l.length;h++){const d=l[h],g=f.toNumber(f.subtract(u,d)),p=Pe(g,6e10,"halfExpand");if(g===r||a&&p===r)return d}if(s==="reject"){const h=Wi(r),d=lr(c,"iso8601","auto");throw new RangeError(`Offset ${h} is invalid for ${d} in ${i}`)}return Ps(l,i,c,o)}function rr(e,t){let n,r,i,o,s,a,c,u=!1,l="option";if(W(e)){if(O(e)){const w=x(t);return Wn(w),Xr(w,"reject"),I(w),ct(m(e,$),m(e,S),m(e,M))}s=sr(e);const d=It(s,e,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond","offset","timeZone"],["timeZone"]);({offset:o,timeZone:i}=d),o===void 0&&(l="wall");const g=x(t);a=Wn(g),c=Xr(g,"reject");const p=I(g);({isoDate:n,time:r}=Jn(s,d,p))}else{let d,g,p,w,y;({year:p,month:w,day:y,time:r,tzAnnotation:d,offset:o,z:g,calendar:s}=(function(_){const T=ee(_);if(!T.tzAnnotation)throw new RangeError("Temporal.ZonedDateTime requires a time zone ID in brackets");return T})(J(e))),i=_t(d),g?l="exact":o||(l="wall"),s||(s="iso8601"),s=Mt(s),u=!0;const v=x(t);a=Wn(v),c=Xr(v,"reject"),I(v),n={year:p,month:w,day:y}}let h=0;return l==="option"&&(h=gn(o)),ct(Wr(n,r,l,h,i,a,c,u),i,s)}function $s(e,t,n){Xe(t),ge(e),N(e,A,t),N(e,M,n),N(e,Bo,!0)}function bt(e,t){const n=rt("%Temporal.PlainDate%"),r=Object.create(n.prototype);return $s(r,e,t),r}function As(e,t,n){We(t),ge(e),N(e,q,t),N(e,M,n)}function jt(e,t){const n=rt("%Temporal.PlainDateTime%"),r=Object.create(n.prototype);return As(r,e,t),r}function ks(e,t,n){Xe(t),ge(e),N(e,A,t),N(e,M,n),N(e,ts,!0)}function fn(e,t){const n=rt("%Temporal.PlainMonthDay%"),r=Object.create(n.prototype);return ks(r,e,t),r}function Ns(e,t){ge(e),N(e,X,t)}function _e(e){const t=rt("%Temporal.PlainTime%"),n=Object.create(t.prototype);return Ns(n,e),n}function Rs(e,t,n){eo(t),ge(e),N(e,A,t),N(e,M,n),N(e,Jo,!0)}function mn(e,t){const n=rt("%Temporal.PlainYearMonth%"),r=Object.create(n.prototype);return Rs(r,e,t),r}function Ls(e,t){oe(t),ge(e),N(e,$,t)}function re(e){const t=rt("%Temporal.Instant%"),n=Object.create(t.prototype);return Ls(n,e),n}function Os(e,t,n,r){oe(t),ge(e),N(e,$,t),N(e,S,n),N(e,M,r)}function ct(e,t,n="iso8601"){const r=rt("%Temporal.ZonedDateTime%"),i=Object.create(r.prototype);return Os(i,e,t,n),i}function Ys(e){return Fi.filter((t=>e[t]!==void 0))}function Ue(e,t,n){const r=Ys(n),i=Re(e).fieldKeysToIgnore(r),o=Object.create(null),s=Ys(t);for(let a=0;a<Fi.length;a++){let c;const u=Fi[a];s.includes(u)&&!i.includes(u)&&(c=t[u]),r.includes(u)&&(c=n[u]),c!==void 0&&(o[u]=c)}return o}function Pt(e,t,n,r){const i=Re(e).dateAdd(t,n,r);return Xe(i),i}function ir(e,t,n,r){return Re(e).dateUntil(t,n,r)}function or(e){if(W(e)&&wt(e,M))return m(e,M);const t=J(e);try{return Mt(t)}catch{}let n;try{({calendar:n}=ee(t))}catch{try{({calendar:n}=_s(t))}catch{try{({calendar:n}=Hi(t))}catch{({calendar:n}=Zi(t))}}}return n||(n="iso8601"),Mt(n)}function sr(e){if(wt(e,M))return m(e,M);const{calendar:t}=e;return t===void 0?"iso8601":or(t)}function ie(e,t){return Mt(e)===Mt(t)}function Oe(e,t,n){const r=Re(e);r.resolveFields(t,"date");const i=r.dateToISO(t,n);return Xe(i),i}function ar(e,t,n){const r=Re(e);r.resolveFields(t,"year-month"),t.day=1;const i=r.dateToISO(t,n);return eo(i),i}function Gr(e,t,n){const r=Re(e);r.resolveFields(t,"month-day");const i=r.monthDayToISOReferenceDate(t,n);return Xe(i),i}function _t(e){if(W(e)&&O(e))return m(e,S);const t=J(e);if(t==="UTC")return"UTC";const{tzName:n,offsetMinutes:r}=(function(o){const{tzAnnotation:s,offset:a,z:c}=(function(u){if(Ts.test(u))return{tzAnnotation:u,offset:void 0,z:!1};try{const{tzAnnotation:l,offset:h,z:d}=ee(u);if(d||l||h)return{tzAnnotation:l,offset:h,z:d}}catch{}Es(u)})(o);return s?Ne(s):c?Ne("UTC"):a?Ne(a):void 0})(t);if(r!==void 0)return Vi(r);const i=Qr(n);if(!i)throw new RangeError(`Unrecognized time zone ${n}`);return i.identifier}function Is(e,t){if(e===t)return!0;const n=Ne(e).offsetMinutes,r=Ne(t).offsetMinutes;if(n===void 0&&r===void 0){const i=Qr(t);if(!i)return!1;const o=Qr(e);return!!o&&o.primaryIdentifier===i.primaryIdentifier}return n===r}function Te(e,t){const n=Ne(e).offsetMinutes;return n!==void 0?6e10*n:Gi(e,t)}function Wi(e){const t=e<0?"-":"+",n=Math.abs(e),r=Math.floor(n/36e11),i=Math.floor(n/6e10)%60,o=Math.floor(n/1e9)%60,s=n%1e9;return`${t}${Vr(r,i,o,s,o===0&&s===0?"minute":"auto")}`}function Ut(e,t){const n=Te(e,t);let{isoDate:{year:r,month:i,day:o},time:{hour:s,minute:a,second:c,millisecond:u,microsecond:l,nanosecond:h}}=Ws(t);return dr(r,i,o,s,a,c,u,l,h+n)}function ut(e,t,n){return Ps(cr(e,t),e,t,n)}function Ps(e,t,n,r){const i=e.length;if(i===1)return e[0];if(i)switch(r){case"compatible":case"earlier":return e[0];case"later":return e[i-1];case"reject":throw new RangeError("multiple instants found")}if(r==="reject")throw new RangeError("multiple instants found");const o=st(n),s=f.subtract(o,Ae);oe(s);const a=Te(t,s),c=f.add(o,Ae);oe(c);const u=Te(t,c)-a;switch(r){case"earlier":{const l=L.fromComponents(0,0,0,0,0,-u),h=vn(n.time,l);return cr(t,P(kt(n.isoDate.year,n.isoDate.month,n.isoDate.day+h.deltaDays),h))[0]}case"compatible":case"later":{const l=L.fromComponents(0,0,0,0,0,u),h=vn(n.time,l),d=cr(t,P(kt(n.isoDate.year,n.isoDate.month,n.isoDate.day+h.deltaDays),h));return d[d.length-1]}}}function cr(e,t){if(e==="UTC")return yn(t.isoDate),[st(t)];const n=Ne(e).offsetMinutes;if(n!==void 0){const r=dr(t.isoDate.year,t.isoDate.month,t.isoDate.day,t.time.hour,t.time.minute-n,t.time.second,t.time.millisecond,t.time.microsecond,t.time.nanosecond);yn(r.isoDate);const i=st(r);return oe(i),[i]}return yn(t.isoDate),(function(r,i){let o=st(i),s=f.subtract(o,Ae);f.lessThan(s,Un)&&(s=o);let a=f.add(o,Ae);f.greaterThan(a,an)&&(a=o);const c=Gi(r,s),u=Gi(r,a);return(c===u?[c]:[c,u]).map((h=>{const d=f.subtract(o,f.BigInt(h)),g=(function(p,w){const{epochMilliseconds:y,time:{millisecond:v,microsecond:_,nanosecond:T}}=Ws(w),{year:D,month:E,day:R,hour:H,minute:U,second:j}=Gs(p,y);return dr(D,E,R,H,U,j,v,_,T)})(r,d);if(bn(i,g)===0)return oe(d),d})).filter((h=>h!==void 0))})(e,t)}function Ye(e,t){const n=P(t,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),r=cr(e,n);if(r.length)return r[0];const i=st(n),o=f.subtract(i,Ae);return oe(o),Qi(e,o)}function ur(e){let t;return t=e<0||e>9999?(e<0?"-":"+")+Hn(Math.abs(e),6):Hn(e,4),t}function St(e){return Hn(e,2)}function Ss(e,t){let n;if(t==="auto"){if(e===0)return"";n=Hn(e,9).replace(/0+$/,"")}else{if(t===0)return"";n=Hn(e,9).slice(0,t)}return`.${n}`}function Vr(e,t,n,r,i){let o=`${St(e)}:${St(t)}`;return i==="minute"||(o+=`:${St(n)}`,o+=Ss(r,i)),o}function zs(e,t,n){let r=t;r===void 0&&(r="UTC");const i=m(e,$),o=lr(Ut(r,i),"iso8601",n,"never");let s="Z";return t!==void 0&&(s=Xs(Te(r,i))),`${o}${s}`}function Kr(e,t){const n=m(e,lt),r=m(e,ht),i=m(e,Ct),o=m(e,dt),s=m(e,ft),a=m(e,mt),c=Jr(e);let u="";n!==0&&(u+=`${Math.abs(n)}Y`),r!==0&&(u+=`${Math.abs(r)}M`),i!==0&&(u+=`${Math.abs(i)}W`),o!==0&&(u+=`${Math.abs(o)}D`);let l="";s!==0&&(l+=`${Math.abs(s)}H`),a!==0&&(l+=`${Math.abs(a)}M`);const h=L.fromComponents(0,0,m(e,gt),m(e,pt),m(e,yt),m(e,$t));h.isZero()&&!["second","millisecond","microsecond","nanosecond"].includes(we(e))&&t==="auto"||(l+=`${Math.abs(h.sec)}${Ss(Math.abs(h.subsec),t)}S`);let d=`${c<0?"-":""}P${u}`;return l&&(d=`${d}T${l}`),d}function js(e,t="auto"){const{year:n,month:r,day:i}=m(e,A);return`${ur(n)}-${St(r)}-${St(i)}${qn(m(e,M),t)}`}function Us({hour:e,minute:t,second:n,millisecond:r,microsecond:i,nanosecond:o},s){return Vr(e,t,n,1e6*r+1e3*i+o,s)}function lr(e,t,n,r="auto"){const{isoDate:{year:i,month:o,day:s},time:{hour:a,minute:c,second:u,millisecond:l,microsecond:h,nanosecond:d}}=e;return`${ur(i)}-${St(o)}-${St(s)}T${Vr(a,c,u,1e6*l+1e3*h+d,n)}${qn(t,r)}`}function Fs(e,t="auto"){const{year:n,month:r,day:i}=m(e,A);let o=`${St(r)}-${St(i)}`;const s=m(e,M);t!=="always"&&t!=="critical"&&s==="iso8601"||(o=`${ur(n)}-${o}`);const a=qn(s,t);return a&&(o+=a),o}function Hs(e,t="auto"){const{year:n,month:r,day:i}=m(e,A);let o=`${ur(n)}-${St(r)}`;const s=m(e,M);t!=="always"&&t!=="critical"&&s==="iso8601"||(o+=`-${St(i)}`);const a=qn(s,t);return a&&(o+=a),o}function Zs(e,t,n="auto",r="auto",i="auto",o=void 0){let s=m(e,$);if(o){const{unit:l,increment:h,roundingMode:d}=o;s=oo(s,h,l,d)}const a=m(e,S),c=Te(a,s);let u=lr(Ut(a,s),"iso8601",t,"never");return i!=="never"&&(u+=Xs(c)),r!=="never"&&(u+=`[${r==="critical"?"!":""}${a}]`),u+=qn(m(e,M),n),u}function qs(e){return Ms.test(e)}function gn(e){const t=mu.exec(e);if(!t)throw new RangeError(`invalid time zone offset: ${e}; must match HH:MM[:SS.SSSSSSSSS]`);return(t[1]==="-"?-1:1)*(1e9*(60*(60*+t[2]+ +(t[3]||0))+ +(t[4]||0))+ +((t[5]||0)+"000000000").slice(0,9))}let hr;const du=Object.assign(Object.create(null),{"/":!0,"-":!0,_:!0});function Qr(e){if(hr===void 0){const o=Intl.supportedValuesOf?.("timeZone");if(o){hr=new Map;for(let s=0;s<o.length;s++){const a=o[s];hr.set(pr(a),a)}}else hr=null}const t=pr(e);let n=hr?.get(t);if(n)return{identifier:n,primaryIdentifier:n};try{n=bs(e).resolvedOptions().timeZone}catch{return}if(t==="antarctica/south_pole"&&(n="Antarctica/McMurdo"),au.has(e))throw new RangeError(`${e} is a legacy time zone identifier from ICU. Use ${n} instead`);const r=[...t].map(((o,s)=>s===0||du[t[s-1]]?o.toUpperCase():o)).join("").split("/");if(r.length===1)return t==="gb-eire"?{identifier:"GB-Eire",primaryIdentifier:n}:{identifier:t.length<=3||/[-0-9]/.test(t)?t.toUpperCase():r[0],primaryIdentifier:n};if(r[0]==="Etc")return{identifier:`Etc/${["Zulu","Greenwich","Universal"].includes(r[1])?r[1]:r[1].toUpperCase()}`,primaryIdentifier:n};if(r[0]==="Us")return{identifier:`US/${r[1]}`,primaryIdentifier:n};const i=new Map([["Act","ACT"],["Lhi","LHI"],["Nsw","NSW"],["Dar_Es_Salaam","Dar_es_Salaam"],["Port_Of_Spain","Port_of_Spain"],["Port-Au-Prince","Port-au-Prince"],["Isle_Of_Man","Isle_of_Man"],["Comodrivadavia","ComodRivadavia"],["Knox_In","Knox_IN"],["Dumontdurville","DumontDUrville"],["Mcmurdo","McMurdo"],["Denoronha","DeNoronha"],["Easterisland","EasterIsland"],["Bajanorte","BajaNorte"],["Bajasur","BajaSur"]]);return r[1]=i.get(r[1])??r[1],r.length>2&&(r[2]=i.get(r[2])??r[2]),{identifier:r.join("/"),primaryIdentifier:n}}function Fe(e,t){const{year:n,month:r,day:i,hour:o,minute:s,second:a}=Gs(e,t);let c=t%1e3;return c<0&&(c+=1e3),1e6*(Ki({isoDate:{year:n,month:r,day:i},time:{hour:o,minute:s,second:a,millisecond:c}})-t)}function Gi(e,t){return Fe(e,Ht(t,"floor"))}function Vi(e){const t=e<0?"-":"+",n=Math.abs(e);return`${t}${Vr(Math.floor(n/60),n%60,0,0,"minute")}`}function Xs(e){return Vi(Pe(e,nu,"halfExpand")/6e10)}function Ki({isoDate:{year:e,month:t,day:n},time:{hour:r,minute:i,second:o,millisecond:s}}){const a=e%400,c=(e-a)/400,u=new Date;return u.setUTCHours(r,i,o,s),u.setUTCFullYear(a,t-1,n),u.getTime()+ou*c}function st(e){const t=Ki(e),n=1e3*e.time.microsecond+e.time.nanosecond;return f.add(ce(t),f.BigInt(n))}function Ws(e){let t=Ht(e,"trunc"),n=f.toNumber(f.remainder(e,In));n<0&&(n+=1e6,t-=1);const r=Math.floor(n/1e3)%1e3,i=n%1e3,o=new Date(t);return{epochMilliseconds:t,isoDate:{year:o.getUTCFullYear(),month:o.getUTCMonth()+1,day:o.getUTCDate()},time:{hour:o.getUTCHours(),minute:o.getUTCMinutes(),second:o.getUTCSeconds(),millisecond:o.getUTCMilliseconds(),microsecond:r,nanosecond:i}}}function Qi(e,t){if(e==="UTC")return null;const n=Ht(t,"floor");if(n<Fn)return Qi(e,ce(Fn));const r=Date.now(),i=Math.max(n,r)+366*ke*3;let o=n,s=Fe(e,o),a=o,c=s;for(;s===c&&o<i;){if(a=o+2*ke*7,a>ms)return null;c=Fe(e,a),s===c&&(o=a)}return s===c?null:ce(va((u=>Fe(e,u)),o,a,s,c))}function Bi(e,t){if(e==="UTC")return null;const n=Ht(t,"ceil"),r=Date.now(),i=r+366*ke*3;if(n>i){const u=Bi(e,ce(i));if(u===null||f.lessThan(u,ce(r)))return u}if(e==="Africa/Casablanca"||e==="Africa/El_Aaiun"){const u=Date.UTC(2088,0,1);if(u<n)return Bi(e,ce(u))}let o=n-1;if(o<Fn)return null;let s=Fe(e,o),a=o,c=s;for(;s===c&&o>Fn;){if(a=o-2*ke*7,a<Fn)return null;c=Fe(e,a),s===c&&(o=a)}return s===c?null:ce(va((u=>Fe(e,u)),a,o,c,s))}function Gs(e,t){return(function(n){const r=n.split(/[^\w]+/);if(r.length!==7)throw new RangeError(`expected 7 parts in "${n}`);const i=+r[0],o=+r[1];let s=+r[2];const a=r[3];if(a[0]==="b"||a[0]==="B")s=1-s;else if(a[0]!=="a"&&a[0]!=="A")throw new RangeError(`Unknown era ${a} in "${n}`);const c=r[4]==="24"?0:+r[4],u=+r[5],l=+r[6];if(!(Number.isFinite(s)&&Number.isFinite(i)&&Number.isFinite(o)&&Number.isFinite(c)&&Number.isFinite(u)&&Number.isFinite(l)))throw new RangeError(`Invalid number in "${n}`);return{year:s,month:i,day:o,hour:c,minute:u,second:l}})(bs(e).format(t))}function Br(e){return e!==void 0&&!(e%4!=0||e%100==0&&e%400!=0)}function He(e,t){return{standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]}[Br(e)?"leapyear":"standard"][t-1]}function Jr(e){const t=[m(e,lt),m(e,ht),m(e,Ct),m(e,dt),m(e,ft),m(e,mt),m(e,gt),m(e,pt),m(e,yt),m(e,$t)];for(let n=0;n<t.length;n++){const r=t[n];if(r!==0)return r<0?-1:1}return 0}function ti(e){const t=["years","months","weeks","days"];for(let n=0;n<t.length;n++){const r=e[t[n]];if(r!==0)return r<0?-1:1}return 0}function Vs(e){const t=ti(e.date);return t!==0?t:e.time.sign()}function Ze(e,t){let n=e,r=t;if(!Number.isFinite(n)||!Number.isFinite(r))throw new RangeError("infinity is out of range");return r-=1,n+=Math.floor(r/12),r%=12,r<0&&(r+=12),r+=1,{year:n,month:r}}function kt(e,t,n){let r=e,i=t,o=n;if(!Number.isFinite(o))throw new RangeError("infinity is out of range");({year:r,month:i}=Ze(r,i));const s=146097;if(Math.abs(o)>s){const u=Math.trunc(o/s);r+=400*u,o-=u*s}let a=0,c=i>2?r:r-1;for(;a=Br(c)?366:365,o<-a;)r-=1,c-=1,o+=a;for(c+=1;a=Br(c)?366:365,o>a;)r+=1,c+=1,o-=a;for(;o<1;)({year:r,month:i}=Ze(r,i-1)),o+=He(r,i);for(;o>He(r,i);)o-=He(r,i),{year:r,month:i}=Ze(r,i+1);return{year:r,month:i,day:o}}function dr(e,t,n,r,i,o,s,a,c){const u=Ie(r,i,o,s,a,c);return P(kt(e,t,n+u.deltaDays),u)}function Ie(e,t,n,r,i,o){let s,a=e,c=t,u=n,l=r,h=i,d=o;({div:s,mod:d}=on(d,3)),h+=s,d<0&&(h-=1,d+=1e3),{div:s,mod:h}=on(h,3),l+=s,h<0&&(l-=1,h+=1e3),u+=Math.trunc(l/1e3),l%=1e3,l<0&&(u-=1,l+=1e3),c+=Math.trunc(u/60),u%=60,u<0&&(c-=1,u+=60),a+=Math.trunc(c/60),c%=60,c<0&&(a-=1,c+=60);let g=Math.trunc(a/24);return a%=24,a<0&&(g-=1,a+=24),g+=0,a+=0,c+=0,u+=0,l+=0,h+=0,d+=0,{deltaDays:g,hour:a,minute:c,second:u,millisecond:l,microsecond:h,nanosecond:d}}function Ks(e,t){const n=at(e,0);if(ti(n)===0)return e.days;const r=m(t,A),i=Pt(m(t,M),r,n,"constrain"),o=Ge(r.year,r.month-1,r.day),s=Ge(i.year,i.month-1,i.day)-o;return e.days+s}function Nt(e){return new(rt("%Temporal.Duration%"))(-m(e,lt),-m(e,ht),-m(e,Ct),-m(e,dt),-m(e,ft),-m(e,mt),-m(e,gt),-m(e,pt),-m(e,yt),-m(e,$t))}function Tt(e,t,n){return Math.min(n,Math.max(t,e))}function Qs(e,t,n){const r=Tt(t,1,12);return{year:e,month:r,day:Tt(n,1,He(e,r))}}function et(e,t,n){if(e<t||e>n)throw new RangeError(`value out of range: ${t} <= ${e} <= ${n}`)}function qe(e,t,n){et(t,1,12),et(n,1,He(e,t))}function Xe(e){We(P(e,{deltaDays:0,hour:12,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}))}function ei(e,t,n,r,i,o){et(e,0,23),et(t,0,59),et(n,0,59),et(r,0,999),et(i,0,999),et(o,0,999)}function Ji(e,t,n,r,i,o,s,a,c){qe(e,t,n),ei(r,i,o,s,a,c)}function We(e){const t=st(e);(f.lessThan(t,ru)||f.greaterThan(t,iu))&&oe(t)}function to(e){st(e)}function oe(e){if(f.lessThan(e,Un)||f.greaterThan(e,an))throw new RangeError("date/time value is outside of supported range")}function eo({year:e,month:t}){et(e,gs,ps),e===gs?et(t,4,12):e===ps&&et(t,1,9)}function ni(e,t,n,r,i,o,s,a,c,u){let l=0;const h=[e,t,n,r,i,o,s,a,c,u];for(let v=0;v<h.length;v++){const _=h[v];if(_===1/0||_===-1/0)throw new RangeError("infinite values not allowed as duration fields");if(_!==0){const T=_<0?-1:1;if(l!==0&&T!==l)throw new RangeError("mixed-sign values not allowed as duration fields");l=T}}if(Math.abs(e)>=2**32||Math.abs(t)>=2**32||Math.abs(n)>=2**32)throw new RangeError("years, months, and weeks must be < 2");const d=on(a,3),g=on(c,6),p=on(u,9),w=on(1e6*d.mod+1e3*g.mod+p.mod,9).div,y=86400*r+3600*i+60*o+s+d.div+g.div+p.div+w;if(!Number.isSafeInteger(y))throw new RangeError("total of duration time units cannot exceed 9007199254740991.999999999 s")}function pn(e){return{date:{years:m(e,lt),months:m(e,ht),weeks:m(e,Ct),days:m(e,dt)},time:L.fromComponents(m(e,ft),m(e,mt),m(e,gt),m(e,pt),m(e,yt),m(e,$t))}}function se(e){const t=L.fromComponents(m(e,ft),m(e,mt),m(e,gt),m(e,pt),m(e,yt),m(e,$t)).add24HourDays(m(e,dt));return{date:{years:m(e,lt),months:m(e,ht),weeks:m(e,Ct),days:0},time:t}}function Bs(e){const t=se(e),n=Math.trunc(t.time.sec/86400);return ni(t.date.years,t.date.months,t.date.weeks,n,0,0,0,0,0,0),{...t.date,days:n}}function Ft(e,t){const n=e.time.sign();let r=e.time.abs().subsec,i=0,o=0,s=e.time.abs().sec,a=0,c=0,u=0;switch(t){case"year":case"month":case"week":case"day":i=Math.trunc(r/1e3),r%=1e3,o=Math.trunc(i/1e3),i%=1e3,s+=Math.trunc(o/1e3),o%=1e3,a=Math.trunc(s/60),s%=60,c=Math.trunc(a/60),a%=60,u=Math.trunc(c/24),c%=24;break;case"hour":i=Math.trunc(r/1e3),r%=1e3,o=Math.trunc(i/1e3),i%=1e3,s+=Math.trunc(o/1e3),o%=1e3,a=Math.trunc(s/60),s%=60,c=Math.trunc(a/60),a%=60;break;case"minute":i=Math.trunc(r/1e3),r%=1e3,o=Math.trunc(i/1e3),i%=1e3,s+=Math.trunc(o/1e3),o%=1e3,a=Math.trunc(s/60),s%=60;break;case"second":i=Math.trunc(r/1e3),r%=1e3,o=Math.trunc(i/1e3),i%=1e3,s+=Math.trunc(o/1e3),o%=1e3;break;case"millisecond":i=Math.trunc(r/1e3),r%=1e3,o=Si(s,3,Math.trunc(i/1e3)),i%=1e3,s=0;break;case"microsecond":i=Si(s,6,Math.trunc(r/1e3)),r%=1e3,s=0;break;case"nanosecond":r=Si(s,9,r),s=0}return new(rt("%Temporal.Duration%"))(e.date.years,e.date.months,e.date.weeks,e.date.days+n*u,n*c,n*a,n*s,n*o,n*i,n*r)}function Me(e,t){return ti(e),t.sign(),{date:e,time:t}}function Ge(e,t,n){return Ki({isoDate:{year:e,month:t+1,day:n},time:{hour:0,minute:0,second:0,millisecond:0}})/ke}function yn({year:e,month:t,day:n}){if(Math.abs(Ge(e,t-1,n))>1e8)throw new RangeError("date/time value is outside the supported range")}function no(e,t){const n=t.hour-e.hour,r=t.minute-e.minute,i=t.second-e.second,o=t.millisecond-e.millisecond,s=t.microsecond-e.microsecond,a=t.nanosecond-e.nanosecond;return L.fromComponents(n,r,i,o,s,a)}function ro(e,t,n,r,i){let o=L.fromEpochNsDiff(t,e);return o=ii(o,n,r,i),Me({years:0,months:0,weeks:0,days:0},o)}function Js(e,t,n,r){to(e),to(t);let i=no(e.time,t.time);const o=i.sign(),s=ae(e.isoDate,t.isoDate);let a=t.isoDate;s===o&&(a=kt(a.year,a.month,a.day+o),i=i.add24HourDays(-o));const c=ve("day",r),u=ir(n,e.isoDate,a,c);return r!==c&&(i=i.add24HourDays(u.days),u.days=0),Me(u,i)}function ta(e,t,n,r,i){const o=f.subtract(t,e);if(f.equal(o,Ot))return{date:{years:0,months:0,weeks:0,days:0},time:L.ZERO};const s=f.lessThan(o,Ot)?-1:1,a=Ut(n,e),c=Ut(n,t);let u,l=0,h=s===1?2:1,d=no(a.time,c.time);for(d.sign()===-s&&l++;l<=h;l++){u=P(kt(c.isoDate.year,c.isoDate.month,c.isoDate.day-l*s),a.time);const p=ut(n,u,"compatible");if(d=L.fromEpochNsDiff(t,p),d.sign()!==-s)break}const g=ve("day",i);return Me(ir(r,a.isoDate,u.isoDate,g),d)}function ea(e,t,n,r,i,o,s,a,c){let u,l,h,d,g=t;switch(a){case"year":{const Y=Pe(g.date.years,s,"trunc");u=Y,l=Y+s*e,h={years:u,months:0,weeks:0,days:0},d={...h,years:l};break}case"month":{const Y=Pe(g.date.months,s,"trunc");u=Y,l=Y+s*e,h=at(g.date,0,0,u),d=at(g.date,0,0,l);break}case"week":{const Y=at(g.date,0,0),z=Pt(o,r.isoDate,Y,"constrain"),B=ir(o,z,kt(z.year,z.month,z.day+g.date.days),"week"),Qt=Pe(g.date.weeks+B.weeks,s,"trunc");u=Qt,l=Qt+s*e,h=at(g.date,0,u),d=at(g.date,0,l);break}case"day":{const Y=Pe(g.date.days,s,"trunc");u=Y,l=Y+s*e,h=at(g.date,u),d=at(g.date,l);break}}const p=Pt(o,r.isoDate,h,"constrain"),w=Pt(o,r.isoDate,d,"constrain");let y,v;const _=P(p,r.time),T=P(w,r.time);i?(y=ut(i,_,"compatible"),v=ut(i,T,"compatible")):(y=st(_),v=st(T));const D=L.fromEpochNsDiff(n,y),E=L.fromEpochNsDiff(v,y),R=Pr(c,e<0?"negative":"positive"),H=D.add(D).abs().subtract(E.abs()).sign(),U=Math.abs(u)/s%2==0,j=D.isZero()?Math.abs(u):D.cmp(E)?Sr(Math.abs(u),Math.abs(l),H,U,R):Math.abs(l),Z=new L(f.add(f.multiply(E.totalNs,f.BigInt(u)),f.multiply(D.totalNs,f.BigInt(s*e)))).fdiv(E.totalNs),C=j===Math.abs(l);return g={date:C?d:h,time:L.ZERO},{nudgeResult:{duration:g,nudgedEpochNs:C?v:y,didExpandCalendarUnit:C},total:Z}}function ri(e,t,n,r,i,o,s,a,c){let u=e;const l=ne(a)||r&&a==="day",h=Vs(u)<0?-1:1;let d;return l?{nudgeResult:d}=ea(h,u,t,n,r,i,s,a,c):d=r?(function(g,p,w,y,v,_,T,D){let E=p;const R=Pt(v,w.isoDate,E.date,"constrain"),H=P(R,w.time),U=P(kt(R.year,R.month,R.day+g),w.time),j=ut(y,H,"compatible"),Z=ut(y,U,"compatible"),C=L.fromEpochNsDiff(Z,j);if(C.sign()!==g)throw new RangeError("time zone returned inconsistent Instants");const Y=f.BigInt(un[T]*_);let z=E.time.round(Y,D);const B=z.subtract(C),Qt=B.sign()!==-g;let Bt,Jt;return Qt?(Bt=g,z=B.round(Y,D),Jt=z.addToEpochNs(Z)):(Bt=0,Jt=z.addToEpochNs(j)),{duration:Me(at(E.date,E.date.days+Bt),z),nudgedEpochNs:Jt,didExpandCalendarUnit:Qt}})(h,u,n,r,i,s,a,c):(function(g,p,w,y,v,_){let T=g;const D=T.time.add24HourDays(T.date.days),E=D.round(f.BigInt(y*un[v]),_),R=E.subtract(D),{quotient:H}=D.divmod(jr),{quotient:U}=E.divmod(jr),j=Math.sign(U-H)===D.sign(),Z=R.addToEpochNs(p);let C=0,Y=E;return be(w)==="date"&&(C=U,Y=E.add(L.fromComponents(24*-U,0,0,0,0,0))),{duration:{date:at(T.date,C),time:Y},nudgedEpochNs:Z,didExpandCalendarUnit:j}})(u,t,o,s,a,c),u=d.duration,d.didExpandCalendarUnit&&a!=="week"&&(u=(function(g,p,w,y,v,_,T,D){let E=p;if(D===T)return E;const R=Zn.indexOf(T);for(let H=Zn.indexOf(D)-1;H>=R;H--){const U=Zn[H];if(U==="week"&&T!=="week")continue;let j;switch(U){case"year":j={years:E.date.years+g,months:0,weeks:0,days:0};break;case"month":{const Y=E.date.months+g;j=at(E.date,0,0,Y);break}case"week":{const Y=E.date.weeks+g;j=at(E.date,0,Y);break}}const Z=P(Pt(_,y.isoDate,j,"constrain"),y.time);let C;if(C=v?ut(v,Z,"compatible"):st(Z),Yr(w,C)===-g)break;E={date:j,time:L.ZERO}}return E})(h,u,d.nudgedEpochNs,n,r,i,o,ve(a,"day"))),u}function na(e,t,n,r,i,o){return ne(o)||r&&o==="day"?ea(Vs(e)<0?-1:1,e,t,n,r,i,1,o,"trunc").total:mr(e.time.add24HourDays(e.date.days),o)}function ra(e,t,n,r,i,o,s){if(bn(e,t)==0)return{date:{years:0,months:0,weeks:0,days:0},time:L.ZERO};We(e),We(t);const a=Js(e,t,n,r);return o==="nanosecond"&&i===1?a:ri(a,st(t),e,null,n,r,i,o,s)}function ia(e,t,n,r,i,o,s,a){if(be(i)==="time")return ro(e,t,o,s,a);const c=ta(e,t,n,r,i);return s==="nanosecond"&&o===1?c:ri(c,t,Ut(n,e),n,r,i,o,s,a)}function wn(e,t,n,r,i,o){const s=cn.reduce(((g,p)=>{const w=p[0],y=p[1],v=p[2];return n!=="datetime"&&v!==n||r.includes(y)||g.push(y,w),g}),[]);let a=At(t,"largestUnit",n,"auto");if(r.includes(a))throw new RangeError(`largestUnit must be one of ${s.join(", ")}, not ${a}`);const c=hn(t);let u=Xt(t,"trunc");e==="since"&&(u=(function(g){switch(g){case"ceil":return"floor";case"floor":return"ceil";case"halfCeil":return"halfFloor";case"halfFloor":return"halfCeil";default:return g}})(u));const l=At(t,"smallestUnit",n,i);if(r.includes(l))throw new RangeError(`smallestUnit must be one of ${s.join(", ")}, not ${l}`);const h=ve(o,l);if(a==="auto"&&(a=h),ve(a,l)!==a)throw new RangeError(`largestUnit ${a} cannot be smaller than smallestUnit ${l}`);const d={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[l];return d!==void 0&&dn(c,d,!1),{largestUnit:a,roundingIncrement:c,roundingMode:u,smallestUnit:l}}function oa(e,t,n,r){const i=er(n),o=wn(e,x(r),"time",[],"nanosecond","second");let s=Ft(ro(m(t,$),m(i,$),o.roundingIncrement,o.smallestUnit,o.roundingMode),o.largestUnit);return e==="since"&&(s=Nt(s)),s}function sa(e,t,n,r){const i=Bn(n),o=m(t,M),s=m(i,M);if(!ie(o,s))throw new RangeError(`cannot compute difference between dates of ${o} and ${s} calendars`);const a=wn(e,x(r),"date",[],"day","day"),c=rt("%Temporal.Duration%"),u=m(t,A),l=m(i,A);if(ae(u,l)===0)return new c;let h={date:ir(o,u,l,a.largestUnit),time:L.ZERO};if(a.smallestUnit!=="day"||a.roundingIncrement!==1){const g=P(u,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});h=ri(h,st(P(l,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0})),g,null,o,a.largestUnit,a.roundingIncrement,a.smallestUnit,a.roundingMode)}let d=Ft(h,"day");return e==="since"&&(d=Nt(d)),d}function aa(e,t,n,r){const i=tr(n),o=m(t,M),s=m(i,M);if(!ie(o,s))throw new RangeError(`cannot compute difference between dates of ${o} and ${s} calendars`);const a=wn(e,x(r),"datetime",[],"nanosecond","day"),c=rt("%Temporal.Duration%"),u=m(t,q),l=m(i,q);if(bn(u,l)===0)return new c;let h=Ft(ra(u,l,o,a.largestUnit,a.roundingIncrement,a.smallestUnit,a.roundingMode),a.largestUnit);return e==="since"&&(h=Nt(h)),h}function ca(e,t,n,r){const i=Le(n),o=wn(e,x(r),"time",[],"nanosecond","hour");let s=no(m(t,X),m(i,X));s=ii(s,o.roundingIncrement,o.smallestUnit,o.roundingMode);let a=Ft(Me({years:0,months:0,weeks:0,days:0},s),o.largestUnit);return e==="since"&&(a=Nt(a)),a}function ua(e,t,n,r){const i=nr(n),o=m(t,M),s=m(i,M);if(!ie(o,s))throw new RangeError(`cannot compute difference between months of ${o} and ${s} calendars`);const a=wn(e,x(r),"date",["week","day"],"month","year"),c=rt("%Temporal.Duration%");if(ae(m(t,A),m(i,A))==0)return new c;const u=vt(o,m(t,A),"year-month");u.day=1;const l=Oe(o,u,"constrain"),h=vt(o,m(i,A),"year-month");h.day=1;const d=Oe(o,h,"constrain");let g={date:at(ir(o,l,d,a.largestUnit),0,0),time:L.ZERO};if(a.smallestUnit!=="month"||a.roundingIncrement!==1){const w=P(l,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});g=ri(g,st(P(d,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0})),w,null,o,a.largestUnit,a.roundingIncrement,a.smallestUnit,a.roundingMode)}let p=Ft(g,"day");return e==="since"&&(p=Nt(p)),p}function la(e,t,n,r){const i=rr(n),o=m(t,M),s=m(i,M);if(!ie(o,s))throw new RangeError(`cannot compute difference between dates of ${o} and ${s} calendars`);const a=wn(e,x(r),"datetime",[],"nanosecond","hour"),c=m(t,$),u=m(i,$),l=rt("%Temporal.Duration%");let h;if(be(a.largestUnit)!=="date")h=Ft(ro(c,u,a.roundingIncrement,a.smallestUnit,a.roundingMode),a.largestUnit);else{const d=m(t,S);if(!Is(d,m(i,S)))throw new RangeError("When calculating difference between time zones, largestUnit must be 'hours' or smaller because day lengths can vary between time zones due to DST or time zone offset changes.");if(f.equal(c,u))return new l;h=Ft(ia(c,u,d,o,a.largestUnit,a.roundingIncrement,a.smallestUnit,a.roundingMode),"hour")}return e==="since"&&(h=Nt(h)),h}function vn({hour:e,minute:t,second:n,millisecond:r,microsecond:i,nanosecond:o},s){let a=n,c=o;return a+=s.sec,c+=s.subsec,Ie(e,t,a,r,i,c)}function io(e,t){const n=t.addToEpochNs(e);return oe(n),n}function fr(e,t,n,r,i="constrain"){if(ti(r.date)===0)return io(e,r.time);const o=Ut(t,e);return io(ut(t,P(Pt(n,o.isoDate,r.date,i),o.time),"compatible"),r.time)}function ha(e,t,n){let r=zt(n);e==="subtract"&&(r=Nt(r));const i=ve(we(t),we(r));if(ne(i))throw new RangeError("For years, months, or weeks arithmetic, use date arithmetic relative to a starting point");const o=se(t),s=se(r);return Ft(Me({years:0,months:0,weeks:0,days:0},o.time.add(s.time)),i)}function da(e,t,n){let r=zt(n);e==="subtract"&&(r=Nt(r));const i=we(r);if(be(i)==="date")throw new RangeError(`Duration field ${i} not supported by Temporal.Instant. Try Temporal.ZonedDateTime instead.`);const o=se(r);return re(io(m(t,$),o.time))}function fa(e,t,n,r){const i=m(t,M);let o=zt(n);e==="subtract"&&(o=Nt(o));const s=Bs(o),a=I(x(r));return bt(Pt(i,m(t,A),s,a),i)}function ma(e,t,n,r){let i=zt(n);e==="subtract"&&(i=Nt(i));const o=I(x(r)),s=m(t,M),a=se(i),c=m(t,q),u=vn(c.time,a.time),l=at(a.date,u.deltaDays);return ni(l.years,l.months,l.weeks,l.days,0,0,0,0,0,0),jt(P(Pt(s,c.isoDate,l,o),u),s)}function ga(e,t,n){let r=zt(n);e==="subtract"&&(r=Nt(r));const i=se(r),{hour:o,minute:s,second:a,millisecond:c,microsecond:u,nanosecond:l}=vn(m(t,X),i.time);return _e(qr(o,s,a,c,u,l,"reject"))}function pa(e,t,n,r){let i=zt(n);e==="subtract"&&(i=Nt(i));const o=I(x(r)),s=Jr(i),a=m(t,M),c=vt(a,m(t,A),"year-month");c.day=1;let u=Oe(a,c,"constrain");if(s<0){const h=Pt(a,u,{months:1},"constrain");u=kt(h.year,h.month,h.day-1)}const l=Bs(i);return Xe(u),mn(ar(a,vt(a,Pt(a,u,l,o),"year-month"),o),a)}function ya(e,t,n,r){let i=zt(n);e==="subtract"&&(i=Nt(i));const o=I(x(r)),s=m(t,S),a=m(t,M),c=pn(i);return ct(fr(m(t,$),s,a,c,o),s,a)}function Pe(e,t,n){const r=Math.trunc(e/t),i=e%t,o=e<0?"negative":"positive",s=Math.abs(r),a=s+1,c=Rt(Math.abs(2*i)-t),u=s%2==0,l=Pr(n,o),h=i===0?s:Sr(s,a,c,u,l);return t*(o==="positive"?h:-h)}function oo(e,t,n,r){const i=un[n]*t;return(function(o,s,a){const c=me(o),u=me(s),l=f.divide(c,u),h=f.remainder(c,u),d=Pr(a,"positive");let g,p;f.lessThan(c,Ot)?(g=f.subtract(l,Yn),p=l):(g=l,p=f.add(l,Yn));const w=Yr(ze(f.multiply(h,Ni)),u)*(f.lessThan(c,Ot)?-1:1)+0,y=f.equal(h,Ot)?l:Sr(g,p,w,Vo(g),d);return f.multiply(y,u)})(e,f.BigInt(i),r)}function so(e,t,n,r){to(e);const{year:i,month:o,day:s}=e.isoDate,a=ao(e.time,t,n,r);return P(kt(i,o,s+a.deltaDays),a)}function ao({hour:e,minute:t,second:n,millisecond:r,microsecond:i,nanosecond:o},s,a,c){let u;switch(a){case"day":case"hour":u=1e3*(1e3*(1e3*(60*(60*e+t)+n)+r)+i)+o;break;case"minute":u=1e3*(1e3*(1e3*(60*t+n)+r)+i)+o;break;case"second":u=1e3*(1e3*(1e3*n+r)+i)+o;break;case"millisecond":u=1e3*(1e3*r+i)+o;break;case"microsecond":u=1e3*i+o;break;case"nanosecond":u=o}const l=un[a],h=Pe(u,l*s,c)/l;switch(a){case"day":return{deltaDays:h,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0};case"hour":return Ie(h,0,0,0,0,0);case"minute":return Ie(e,h,0,0,0,0);case"second":return Ie(e,t,h,0,0,0);case"millisecond":return Ie(e,t,n,h,0,0);case"microsecond":return Ie(e,t,n,r,h,0);case"nanosecond":return Ie(e,t,n,r,i,h);default:throw new Error(`Invalid unit ${a}`)}}function ii(e,t,n,r){const i=un[n];return e.round(f.BigInt(i*t),r)}function mr(e,t){const n=un[t];return e.fdiv(f.BigInt(n))}function ae(e,t){return e.year!==t.year?Rt(e.year-t.year):e.month!==t.month?Rt(e.month-t.month):e.day!==t.day?Rt(e.day-t.day):0}function co(e,t){return e.hour!==t.hour?Rt(e.hour-t.hour):e.minute!==t.minute?Rt(e.minute-t.minute):e.second!==t.second?Rt(e.second-t.second):e.millisecond!==t.millisecond?Rt(e.millisecond-t.millisecond):e.microsecond!==t.microsecond?Rt(e.microsecond-t.microsecond):e.nanosecond!==t.nanosecond?Rt(e.nanosecond-t.nanosecond):0}function bn(e,t){const n=ae(e.isoDate,t.isoDate);return n!==0?n:co(e.time,t.time)}function wa(e){const t=oi(e);return globalThis.BigInt!==void 0?globalThis.BigInt(t.toString(10)):t}function Ht(e,t){const n=me(e),{quotient:r,remainder:i}=Sn(n,In);let o=f.toNumber(r);return t==="floor"&&f.toNumber(i)<0&&(o-=1),t==="ceil"&&f.toNumber(i)>0&&(o+=1),o}function ce(e){if(!Number.isInteger(e))throw new RangeError("epoch milliseconds must be an integer");return f.multiply(f.BigInt(e),In)}function oi(e){let t=e;if(typeof e=="object"){const n=e[Symbol.toPrimitive];n&&typeof n=="function"&&(t=n.call(e,"number"))}if(typeof t=="number")throw new TypeError("cannot convert number to bigint");return typeof t=="bigint"?f.BigInt(t.toString(10)):f.BigInt(t)}const uo=(()=>{let e=f.BigInt(Date.now()%1e6);return()=>{const t=Date.now(),n=f.BigInt(t),r=f.add(ce(t),e);return e=f.remainder(n,In),f.greaterThan(r,an)?an:f.lessThan(r,Un)?Un:r}})();function gr(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}function Rt(e){return e<0?-1:e>0?1:e}function x(e){if(e===void 0)return Object.create(null);if(W(e)&&e!==null)return e;throw new TypeError("Options parameter must be an object, not "+(e===null?"null":typeof e))}function Ve(e,t){const n=Object.create(null);return n[e]=t,n}function Ee(e,t,n,r){let i=e[t];if(i!==void 0){if(i=Fr(i),!n.includes(i))throw new RangeError(`${t} must be one of ${n.join(", ")}, not ${i}`);return i}if(r===ye)throw new RangeError(`${t} option is required`);return r}function Mt(e){const t=pr(e);if(!su.includes(pr(t)))throw new RangeError(`invalid calendar identifier ${t}`);switch(t){case"ethiopic-amete-alem":return"ethioaa";case"islamicc":return"islamic-civil"}return t}function pr(e){let t="";for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t+=r>=65&&r<=90?String.fromCharCode(r+32):String.fromCharCode(r)}return t}function Se(e){throw new TypeError(`Do not use built-in arithmetic operators with Temporal objects. When comparing, use ${e==="PlainMonthDay"?"Temporal.PlainDate.compare(obj1.toPlainDate(year), obj2.toPlainDate(year))":`Temporal.${e}.compare(obj1, obj2)`}, not obj1 > obj2. When coercing to strings, use \`\${obj}\` or String(obj), not '' + obj. When coercing to numbers, use properties or methods of the object, not \`+obj\`. When concatenating with strings, use \`\${str}\${obj}\` or str.concat(obj), not str + obj. In React, coerce to a string before rendering a Temporal object.`)}const fu=new RegExp(`^${ds.source}$`),mu=new RegExp(`^${/([+-])([01][0-9]|2[0-3])(?::?([0-5][0-9])(?::?([0-5][0-9])(?:[.,](\d{1,9}))?)?)?/.source}$`);function va(e,t,n,r=e(t),i=e(n)){let o=t,s=n,a=r,c=i;for(;s-o>1;){let u=Math.trunc((o+s)/2);const l=e(u);l===a?(o=u,a=l):l===c&&(s=u,c=l)}return s}function ba(e){return[...e]}function _a(e,t){if(e!=="gregory"&&e!=="iso8601")return;const n=yr[e];let r=t.year;const{dayOfWeek:i,dayOfYear:o,daysInYear:s}=n.isoToDate(t,{dayOfWeek:!0,dayOfYear:!0,daysInYear:!0}),a=n.getFirstDayOfWeek(),c=n.getMinimalDaysInFirstWeek();let u=(i+7-a)%7,l=(i-o+7001-a)%7,h=Math.floor((o-1+l)/7);if(7-l>=c&&++h,h==0)h=(function(d,g,p,w){let y=(w-d-p+1)%7;y<0&&(y+=7);let v=Math.floor((p+y-1)/7);return 7-y>=g&&++v,v})(a,c,o+n.isoToDate(n.dateAdd(t,{years:-1},"constrain"),{daysInYear:!0}).daysInYear,i),r--;else if(o>=s-5){let d=(u+s-o)%7;d<0&&(d+=7),6-d>=c&&o+7-u>s&&(h=1,r++)}return{week:h,year:r}}function Ta(e,t,n,r,i){if(t!==i.year){if(e*(t-i.year)>0)return!0}else if(n!==i.month){if(e*(n-i.month)>0)return!0}else if(r!==i.day&&e*(r-i.day)>0)return!0;return!1}const yr={};function Ke(e){if(!e.startsWith("M"))throw new RangeError(`Invalid month code: ${e}.  Month codes must start with M.`);const t=+e.slice(1);if(Number.isNaN(t))throw new RangeError(`Invalid month code: ${e}`);return t}function ue(e,t=!1){return`M${`${e}`.padStart(2,"0")}${t?"L":""}`}function lo(e,t=void 0,n=12){let{month:r,monthCode:i}=e;if(i===void 0){if(r===void 0)throw new TypeError("Either month or monthCode are required");t==="reject"&&et(r,1,n),t==="constrain"&&(r=Tt(r,1,n)),i=ue(r)}else{const o=Ke(i);if(i!==ue(o))throw new RangeError(`Invalid month code: ${i}`);if(r!==void 0&&r!==o)throw new RangeError(`monthCode ${i} and month ${r} must match if both are present`);if(r=o,r<1||r>n)throw new RangeError(`Invalid monthCode: ${i}`)}return{...e,month:r,monthCode:i}}yr.iso8601={resolveFields(e,t){if((t==="date"||t==="year-month")&&e.year===void 0)throw new TypeError("year is required");if((t==="date"||t==="month-day")&&e.day===void 0)throw new TypeError("day is required");Object.assign(e,lo(e))},dateToISO:(e,t)=>Xn(e.year,e.month,e.day,t),monthDayToISOReferenceDate(e,t){const{month:n,day:r}=Xn(e.year??1972,e.month,e.day,t);return{month:n,day:r,year:1972}},extraFields:()=>[],fieldKeysToIgnore(e){const t=new Set;for(let n=0;n<e.length;n++){const r=e[n];t.add(r),r==="month"?t.add("monthCode"):r==="monthCode"&&t.add("month")}return ba(t)},dateAdd(e,{years:t=0,months:n=0,weeks:r=0,days:i=0},o){let{year:s,month:a,day:c}=e;return s+=t,a+=n,{year:s,month:a}=Ze(s,a),{year:s,month:a,day:c}=Xn(s,a,c,o),c+=i+7*r,kt(s,a,c)},dateUntil(e,t,n){const r=-ae(e,t);if(r===0)return{years:0,months:0,weeks:0,days:0};let i,o=0,s=0;if(n==="year"||n==="month"){let l=t.year-e.year;for(l!==0&&(l-=r);!Ta(r,e.year+l,e.month,e.day,t);)o=l,l+=r;let h=r;for(i=Ze(e.year+o,e.month+h);!Ta(r,i.year,i.month,e.day,t);)s=h,h+=r,i=Ze(i.year,i.month+r);n==="month"&&(s+=12*o,o=0)}i=Ze(e.year+o,e.month+s);const a=Qs(i.year,i.month,e.day);let c=0,u=Ge(t.year,t.month-1,t.day)-Ge(a.year,a.month-1,a.day);return n==="week"&&(c=Math.trunc(u/7),u%=7),{years:o,months:s,weeks:c,days:u}},isoToDate({year:e,month:t,day:n},r){const i={era:void 0,eraYear:void 0,year:e,month:t,day:n,daysInWeek:7,monthsInYear:12};if(r.monthCode&&(i.monthCode=ue(t)),r.dayOfWeek){const o=t+(t<3?10:-2),s=e-(t<3?1:0),a=Math.floor(s/100),c=s-100*a,u=(n+Math.floor(2.6*o-.2)+(c+Math.floor(c/4))+(Math.floor(a/4)-2*a))%7;i.dayOfWeek=u+(u<=0?7:0)}if(r.dayOfYear){let o=n;for(let s=t-1;s>0;s--)o+=He(e,s);i.dayOfYear=o}return r.weekOfYear&&(i.weekOfYear=_a("iso8601",{year:e,month:t,day:n})),r.daysInMonth&&(i.daysInMonth=He(e,t)),(r.daysInYear||r.inLeapYear)&&(i.inLeapYear=Br(e),i.daysInYear=i.inLeapYear?366:365),i},getFirstDayOfWeek:()=>1,getMinimalDaysInFirstWeek:()=>4};class nt{constructor(t){if(this.map=new Map,this.calls=0,this.hits=0,this.misses=0,t!==void 0){let n=0;for(const r of t.map.entries()){if(++n>nt.MAX_CACHE_ENTRIES)break;this.map.set(...r)}}}get(t){const n=this.map.get(t);return n&&(this.hits++,this.report()),this.calls++,n}set(t,n){this.map.set(t,n),this.misses++,this.report()}report(){}setObject(t){if(nt.objectMap.get(t))throw new RangeError("object already cached");nt.objectMap.set(t,this),this.report()}static getCacheForObject(t){let n=nt.objectMap.get(t);return n||(n=new nt,nt.objectMap.set(t,n)),n}}function Ma({isoYear:e,isoMonth:t,isoDay:n}){return`${ur(e)}-${St(t)}-${St(n)}T00:00Z`}function ho(e,t){return{years:e.year-t.year,months:e.month-t.month,days:e.day-t.day}}nt.objectMap=new WeakMap,nt.MAX_CACHE_ENTRIES=1e3;class Qe{constructor(){this.eras=[],this.hasEra=!1,this.erasBeginMidYear=!1}getFormatter(){return this.formatter===void 0&&(this.formatter=new Intl.DateTimeFormat(`en-US-u-ca-${this.id}`,{day:"numeric",month:"numeric",year:"numeric",era:"short",timeZone:"UTC"})),this.formatter}getCalendarParts(t){let n=this.getFormatter(),r=new Date(t);if(t==="-271821-04-19T00:00Z"){const i=n.resolvedOptions();n=new Intl.DateTimeFormat(i.locale,{...i,timeZone:"Etc/GMT+1"}),r=new Date("-271821-04-20T00:00Z")}try{return n.formatToParts(r)}catch{throw new RangeError(`Invalid ISO date: ${t}`)}}isoToCalendarDate(t,n){const{year:r,month:i,day:o}=t,s=JSON.stringify({func:"isoToCalendarDate",isoYear:r,isoMonth:i,isoDay:o,id:this.id}),a=n.get(s);if(a)return a;const c=Ma({isoYear:r,isoMonth:i,isoDay:o}),u=this.getCalendarParts(c),l={};for(let d=0;d<u.length;d++){const{type:g,value:p}=u[d];if(g!=="year"&&g!=="relatedYear"||(this.hasEra?l.eraYear=+p:l.year=+p),g==="month"){const w=/^([0-9]*)(.*?)$/.exec(p);if(!w||w.length!=3||!w[1]&&!w[2])throw new RangeError(`Unexpected month: ${p}`);if(l.month=w[1]?+w[1]:1,l.month<1)throw new RangeError(`Invalid month ${p} from ${c}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10527)`);if(l.month>13)throw new RangeError(`Invalid month ${p} from ${c}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10529)`);w[2]&&(l.monthExtra=w[2])}g==="day"&&(l.day=+p),this.hasEra&&g==="era"&&p!=null&&p!==""&&(l.era=p.split(" (")[0].normalize("NFD").replace(/[^-0-9 \p{L}]/gu,"").replace(/ /g,"-").toLowerCase())}if(this.hasEra&&l.eraYear===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);if(this.hasEra){const d=this.eras.find((g=>l.era===g.genericName));d&&(l.era=d.code)}if(this.reviseIntlEra){const{era:d,eraYear:g}=this.reviseIntlEra(l,t);l.era=d,l.eraYear=g}this.checkIcuBugs&&this.checkIcuBugs(t);const h=this.adjustCalendarDate(l,n,"constrain",!0);if(h.year===void 0)throw new RangeError(`Missing year converting ${JSON.stringify(t)}`);if(h.month===void 0)throw new RangeError(`Missing month converting ${JSON.stringify(t)}`);if(h.day===void 0)throw new RangeError(`Missing day converting ${JSON.stringify(t)}`);return n.set(s,h),["constrain","reject"].forEach((d=>{const g=JSON.stringify({func:"calendarToIsoDate",year:h.year,month:h.month,day:h.day,overflow:d,id:this.id});n.set(g,t)})),h}validateCalendarDate(t){const{month:n,year:r,day:i,eraYear:o,monthCode:s,monthExtra:a}=t;if(a!==void 0)throw new RangeError("Unexpected `monthExtra` value");if(r===void 0&&o===void 0)throw new TypeError("year or eraYear is required");if(n===void 0&&s===void 0)throw new TypeError("month or monthCode is required");if(i===void 0)throw new RangeError("Missing day");if(s!==void 0){if(typeof s!="string")throw new RangeError("monthCode must be a string, not "+typeof s);if(!/^M([01]?\d)(L?)$/.test(s))throw new RangeError(`Invalid monthCode: ${s}`)}if(this.hasEra&&t.era===void 0!=(t.eraYear===void 0))throw new TypeError("properties era and eraYear must be provided together")}adjustCalendarDate(t,n=void 0,r="constrain",i=!1){if(this.calendarType==="lunisolar")throw new RangeError("Override required for lunisolar calendars");let o=t;this.validateCalendarDate(o);const s=this.monthsInYear(o,n);let{month:a,monthCode:c}=o;return{month:a,monthCode:c}=lo(o,r,s),{...o,month:a,monthCode:c}}regulateMonthDayNaive(t,n,r){const i=this.monthsInYear(t,r);let{month:o,day:s}=t;return n==="reject"?(et(o,1,i),et(s,1,this.maximumMonthLength(t))):(o=Tt(o,1,i),s=Tt(s,1,this.maximumMonthLength({...t,month:o}))),{...t,month:o,day:s}}calendarToIsoDate(t,n="constrain",r){const i=t;let o=this.adjustCalendarDate(t,r,n,!1);o=this.regulateMonthDayNaive(o,n,r);const{year:s,month:a,day:c}=o,u=JSON.stringify({func:"calendarToIsoDate",year:s,month:a,day:c,overflow:n,id:this.id});let l,h=r.get(u);if(h||i.year!==void 0&&i.month!==void 0&&i.day!==void 0&&(i.year!==o.year||i.month!==o.month||i.day!==o.day)&&(l=JSON.stringify({func:"calendarToIsoDate",year:i.year,month:i.month,day:i.day,overflow:n,id:this.id}),h=r.get(l),h))return h;let d=this.estimateIsoDate({year:s,month:a,day:c});const g=_=>{let T=this.addDaysIso(d,_);if(o.day>this.minimumMonthLength(o)){let D=this.isoToCalendarDate(T,r);for(;D.month!==a||D.year!==s;){if(n==="reject")throw new RangeError(`day ${c} does not exist in month ${a} of year ${s}`);T=this.addDaysIso(T,-1),D=this.isoToCalendarDate(T,r)}}return T};let p=0,w=this.isoToCalendarDate(d,r),y=ho(o,w);if(y.years!==0||y.months!==0||y.days!==0){const _=365*y.years+30*y.months+y.days;d=this.addDaysIso(d,_),w=this.isoToCalendarDate(d,r),y=ho(o,w),y.years===0&&y.months===0?d=g(y.days):p=this.compareCalendarDates(o,w)}let v=8;for(;p;){d=this.addDaysIso(d,p*v);const _=w;w=this.isoToCalendarDate(d,r);const T=p;if(p=this.compareCalendarDates(o,w),p){if(y=ho(o,w),y.years===0&&y.months===0)d=g(y.days),p=0;else if(T&&p!==T)if(v>1)v/=2;else{if(n==="reject")throw new RangeError(`Can't find ISO date from calendar date: ${JSON.stringify({...i})}`);this.compareCalendarDates(w,_)>0&&(d=this.addDaysIso(d,-1)),p=0}}}if(r.set(u,d),l&&r.set(l,d),o.year===void 0||o.month===void 0||o.day===void 0||o.monthCode===void 0||this.hasEra&&(o.era===void 0||o.eraYear===void 0))throw new RangeError("Unexpected missing property");return d}compareCalendarDates(t,n){return t.year!==n.year?Rt(t.year-n.year):t.month!==n.month?Rt(t.month-n.month):t.day!==n.day?Rt(t.day-n.day):0}regulateDate(t,n="constrain",r){const i=this.calendarToIsoDate(t,n,r);return this.isoToCalendarDate(i,r)}addDaysIso(t,n){return kt(t.year,t.month,t.day+n)}addDaysCalendar(t,n,r){const i=this.calendarToIsoDate(t,"constrain",r),o=this.addDaysIso(i,n);return this.isoToCalendarDate(o,r)}addMonthsCalendar(t,n,r,i){let o=t;const{day:s}=o;for(let a=0,c=Math.abs(n);a<c;a++){const{month:u}=o,l=o,h=n<0?-Math.max(s,this.daysInPreviousMonth(o,i)):this.daysInMonth(o,i),d=this.calendarToIsoDate(o,"constrain",i);let g=this.addDaysIso(d,h);if(o=this.isoToCalendarDate(g,i),n>0){const p=this.monthsInYear(l,i);for(;o.month-1!=u%p;)g=this.addDaysIso(g,-1),o=this.isoToCalendarDate(g,i)}o.day!==s&&(o=this.regulateDate({...o,day:s},"constrain",i))}if(r==="reject"&&o.day!==s)throw new RangeError(`Day ${s} does not exist in resulting calendar month`);return o}addCalendar(t,{years:n=0,months:r=0,weeks:i=0,days:o=0},s,a){const{year:c,day:u,monthCode:l}=t,h=this.adjustCalendarDate({year:c+n,monthCode:l,day:u},a),d=this.addMonthsCalendar(h,r,s,a),g=o+7*i;return this.addDaysCalendar(d,g,a)}untilCalendar(t,n,r,i){let o=0,s=0,a=0,c=0;switch(r){case"day":o=this.calendarDaysUntil(t,n,i);break;case"week":{const u=this.calendarDaysUntil(t,n,i);o=u%7,s=(u-o)/7;break}case"month":case"year":{const u=this.compareCalendarDates(n,t);if(!u)return{years:0,months:0,weeks:0,days:0};const l=n.year-t.year,h=n.day-t.day;if(r==="year"&&l){let p=0;n.monthCode>t.monthCode&&(p=1),n.monthCode<t.monthCode&&(p=-1),p||(p=Math.sign(h)),c=p*u<0?l-u:l}let d,g=c?this.addCalendar(t,{years:c},"constrain",i):t;do a+=u,d=g,g=this.addMonthsCalendar(d,u,"constrain",i),g.day!==t.day&&(g=this.regulateDate({...g,day:t.day},"constrain",i));while(this.compareCalendarDates(n,g)*u>=0);a-=u,o=this.calendarDaysUntil(d,n,i);break}}return{years:c,months:a,weeks:s,days:o}}daysInMonth(t,n){const{day:r}=t,i=this.maximumMonthLength(t),o=this.minimumMonthLength(t);if(o===i)return o;const s=r<=i-o?i:o,a=this.calendarToIsoDate(t,"constrain",n),c=this.addDaysIso(a,s),u=this.isoToCalendarDate(c,n),l=this.addDaysIso(c,-u.day);return this.isoToCalendarDate(l,n).day}daysInPreviousMonth(t,n){const{day:r,month:i,year:o}=t;let s={year:i>1?o:o-1,month:i,day:1};const a=i>1?i-1:this.monthsInYear(s,n);s={...s,month:a};const c=this.minimumMonthLength(s),u=this.maximumMonthLength(s);if(c===u)return u;const l=this.calendarToIsoDate(t,"constrain",n),h=this.addDaysIso(l,-r);return this.isoToCalendarDate(h,n).day}startOfCalendarYear(t){return{year:t.year,month:1,monthCode:"M01",day:1}}startOfCalendarMonth(t){return{year:t.year,month:t.month,day:1}}calendarDaysUntil(t,n,r){const i=this.calendarToIsoDate(t,"constrain",r),o=this.calendarToIsoDate(n,"constrain",r);return Ge(o.year,o.month-1,o.day)-Ge(i.year,i.month-1,i.day)}monthDaySearchStartYear(t,n){return 1972}monthDayFromFields(t,n,r){let i,o,s,a,c,{era:u,eraYear:l,year:h,month:d,monthCode:g,day:p}=t;if(d!==void 0&&h===void 0&&(!this.hasEra||u===void 0||l===void 0))throw new TypeError("when month is present, year (or era and eraYear) are required");(g===void 0||h!==void 0||this.hasEra&&l!==void 0)&&({monthCode:g,day:p}=this.isoToCalendarDate(this.calendarToIsoDate(t,n,r),r));const w={year:this.monthDaySearchStartYear(g,p),month:12,day:31},y=this.isoToCalendarDate(w,r),v=y.monthCode>g||y.monthCode===g&&y.day>=p?y.year:y.year-1;for(let _=0;_<20;_++){const T=this.adjustCalendarDate({day:p,monthCode:g,year:v-_},r),D=this.calendarToIsoDate(T,"constrain",r),E=this.isoToCalendarDate(D,r);if({year:i,month:o,day:s}=D,E.monthCode===g&&E.day===p)return{month:o,day:s,year:i};if(n==="constrain"){const R=this.maxLengthOfMonthCodeInAnyYear(E.monthCode);if(E.monthCode===g&&E.day===R&&p>R)return{month:o,day:s,year:i};(a===void 0||E.monthCode===a.monthCode&&E.day>a.day)&&(a=E,c=D)}}if(n==="constrain"&&c!==void 0)return c;throw new RangeError(`No recent ${this.id} year with monthCode ${g} and day ${p}`)}getFirstDayOfWeek(){}getMinimalDaysInFirstWeek(){}}class gu extends Qe{constructor(){super(...arguments),this.id="hebrew",this.calendarType="lunisolar",this.months={Tishri:{leap:1,regular:1,monthCode:"M01",days:30},Heshvan:{leap:2,regular:2,monthCode:"M02",days:{min:29,max:30}},Kislev:{leap:3,regular:3,monthCode:"M03",days:{min:29,max:30}},Tevet:{leap:4,regular:4,monthCode:"M04",days:29},Shevat:{leap:5,regular:5,monthCode:"M05",days:30},Adar:{leap:void 0,regular:6,monthCode:"M06",days:29},"Adar I":{leap:6,regular:void 0,monthCode:"M05L",days:30},"Adar II":{leap:7,regular:void 0,monthCode:"M06",days:29},Nisan:{leap:8,regular:7,monthCode:"M07",days:30},Iyar:{leap:9,regular:8,monthCode:"M08",days:29},Sivan:{leap:10,regular:9,monthCode:"M09",days:30},Tamuz:{leap:11,regular:10,monthCode:"M10",days:29},Av:{leap:12,regular:11,monthCode:"M11",days:30},Elul:{leap:13,regular:12,monthCode:"M12",days:29}}}inLeapYear(t){const{year:n}=t;return(7*n+1)%19<7}monthsInYear(t){return this.inLeapYear(t)?13:12}minimumMonthLength(t){return this.minMaxMonthLength(t,"min")}maximumMonthLength(t){return this.minMaxMonthLength(t,"max")}minMaxMonthLength(t,n){const{month:r,year:i}=t,o=this.getMonthCode(i,r),s=Object.entries(this.months).find((c=>c[1].monthCode===o));if(s===void 0)throw new RangeError(`unmatched Hebrew month: ${r}`);const a=s[1].days;return typeof a=="number"?a:a[n]}maxLengthOfMonthCodeInAnyYear(t){return["M04","M06","M08","M10","M12"].includes(t)?29:30}estimateIsoDate(t){const{year:n}=t;return{year:n-3760,month:1,day:1}}getMonthCode(t,n){return this.inLeapYear({year:t})?n===6?ue(5,!0):ue(n<6?n:n-1):ue(n)}adjustCalendarDate(t,n,r="constrain",i=!1){let{year:o,month:s,monthCode:a,day:c,monthExtra:u}=t;if(o===void 0)throw new TypeError("Missing property: year");if(i){if(u){const l=this.months[u];if(!l)throw new RangeError(`Unrecognized month from formatToParts: ${u}`);s=this.inLeapYear({year:o})?l.leap:l.regular}return a=this.getMonthCode(o,s),{year:o,month:s,day:c,monthCode:a}}if(this.validateCalendarDate(t),s===void 0)if(a.endsWith("L")){if(a!=="M05L")throw new RangeError(`Hebrew leap month must have monthCode M05L, not ${a}`);if(s=6,!this.inLeapYear({year:o})){if(r==="reject")throw new RangeError(`Hebrew monthCode M05L is invalid in year ${o} which is not a leap year`);s=6,a="M06"}}else{s=Ke(a),this.inLeapYear({year:o})&&s>=6&&s++;const l=this.monthsInYear({year:o});if(s<1||s>l)throw new RangeError(`Invalid monthCode: ${a}`)}else if(r==="reject"?(et(s,1,this.monthsInYear({year:o})),et(c,1,this.maximumMonthLength({year:o,month:s}))):(s=Tt(s,1,this.monthsInYear({year:o})),c=Tt(c,1,this.maximumMonthLength({year:o,month:s}))),a===void 0)a=this.getMonthCode(o,s);else if(this.getMonthCode(o,s)!==a)throw new RangeError(`monthCode ${a} doesn't correspond to month ${s} in Hebrew year ${o}`);return{...t,day:c,month:s,monthCode:a,year:o}}}class _n extends Qe{constructor(){super(...arguments),this.calendarType="lunar",this.DAYS_PER_ISLAMIC_YEAR=354+11/30,this.DAYS_PER_ISO_YEAR=365.2425}inLeapYear(t,n){const r={year:t.year,month:1,monthCode:"M01",day:1},i={year:t.year+1,month:1,monthCode:"M01",day:1};return this.calendarDaysUntil(r,i,n)===355}monthsInYear(){return 12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}maxLengthOfMonthCodeInAnyYear(){return 30}estimateIsoDate(t){const{year:n}=this.adjustCalendarDate(t);return{year:Math.floor(n*this.DAYS_PER_ISLAMIC_YEAR/this.DAYS_PER_ISO_YEAR)+622,month:1,day:1}}}class pu extends _n{constructor(){super(...arguments),this.id="islamic"}}class yu extends _n{constructor(){super(...arguments),this.id="islamic-umalqura"}}class wu extends _n{constructor(){super(...arguments),this.id="islamic-tbla"}}class vu extends _n{constructor(){super(...arguments),this.id="islamic-civil"}}class bu extends _n{constructor(){super(...arguments),this.id="islamic-rgsa"}}class _u extends _n{constructor(){super(...arguments),this.id="islamicc"}}class Tu extends Qe{constructor(){super(...arguments),this.id="persian",this.calendarType="solar"}inLeapYear(t,n){return this.daysInMonth({year:t.year,month:12,day:1},n)===30}monthsInYear(){return 12}minimumMonthLength(t){const{month:n}=t;return n===12?29:n<=6?31:30}maximumMonthLength(t){const{month:n}=t;return n===12?30:n<=6?31:30}maxLengthOfMonthCodeInAnyYear(t){return Ke(t)<=6?31:30}estimateIsoDate(t){const{year:n}=this.adjustCalendarDate(t);return{year:n+621,month:1,day:1}}}class Mu extends Qe{constructor(){super(...arguments),this.id="indian",this.calendarType="solar",this.months={1:{length:30,month:3,day:22,leap:{length:31,month:3,day:21}},2:{length:31,month:4,day:21},3:{length:31,month:5,day:22},4:{length:31,month:6,day:22},5:{length:31,month:7,day:23},6:{length:31,month:8,day:23},7:{length:30,month:9,day:23},8:{length:30,month:10,day:23},9:{length:30,month:11,day:22},10:{length:30,month:12,day:22},11:{length:30,month:1,nextYear:!0,day:21},12:{length:30,month:2,nextYear:!0,day:20}},this.vulnerableToBceBug=new Date("0000-01-01T00:00Z").toLocaleDateString("en-US-u-ca-indian",{timeZone:"UTC"})!=="10/11/-79 Saka"}inLeapYear(t){return fo(t.year+78)}monthsInYear(){return 12}minimumMonthLength(t){return this.getMonthInfo(t).length}maximumMonthLength(t){return this.getMonthInfo(t).length}maxLengthOfMonthCodeInAnyYear(t){const n=Ke(t);let r=this.months[n];return r=r.leap??r,r.length}getMonthInfo(t){const{month:n}=t;let r=this.months[n];if(r===void 0)throw new RangeError(`Invalid month: ${n}`);return this.inLeapYear(t)&&r.leap&&(r=r.leap),r}estimateIsoDate(t){const n=this.adjustCalendarDate(t),r=this.getMonthInfo(n);return kt(n.year+78+(r.nextYear?1:0),r.month,r.day+n.day-1)}checkIcuBugs(t){if(this.vulnerableToBceBug&&t.year<1)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 0001-01-01 (see https://bugs.chromium.org/p/v8/issues/detail?id=10529)`)}}function fo(e){return e%4==0&&(e%100!=0||e%400==0)}class Ea extends Qe{constructor(t,n){super(),this.calendarType="solar",this.id=t,this.isoEpoch=n}inLeapYear(t){const{year:n}=this.estimateIsoDate({month:1,day:1,year:t.year});return fo(n)}monthsInYear(){return 12}minimumMonthLength(t){const{month:n}=t;return n===2?this.inLeapYear(t)?29:28:[4,6,9,11].indexOf(n)>=0?30:31}maximumMonthLength(t){return this.minimumMonthLength(t)}maxLengthOfMonthCodeInAnyYear(t){return[31,29,31,30,31,30,31,31,30,31,30,31][Ke(t)-1]}estimateIsoDate(t){const n=this.adjustCalendarDate(t);return Xn(n.year+this.isoEpoch.year,n.month+this.isoEpoch.month,n.day+this.isoEpoch.day,"constrain")}}class Da extends Qe{constructor(t,n){super(),this.hasEra=!0,this.calendarType="solar",this.id=t;const{eras:r,anchorEra:i}=(function(o){let s,a=o;if(a.length===0)throw new RangeError("Invalid era data: eras are required");if(a.length===1&&a[0].reverseOf)throw new RangeError("Invalid era data: anchor era cannot count years backwards");if(a.length===1&&!a[0].code)throw new RangeError("Invalid era data: at least one named era is required");if(a.filter((u=>u.reverseOf!=null)).length>1)throw new RangeError("Invalid era data: only one era can count years backwards");a.forEach((u=>{if(u.isAnchor||!u.anchorEpoch&&!u.reverseOf){if(s)throw new RangeError("Invalid era data: cannot have multiple anchor eras");s=u,u.anchorEpoch={year:u.hasYearZero?0:1}}else if(!u.code)throw new RangeError("If era name is blank, it must be the anchor era")})),a=a.filter((u=>u.code)),a.forEach((u=>{const{reverseOf:l}=u;if(l){const h=a.find((d=>d.code===l));if(h===void 0)throw new RangeError(`Invalid era data: unmatched reverseOf era: ${l}`);u.reverseOf=h,u.anchorEpoch=h.anchorEpoch,u.isoEpoch=h.isoEpoch}u.anchorEpoch.month===void 0&&(u.anchorEpoch.month=1),u.anchorEpoch.day===void 0&&(u.anchorEpoch.day=1)})),a.sort(((u,l)=>{if(u.reverseOf)return 1;if(l.reverseOf)return-1;if(!u.isoEpoch||!l.isoEpoch)throw new RangeError("Invalid era data: missing ISO epoch");return l.isoEpoch.year-u.isoEpoch.year}));const c=a[a.length-1].reverseOf;if(c&&c!==a[a.length-2])throw new RangeError("Invalid era data: invalid reverse-sign era");return a.forEach(((u,l)=>{u.genericName="era"+(a.length-1-l)})),{eras:a,anchorEra:s||a[0]}})(n);this.anchorEra=i,this.eras=r}inLeapYear(t){const{year:n}=this.estimateIsoDate({month:1,day:1,year:t.year});return fo(n)}monthsInYear(){return 12}minimumMonthLength(t){const{month:n}=t;return n===2?this.inLeapYear(t)?29:28:[4,6,9,11].indexOf(n)>=0?30:31}maximumMonthLength(t){return this.minimumMonthLength(t)}maxLengthOfMonthCodeInAnyYear(t){return[31,29,31,30,31,30,31,31,30,31,30,31][Ke(t)-1]}completeEraYear(t){const n=(a,c,u)=>{const l=t[a];if(l!=null&&l!=c&&!(u||[]).includes(l)){const h=u?.[0];throw new RangeError(`Input ${a} ${l} doesn't match calculated value ${h?`${c} (also called ${h})`:c}`)}},r=a=>{let c;const u={...t,year:a},l=this.eras.find(((h,d)=>{if(d===this.eras.length-1){if(h.reverseOf){if(a>0)throw new RangeError(`Signed year ${a} is invalid for era ${h.code}`);return c=h.anchorEpoch.year-a,!0}return c=a-h.anchorEpoch.year+(h.hasYearZero?0:1),!0}return this.compareCalendarDates(u,h.anchorEpoch)>=0&&(c=a-h.anchorEpoch.year+(h.hasYearZero?0:1),!0)}));if(!l)throw new RangeError(`Year ${a} was not matched by any era`);return{eraYear:c,era:l.code,eraNames:l.names}};let{year:i,eraYear:o,era:s}=t;if(i!=null){const a=r(i);({eraYear:o,era:s}=a),n("era",s,a?.eraNames),n("eraYear",o)}else{if(o==null)throw new RangeError("Either year or eraYear and era are required");{if(s===void 0)throw new RangeError("era and eraYear must be provided together");const a=this.eras.find((({code:c,names:u=[]})=>c===s||u.includes(s)));if(!a)throw new RangeError(`Era ${s} (ISO year ${o}) was not matched by any era`);i=a.reverseOf?a.anchorEpoch.year-o:o+a.anchorEpoch.year-(a.hasYearZero?0:1),n("year",i),{eraYear:o,era:s}=r(i)}}return{...t,year:i,eraYear:o,era:s}}adjustCalendarDate(t,n,r="constrain"){let i=t;const{month:o,monthCode:s}=i;return o===void 0&&(i={...i,month:Ke(s)}),this.validateCalendarDate(i),i=this.completeEraYear(i),super.adjustCalendarDate(i,n,r)}estimateIsoDate(t){const n=this.adjustCalendarDate(t),{year:r,month:i,day:o}=n,{anchorEra:s}=this;return Xn(r+s.isoEpoch.year-(s.hasYearZero?0:1),i,o,"constrain")}}class mo extends Da{constructor(t,n){super(t,n)}isoToCalendarDate(t){const{year:n,month:r,day:i}=t,o=ue(r),s=n-this.anchorEra.isoEpoch.year+1;return this.completeEraYear({year:s,month:r,monthCode:o,day:i})}}const le={inLeapYear(e){const{year:t}=e;return(t+1)%4==0},monthsInYear:()=>13,minimumMonthLength(e){const{month:t}=e;return t===13?this.inLeapYear(e)?6:5:30},maximumMonthLength(e){return this.minimumMonthLength(e)},maxLengthOfMonthCodeInAnyYear:e=>e==="M13"?6:30};class Eu extends Ea{constructor(t,n){super(t,n),this.inLeapYear=le.inLeapYear,this.monthsInYear=le.monthsInYear,this.minimumMonthLength=le.minimumMonthLength,this.maximumMonthLength=le.maximumMonthLength,this.maxLengthOfMonthCodeInAnyYear=le.maxLengthOfMonthCodeInAnyYear}}class xa extends Da{constructor(t,n){super(t,n),this.inLeapYear=le.inLeapYear,this.monthsInYear=le.monthsInYear,this.minimumMonthLength=le.minimumMonthLength,this.maximumMonthLength=le.maximumMonthLength,this.maxLengthOfMonthCodeInAnyYear=le.maxLengthOfMonthCodeInAnyYear}}class Du extends Eu{constructor(){super("ethioaa",{year:-5492,month:7,day:17})}}class xu extends xa{constructor(){super("coptic",[{code:"coptic",isoEpoch:{year:284,month:8,day:29}},{code:"coptic-inverse",reverseOf:"coptic"}])}}class Cu extends xa{constructor(){super("ethiopic",[{code:"ethioaa",names:["ethiopic-amete-alem","mundi"],isoEpoch:{year:-5492,month:7,day:17}},{code:"ethiopic",names:["incar"],isoEpoch:{year:8,month:8,day:27},anchorEpoch:{year:5501}}])}}class $u extends mo{constructor(){super("roc",[{code:"roc",names:["minguo"],isoEpoch:{year:1912,month:1,day:1}},{code:"roc-inverse",names:["before-roc"],reverseOf:"roc"}])}}class Au extends Ea{constructor(){super("buddhist",{year:-543,month:1,day:1})}}class ku extends mo{constructor(){super("gregory",[{code:"gregory",names:["ad","ce"],isoEpoch:{year:1,month:1,day:1}},{code:"gregory-inverse",names:["be","bce"],reverseOf:"gregory"}])}reviseIntlEra(t){let{era:n,eraYear:r}=t;return n==="b"&&(n="gregory-inverse"),n==="a"&&(n="gregory"),{era:n,eraYear:r}}getFirstDayOfWeek(){return 1}getMinimalDaysInFirstWeek(){return 1}}class Nu extends mo{constructor(){super("japanese",[{code:"reiwa",isoEpoch:{year:2019,month:5,day:1},anchorEpoch:{year:2019,month:5,day:1}},{code:"heisei",isoEpoch:{year:1989,month:1,day:8},anchorEpoch:{year:1989,month:1,day:8}},{code:"showa",isoEpoch:{year:1926,month:12,day:25},anchorEpoch:{year:1926,month:12,day:25}},{code:"taisho",isoEpoch:{year:1912,month:7,day:30},anchorEpoch:{year:1912,month:7,day:30}},{code:"meiji",isoEpoch:{year:1868,month:9,day:8},anchorEpoch:{year:1868,month:9,day:8}},{code:"japanese",names:["japanese","gregory","ad","ce"],isoEpoch:{year:1,month:1,day:1}},{code:"japanese-inverse",names:["japanese-inverse","gregory-inverse","bc","bce"],reverseOf:"japanese"}]),this.erasBeginMidYear=!0}reviseIntlEra(t,n){const{era:r,eraYear:i}=t,{year:o}=n;return this.eras.find((s=>s.code===r))?{era:r,eraYear:i}:o<1?{era:"japanese-inverse",eraYear:1-o}:{era:"japanese",eraYear:o}}}class Ca extends Qe{constructor(){super(...arguments),this.calendarType="lunisolar"}inLeapYear(t,n){const r=this.getMonthList(t.year,n);return Object.entries(r).length===13}monthsInYear(t,n){return this.inLeapYear(t,n)?13:12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}maxLengthOfMonthCodeInAnyYear(t){return["M01L","M09L","M10L","M11L","M12L"].includes(t)?29:30}monthDaySearchStartYear(t,n){const r={M01L:[1651,1651],M02L:[1947,1765],M03L:[1966,1955],M04L:[1963,1944],M05L:[1971,1952],M06L:[1960,1941],M07L:[1968,1938],M08L:[1957,1718],M09L:[1832,1832],M10L:[1870,1870],M11L:[1814,1814],M12L:[1890,1890]}[t]??[1972,1972];return n<30?r[0]:r[1]}getMonthList(t,n){if(t===void 0)throw new TypeError("Missing year");const r=JSON.stringify({func:"getMonthList",calendarYear:t,id:this.id}),i=n.get(r);if(i)return i;const o=this.getFormatter(),s=(y,v)=>{const _=Ma({isoYear:y,isoMonth:2,isoDay:1}),T=new Date(_);T.setUTCDate(v+1);const D=o.formatToParts(T),E=D.find((j=>j.type==="month")).value,R=+D.find((j=>j.type==="day")).value,H=D.find((j=>j.type==="relatedYear"));let U;if(H===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);return U=+H.value,{calendarMonthString:E,calendarDay:R,calendarYearToVerify:U}};let a=17,{calendarMonthString:c,calendarDay:u,calendarYearToVerify:l}=s(t,a);c!=="1"&&(a+=29,{calendarMonthString:c,calendarDay:u}=s(t,a)),a-=u-5;const h={};let d,g,p=1,w=!1;do({calendarMonthString:c,calendarDay:u,calendarYearToVerify:l}=s(t,a)),d&&(h[g].daysInMonth=d+30-u),l!==t?w=!0:(h[c]={monthIndex:p++},a+=30),d=u,g=c;while(!w);return h[g].daysInMonth=d+30-u,n.set(r,h),h}estimateIsoDate(t){const{year:n,month:r}=t;return{year:n,month:r>=12?12:r+1,day:1}}adjustCalendarDate(t,n,r="constrain",i=!1){let{year:o,month:s,monthExtra:a,day:c,monthCode:u}=t;if(o===void 0)throw new TypeError("Missing property: year");if(i){if(a&&a!=="bis")throw new RangeError(`Unexpected leap month suffix: ${a}`);const l=ue(s,a!==void 0),h=`${s}${a||""}`,d=this.getMonthList(o,n)[h];if(d===void 0)throw new RangeError(`Unmatched month ${h} in Chinese year ${o}`);return s=d.monthIndex,{year:o,month:s,day:c,monthCode:l}}if(this.validateCalendarDate(t),s===void 0){const l=this.getMonthList(o,n);let h=u.replace(/^M|L$/g,(g=>g==="L"?"bis":""));h[0]==="0"&&(h=h.slice(1));let d=l[h];if(s=d&&d.monthIndex,s===void 0&&u.endsWith("L")&&u!="M13L"&&r==="constrain"){const g=+u.replace(/^M0?|L$/g,"");d=l[g],d&&(s=d.monthIndex,u=ue(g))}if(s===void 0)throw new RangeError(`Unmatched month ${u} in Chinese year ${o}`)}else if(u===void 0){const l=this.getMonthList(o,n),h=Object.entries(l),d=h.length;r==="reject"?(et(s,1,d),et(c,1,this.maximumMonthLength())):(s=Tt(s,1,d),c=Tt(c,1,this.maximumMonthLength()));const g=h.find((p=>p[1].monthIndex===s));if(g===void 0)throw new RangeError(`Invalid month ${s} in Chinese year ${o}`);u=ue(+g[0].replace("bis",""),g[0].indexOf("bis")!==-1)}else{const l=this.getMonthList(o,n);let h=u.replace(/^M|L$/g,(g=>g==="L"?"bis":""));h[0]==="0"&&(h=h.slice(1));const d=l[h];if(!d)throw new RangeError(`Unmatched monthCode ${u} in Chinese year ${o}`);if(s!==d.monthIndex)throw new RangeError(`monthCode ${u} doesn't correspond to month ${s} in Chinese year ${o}`)}return{...t,year:o,month:s,monthCode:u,day:c}}}class Ru extends Ca{constructor(){super(...arguments),this.id="chinese"}}class Lu extends Ca{constructor(){super(...arguments),this.id="dangi"}}class Ou{constructor(t){this.helper=t}extraFields(t){return this.helper.hasEra&&t.includes("year")?["era","eraYear"]:[]}resolveFields(t){if(this.helper.calendarType!=="lunisolar"){const n=new nt;lo(t,void 0,this.helper.monthsInYear({year:t.year??1972},n))}}dateToISO(t,n){const r=new nt,i=this.helper.calendarToIsoDate(t,n,r);return r.setObject(i),i}monthDayToISOReferenceDate(t,n){const r=new nt,i=this.helper.monthDayFromFields(t,n,r);return r.setObject(i),i}fieldKeysToIgnore(t){const n=new Set;for(let r=0;r<t.length;r++){const i=t[r];switch(n.add(i),i){case"era":n.add("eraYear"),n.add("year");break;case"eraYear":n.add("era"),n.add("year");break;case"year":n.add("era"),n.add("eraYear");break;case"month":n.add("monthCode"),this.helper.erasBeginMidYear&&(n.add("era"),n.add("eraYear"));break;case"monthCode":n.add("month"),this.helper.erasBeginMidYear&&(n.add("era"),n.add("eraYear"));break;case"day":this.helper.erasBeginMidYear&&(n.add("era"),n.add("eraYear"))}}return ba(n)}dateAdd(t,{years:n,months:r,weeks:i,days:o},s){const a=nt.getCacheForObject(t),c=this.helper.isoToCalendarDate(t,a),u=this.helper.addCalendar(c,{years:n,months:r,weeks:i,days:o},s,a),l=this.helper.calendarToIsoDate(u,"constrain",a);return nt.getCacheForObject(l)||new nt(a).setObject(l),l}dateUntil(t,n,r){const i=nt.getCacheForObject(t),o=nt.getCacheForObject(n),s=this.helper.isoToCalendarDate(t,i),a=this.helper.isoToCalendarDate(n,o);return this.helper.untilCalendar(s,a,r,i)}isoToDate(t,n){const r=nt.getCacheForObject(t),i=this.helper.isoToCalendarDate(t,r);if(n.dayOfWeek&&(i.dayOfWeek=yr.iso8601.isoToDate(t,{dayOfWeek:!0}).dayOfWeek),n.dayOfYear){const o=this.helper.startOfCalendarYear(i),s=this.helper.calendarDaysUntil(o,i,r);i.dayOfYear=s+1}if(n.weekOfYear&&(i.weekOfYear=_a(this.helper.id,t)),i.daysInWeek=7,n.daysInMonth&&(i.daysInMonth=this.helper.daysInMonth(i,r)),n.daysInYear){const o=this.helper.startOfCalendarYear(i),s=this.helper.addCalendar(o,{years:1},"constrain",r);i.daysInYear=this.helper.calendarDaysUntil(o,s,r)}return n.monthsInYear&&(i.monthsInYear=this.helper.monthsInYear(i,r)),n.inLeapYear&&(i.inLeapYear=this.helper.inLeapYear(i,r)),i}getFirstDayOfWeek(){return this.helper.getFirstDayOfWeek()}getMinimalDaysInFirstWeek(){return this.helper.getMinimalDaysInFirstWeek()}}for(const e of[gu,Tu,Cu,Du,xu,Ru,Lu,$u,Mu,Au,ku,Nu,pu,yu,wu,vu,bu,_u]){const t=new e;yr[t.id]=new Ou(t)}Pi("calendarImpl",(function(e){return yr[e]}));const wr=Intl.DateTimeFormat;function Tn(e,t){let n=m(e,t);return typeof n=="function"&&(n=new wr(m(e,as),n(m(e,Li))),(function(r,i,o){const s=Ir(r);if(s===void 0)throw new TypeError("Missing slots for the given container");if(s[i]===void 0)throw new TypeError(`tried to reset ${i} which was not set`);s[i]=o})(e,t,n)),n}function vr(e){return wt(e,je)}class br{constructor(t=void 0,n=void 0){(function(r,i,o){const s=o!==void 0;let a;if(s){const h=["localeMatcher","calendar","numberingSystem","hour12","hourCycle","timeZone","weekday","era","year","month","day","dayPeriod","hour","minute","second","fractionalSecondDigits","timeZoneName","formatMatcher","dateStyle","timeStyle"];a=(function(g){if(g==null)throw new TypeError(`Expected object not ${g}`);return Object(g)})(o);const d=Object.create(null);for(let g=0;g<h.length;g++){const p=h[g];Object.prototype.hasOwnProperty.call(a,p)&&(d[p]=a[p])}a=d}else a=Object.create(null);const c=new wr(i,a),u=c.resolvedOptions();if(ge(r),s){const h=Object.assign(Object.create(null),u);for(const d in h)Object.prototype.hasOwnProperty.call(a,d)||delete h[d];h.hour12=a.hour12,h.hourCycle=a.hourCycle,N(r,Li,h)}else N(r,Li,a);N(r,as,u.locale),N(r,je,c),N(r,rn,u.timeZone),N(r,zn,u.calendar),N(r,es,Hu),N(r,ns,Uu),N(r,rs,Fu),N(r,is,ju),N(r,os,Zu),N(r,ss,qu);const l=s?a.timeZone:void 0;if(l===void 0)N(r,Ri,u.timeZone);else{const h=Fr(l);if(h.startsWith(""))throw new RangeError("Unicode minus (U+2212) is not supported in time zone offsets");N(r,Ri,_t(h))}})(this,t,n)}get format(){b(this,vr);const t=Iu.bind(this);return Object.defineProperties(t,{length:{value:1,enumerable:!1,writable:!1,configurable:!0},name:{value:"",enumerable:!1,writable:!1,configurable:!0}}),t}formatRange(t,n){return b(this,vr),Su.call(this,t,n)}formatToParts(t,...n){return b(this,vr),Pu.call(this,t,...n)}formatRangeToParts(t,n){return b(this,vr),zu.call(this,t,n)}resolvedOptions(){return b(this,vr),Yu.call(this)}}"formatToParts"in wr.prototype||delete br.prototype.formatToParts,"formatRangeToParts"in wr.prototype||delete br.prototype.formatRangeToParts;const Zt=function(e=void 0,t=void 0){return new br(e,t)};function Yu(){const e=m(this,je).resolvedOptions();return e.timeZone=m(this,Ri),e}function Iu(e,...t){let n,r,i=Mn(e,this);return i.formatter?(n=i.formatter,r=[Ht(i.epochNs,"floor")]):(n=m(this,je),r=[e,...t]),n.format(...r)}function Pu(e,...t){let n,r,i=Mn(e,this);return i.formatter?(n=i.formatter,r=[Ht(i.epochNs,"floor")]):(n=m(this,je),r=[e,...t]),n.formatToParts(...r)}function Su(e,t){if(e===void 0||t===void 0)throw new TypeError("Intl.DateTimeFormat.formatRange requires two values");const n=ci(e),r=ci(t);let i,o=[n,r];if(De(n)!==De(r))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");if(De(n)){if(!$a(n,r))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");const{epochNs:s,formatter:a}=Mn(n,this),{epochNs:c,formatter:u}=Mn(r,this);a&&(i=a,o=[Ht(s,"floor"),Ht(c,"floor")])}return i||(i=m(this,je)),i.formatRange(...o)}function zu(e,t){if(e===void 0||t===void 0)throw new TypeError("Intl.DateTimeFormat.formatRange requires two values");const n=ci(e),r=ci(t);let i,o=[n,r];if(De(n)!==De(r))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");if(De(n)){if(!$a(n,r))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");const{epochNs:s,formatter:a}=Mn(n,this),{epochNs:c,formatter:u}=Mn(r,this);a&&(i=a,o=[Ht(s,"floor"),Ht(c,"floor")])}return i||(i=m(this,je)),i.formatRangeToParts(...o)}function _r(e={},t={}){const n=Object.assign({},e),r=["year","month","day","hour","minute","second","weekday","dayPeriod","timeZoneName","dateStyle","timeStyle"];for(let i=0;i<r.length;i++){const o=r[i];n[o]=o in t?t[o]:n[o],n[o]!==!1&&n[o]!==void 0||delete n[o]}return n}function ju(e){const t=_r(e,{year:!1,month:!1,day:!1,weekday:!1,timeZoneName:!1,dateStyle:!1});if(t.timeStyle!=="long"&&t.timeStyle!=="full"||(delete t.timeStyle,Object.assign(t,{hour:"numeric",minute:"2-digit",second:"2-digit"})),!ai(t)){if(Tr(e))throw new TypeError(`cannot format Temporal.PlainTime with options [${Object.keys(e)}]`);Object.assign(t,{hour:"numeric",minute:"numeric",second:"numeric"})}return t}function Uu(e){const t={short:{year:"2-digit",month:"numeric"},medium:{year:"numeric",month:"short"},long:{year:"numeric",month:"long"},full:{year:"numeric",month:"long"}},n=_r(e,{day:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});if("dateStyle"in n&&n.dateStyle){const r=n.dateStyle;delete n.dateStyle,Object.assign(n,t[r])}if(!("year"in n||"month"in n||"era"in n)){if(Tr(e))throw new TypeError(`cannot format PlainYearMonth with options [${Object.keys(e)}]`);Object.assign(n,{year:"numeric",month:"numeric"})}return n}function Fu(e){const t={short:{month:"numeric",day:"numeric"},medium:{month:"short",day:"numeric"},long:{month:"long",day:"numeric"},full:{month:"long",day:"numeric"}},n=_r(e,{year:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});if("dateStyle"in n&&n.dateStyle){const r=n.dateStyle;delete n.dateStyle,Object.assign(n,t[r])}if(!("month"in n)&&!("day"in n)){if(Tr(e))throw new TypeError(`cannot format PlainMonthDay with options [${Object.keys(e)}]`);Object.assign(n,{month:"numeric",day:"numeric"})}return n}function Hu(e){const t=_r(e,{hour:!1,minute:!1,second:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});if(!si(t)){if(Tr(e))throw new TypeError(`cannot format PlainDate with options [${Object.keys(e)}]`);Object.assign(t,{year:"numeric",month:"numeric",day:"numeric"})}return t}function Zu(e){const t=_r(e,{timeZoneName:!1});if((t.timeStyle==="long"||t.timeStyle==="full")&&(delete t.timeStyle,Object.assign(t,{hour:"numeric",minute:"2-digit",second:"2-digit"}),t.dateStyle)&&(Object.assign(t,{short:{year:"numeric",month:"numeric",day:"numeric"},medium:{year:"numeric",month:"short",day:"numeric"},long:{year:"numeric",month:"long",day:"numeric"},full:{year:"numeric",month:"long",day:"numeric",weekday:"long"}}[t.dateStyle]),delete t.dateStyle),!ai(t)&&!si(t)){if(Tr(e))throw new TypeError(`cannot format PlainDateTime with options [${Object.keys(e)}]`);Object.assign(t,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}return t}function qu(e){let t=e;return ai(t)||si(t)||(t=Object.assign({},t,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),t}function si(e){return"year"in e||"month"in e||"day"in e||"weekday"in e||"dateStyle"in e||"era"in e}function ai(e){return"hour"in e||"minute"in e||"second"in e||"timeStyle"in e||"dayPeriod"in e||"fractionalSecondDigits"in e}function Tr(e){return si(e)||ai(e)||"dateStyle"in e||"timeStyle"in e||"timeZoneName"in e}function De(e){return V(e)||K(e)||F(e)||O(e)||ot(e)||Yt(e)||it(e)}function ci(e){return De(e)?e:Ur(e)}function $a(e,t){return!(!De(e)||!De(t)||K(e)&&!K(t)||V(e)&&!V(t)||F(e)&&!F(t)||O(e)&&!O(t)||ot(e)&&!ot(t)||Yt(e)&&!Yt(t)||it(e)&&!it(t))}function Mn(e,t){if(K(e)){const n={isoDate:{year:1970,month:1,day:1},time:m(e,X)};return{epochNs:ut(m(t,rn),n,"compatible"),formatter:Tn(t,is)}}if(ot(e)){const n=m(e,M),r=m(t,zn);if(n!==r)throw new RangeError(`cannot format PlainYearMonth with calendar ${n} in locale with calendar ${r}`);const i=P(m(e,A),{deltaDays:0,hour:12,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});return{epochNs:ut(m(t,rn),i,"compatible"),formatter:Tn(t,ns)}}if(Yt(e)){const n=m(e,M),r=m(t,zn);if(n!==r)throw new RangeError(`cannot format PlainMonthDay with calendar ${n} in locale with calendar ${r}`);const i=P(m(e,A),{deltaDays:0,hour:12,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});return{epochNs:ut(m(t,rn),i,"compatible"),formatter:Tn(t,rs)}}if(V(e)){const n=m(e,M),r=m(t,zn);if(n!=="iso8601"&&n!==r)throw new RangeError(`cannot format PlainDate with calendar ${n} in locale with calendar ${r}`);const i=P(m(e,A),{deltaDays:0,hour:12,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});return{epochNs:ut(m(t,rn),i,"compatible"),formatter:Tn(t,es)}}if(F(e)){const n=m(e,M),r=m(t,zn);if(n!=="iso8601"&&n!==r)throw new RangeError(`cannot format PlainDateTime with calendar ${n} in locale with calendar ${r}`);const i=m(e,q);return{epochNs:ut(m(t,rn),i,"compatible"),formatter:Tn(t,os)}}if(O(e))throw new TypeError("Temporal.ZonedDateTime not supported in DateTimeFormat methods. Use toLocaleString() instead.");return it(e)?{epochNs:m(e,$),formatter:Tn(t,ss)}:{}}function Aa(e){const t=Object.create(null);return t.years=m(e,lt),t.months=m(e,ht),t.weeks=m(e,Ct),t.days=m(e,dt),t.hours=m(e,ft),t.minutes=m(e,mt),t.seconds=m(e,gt),t.milliseconds=m(e,pt),t.microseconds=m(e,yt),t.nanoseconds=m(e,$t),t}br.prototype.constructor=Zt,Object.defineProperty(Zt,"prototype",{value:br.prototype,writable:!1,enumerable:!1,configurable:!1}),Zt.supportedLocalesOf=wr.supportedLocalesOf,pe(Zt,"Intl.DateTimeFormat");const{format:Xu,formatToParts:Wu}=Intl.DurationFormat?.prototype??Object.create(null);function ka(e){Intl.DurationFormat.prototype.resolvedOptions.call(this);const t=Aa(zt(e));return Xu.call(this,t)}Intl.DurationFormat?.prototype&&(Intl.DurationFormat.prototype.format=ka,Intl.DurationFormat.prototype.formatToParts=function(e){Intl.DurationFormat.prototype.resolvedOptions.call(this);const t=Aa(zt(e));return Wu.call(this,t)});class go{constructor(t){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");Ls(this,oi(t))}get epochMilliseconds(){return b(this,it),Ht(m(this,$),"floor")}get epochNanoseconds(){return b(this,it),wa(f.BigInt(m(this,$)))}add(t){return b(this,it),da("add",this,t)}subtract(t){return b(this,it),da("subtract",this,t)}until(t,n=void 0){return b(this,it),oa("until",this,t,n)}since(t,n=void 0){return b(this,it),oa("since",this,t,n)}round(t){if(b(this,it),t===void 0)throw new TypeError("options parameter is required");const n=typeof t=="string"?Ve("smallestUnit",t):x(t),r=hn(n),i=Xt(n,"halfExpand"),o=At(n,"smallestUnit","time",ye);return dn(r,{hour:24,minute:1440,second:86400,millisecond:864e5,microsecond:864e8,nanosecond:864e11}[o],!0),re(oo(m(this,$),r,o,i))}equals(t){b(this,it);const n=er(t),r=m(this,$),i=m(n,$);return f.equal(f.BigInt(r),f.BigInt(i))}toString(t=void 0){b(this,it);const n=x(t),r=Vn(n),i=Xt(n,"trunc"),o=At(n,"smallestUnit","time",void 0);if(o==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');let s=n.timeZone;s!==void 0&&(s=_t(s));const{precision:a,unit:c,increment:u}=Kn(o,r);return zs(re(oo(m(this,$),u,c,i)),s,a)}toJSON(){return b(this,it),zs(this,void 0,"auto")}toLocaleString(t=void 0,n=void 0){return b(this,it),new Zt(t,n).format(this)}valueOf(){Se("Instant")}toZonedDateTimeISO(t){b(this,it);const n=_t(t);return ct(m(this,$),n,"iso8601")}static fromEpochMilliseconds(t){return re(ce(Ur(t)))}static fromEpochNanoseconds(t){return re(oi(t))}static from(t){return er(t)}static compare(t,n){const r=er(t),i=er(n),o=m(r,$),s=m(i,$);return f.lessThan(o,s)?-1:f.greaterThan(o,s)?1:0}}pe(go,"Temporal.Instant");class po{constructor(t,n,r,i="iso8601"){const o=k(t),s=k(n),a=k(r),c=Mt(i===void 0?"iso8601":J(i));qe(o,s,a),$s(this,{year:o,month:s,day:a},c)}get calendarId(){return b(this,V),m(this,M)}get era(){return Et(this,"era")}get eraYear(){return Et(this,"eraYear")}get year(){return Et(this,"year")}get month(){return Et(this,"month")}get monthCode(){return Et(this,"monthCode")}get day(){return Et(this,"day")}get dayOfWeek(){return Et(this,"dayOfWeek")}get dayOfYear(){return Et(this,"dayOfYear")}get weekOfYear(){return Et(this,"weekOfYear")?.week}get yearOfWeek(){return Et(this,"weekOfYear")?.year}get daysInWeek(){return Et(this,"daysInWeek")}get daysInMonth(){return Et(this,"daysInMonth")}get daysInYear(){return Et(this,"daysInYear")}get monthsInYear(){return Et(this,"monthsInYear")}get inLeapYear(){return Et(this,"inLeapYear")}with(t,n=void 0){if(b(this,V),!W(t))throw new TypeError("invalid argument");ln(t);const r=m(this,M);let i=vt(r,m(this,A));return i=Ue(r,i,It(r,t,["year","month","monthCode","day"],[],"partial")),bt(Oe(r,i,I(x(n))),r)}withCalendar(t){b(this,V);const n=or(t);return bt(m(this,A),n)}add(t,n=void 0){return b(this,V),fa("add",this,t,n)}subtract(t,n=void 0){return b(this,V),fa("subtract",this,t,n)}until(t,n=void 0){return b(this,V),sa("until",this,t,n)}since(t,n=void 0){return b(this,V),sa("since",this,t,n)}equals(t){b(this,V);const n=Bn(t);return ae(m(this,A),m(n,A))===0&&ie(m(this,M),m(n,M))}toString(t=void 0){return b(this,V),js(this,Gn(x(t)))}toJSON(){return b(this,V),js(this)}toLocaleString(t=void 0,n=void 0){return b(this,V),new Zt(t,n).format(this)}valueOf(){Se("PlainDate")}toPlainDateTime(t=void 0){b(this,V);const n=Cs(t);return jt(P(m(this,A),n),m(this,M))}toZonedDateTime(t){let n,r;if(b(this,V),W(t)){const s=t.timeZone;s===void 0?n=_t(t):(n=_t(s),r=t.plainTime)}else n=_t(t);const i=m(this,A);let o;return r===void 0?o=Ye(n,i):(r=Le(r),o=ut(n,P(i,m(r,X)),"compatible")),ct(o,n,m(this,M))}toPlainYearMonth(){b(this,V);const t=m(this,M);return mn(ar(t,vt(t,m(this,A)),"constrain"),t)}toPlainMonthDay(){b(this,V);const t=m(this,M);return fn(Gr(t,vt(t,m(this,A)),"constrain"),t)}static from(t,n=void 0){return Bn(t,n)}static compare(t,n){const r=Bn(t),i=Bn(n);return ae(m(r,A),m(i,A))}}function Et(e,t){b(e,V);const n=m(e,A);return Qn(e).isoToDate(n,{[t]:!0})[t]}pe(po,"Temporal.PlainDate");class yo{constructor(t,n,r,i=0,o=0,s=0,a=0,c=0,u=0,l="iso8601"){const h=k(t),d=k(n),g=k(r),p=i===void 0?0:k(i),w=o===void 0?0:k(o),y=s===void 0?0:k(s),v=a===void 0?0:k(a),_=c===void 0?0:k(c),T=u===void 0?0:k(u),D=Mt(l===void 0?"iso8601":J(l));Ji(h,d,g,p,w,y,v,_,T),As(this,{isoDate:{year:h,month:d,day:g},time:{hour:p,minute:w,second:y,millisecond:v,microsecond:_,nanosecond:T}},D)}get calendarId(){return b(this,F),m(this,M)}get year(){return Dt(this,"year")}get month(){return Dt(this,"month")}get monthCode(){return Dt(this,"monthCode")}get day(){return Dt(this,"day")}get hour(){return En(this,"hour")}get minute(){return En(this,"minute")}get second(){return En(this,"second")}get millisecond(){return En(this,"millisecond")}get microsecond(){return En(this,"microsecond")}get nanosecond(){return En(this,"nanosecond")}get era(){return Dt(this,"era")}get eraYear(){return Dt(this,"eraYear")}get dayOfWeek(){return Dt(this,"dayOfWeek")}get dayOfYear(){return Dt(this,"dayOfYear")}get weekOfYear(){return Dt(this,"weekOfYear")?.week}get yearOfWeek(){return Dt(this,"weekOfYear")?.year}get daysInWeek(){return Dt(this,"daysInWeek")}get daysInYear(){return Dt(this,"daysInYear")}get daysInMonth(){return Dt(this,"daysInMonth")}get monthsInYear(){return Dt(this,"monthsInYear")}get inLeapYear(){return Dt(this,"inLeapYear")}with(t,n=void 0){if(b(this,F),!W(t))throw new TypeError("invalid argument");ln(t);const r=m(this,M),i=m(this,q);let o={...vt(r,i.isoDate),...i.time};return o=Ue(r,o,It(r,t,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond"],"partial")),jt(Jn(r,o,I(x(n))),r)}withPlainTime(t=void 0){b(this,F);const n=Cs(t);return jt(P(m(this,q).isoDate,n),m(this,M))}withCalendar(t){b(this,F);const n=or(t);return jt(m(this,q),n)}add(t,n=void 0){return b(this,F),ma("add",this,t,n)}subtract(t,n=void 0){return b(this,F),ma("subtract",this,t,n)}until(t,n=void 0){return b(this,F),aa("until",this,t,n)}since(t,n=void 0){return b(this,F),aa("since",this,t,n)}round(t){if(b(this,F),t===void 0)throw new TypeError("options parameter is required");const n=typeof t=="string"?Ve("smallestUnit",t):x(t),r=hn(n),i=Xt(n,"halfExpand"),o=At(n,"smallestUnit","time",ye,["day"]),s={day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[o];dn(r,s,s===1);const a=m(this,q);return jt(r===1&&o==="nanosecond"?a:so(a,r,o,i),m(this,M))}equals(t){b(this,F);const n=tr(t);return bn(m(this,q),m(n,q))===0&&ie(m(this,M),m(n,M))}toString(t=void 0){b(this,F);const n=x(t),r=Gn(n),i=Vn(n),o=Xt(n,"trunc"),s=At(n,"smallestUnit","time",void 0);if(s==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');const{precision:a,unit:c,increment:u}=Kn(s,i),l=so(m(this,q),u,c,o);return We(l),lr(l,m(this,M),a,r)}toJSON(){return b(this,F),lr(m(this,q),m(this,M),"auto")}toLocaleString(t=void 0,n=void 0){return b(this,F),new Zt(t,n).format(this)}valueOf(){Se("PlainDateTime")}toZonedDateTime(t,n=void 0){b(this,F);const r=_t(t),i=Wn(x(n));return ct(ut(r,m(this,q),i),r,m(this,M))}toPlainDate(){return b(this,F),bt(m(this,q).isoDate,m(this,M))}toPlainTime(){return b(this,F),_e(m(this,q).time)}static from(t,n=void 0){return tr(t,n)}static compare(t,n){const r=tr(t),i=tr(n);return bn(m(r,q),m(i,q))}}function Dt(e,t){b(e,F);const n=m(e,q).isoDate;return Qn(e).isoToDate(n,{[t]:!0})[t]}function En(e,t){return b(e,F),m(e,q).time[t]}pe(yo,"Temporal.PlainDateTime");class Dn{constructor(t=0,n=0,r=0,i=0,o=0,s=0,a=0,c=0,u=0,l=0){const h=t===void 0?0:qt(t),d=n===void 0?0:qt(n),g=r===void 0?0:qt(r),p=i===void 0?0:qt(i),w=o===void 0?0:qt(o),y=s===void 0?0:qt(s),v=a===void 0?0:qt(a),_=c===void 0?0:qt(c),T=u===void 0?0:qt(u),D=l===void 0?0:qt(l);ni(h,d,g,p,w,y,v,_,T,D),ge(this),N(this,lt,h),N(this,ht,d),N(this,Ct,g),N(this,dt,p),N(this,ft,w),N(this,mt,y),N(this,gt,v),N(this,pt,_),N(this,yt,T),N(this,$t,D)}get years(){return b(this,G),m(this,lt)}get months(){return b(this,G),m(this,ht)}get weeks(){return b(this,G),m(this,Ct)}get days(){return b(this,G),m(this,dt)}get hours(){return b(this,G),m(this,ft)}get minutes(){return b(this,G),m(this,mt)}get seconds(){return b(this,G),m(this,gt)}get milliseconds(){return b(this,G),m(this,pt)}get microseconds(){return b(this,G),m(this,yt)}get nanoseconds(){return b(this,G),m(this,$t)}get sign(){return b(this,G),Jr(this)}get blank(){return b(this,G),Jr(this)===0}with(t){b(this,G);const n=Ds(t),{years:r=m(this,lt),months:i=m(this,ht),weeks:o=m(this,Ct),days:s=m(this,dt),hours:a=m(this,ft),minutes:c=m(this,mt),seconds:u=m(this,gt),milliseconds:l=m(this,pt),microseconds:h=m(this,yt),nanoseconds:d=m(this,$t)}=n;return new Dn(r,i,o,s,a,c,u,l,h,d)}negated(){return b(this,G),Nt(this)}abs(){return b(this,G),new Dn(Math.abs(m(this,lt)),Math.abs(m(this,ht)),Math.abs(m(this,Ct)),Math.abs(m(this,dt)),Math.abs(m(this,ft)),Math.abs(m(this,mt)),Math.abs(m(this,gt)),Math.abs(m(this,pt)),Math.abs(m(this,yt)),Math.abs(m(this,$t)))}add(t){return b(this,G),ha("add",this,t)}subtract(t){return b(this,G),ha("subtract",this,t)}round(t){if(b(this,G),t===void 0)throw new TypeError("options parameter is required");const n=we(this),r=typeof t=="string"?Ve("smallestUnit",t):x(t);let i=At(r,"largestUnit","datetime",void 0,["auto"]),{plainRelativeTo:o,zonedRelativeTo:s}=qi(r);const a=hn(r),c=Xt(r,"halfExpand");let u=At(r,"smallestUnit","datetime",void 0),l=!0;u||(l=!1,u="nanosecond");const h=ve(n,u);let d=!0;if(i||(d=!1,i=h),i==="auto"&&(i=h),!l&&!d)throw new RangeError("at least one of smallestUnit or largestUnit is required");if(ve(i,u)!==i)throw new RangeError(`largestUnit ${i} cannot be smaller than smallestUnit ${u}`);const g={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[u];if(g!==void 0&&dn(a,g,!1),a>1&&be(u)==="date"&&i!==u)throw new RangeError("For calendar units with roundingIncrement > 1, use largestUnit = smallestUnit");if(s){let w=pn(this);const y=m(s,S),v=m(s,M),_=m(s,$);return w=ia(_,fr(_,y,v,w),y,v,i,a,u,c),be(i)==="date"&&(i="hour"),Ft(w,i)}if(o){let w=se(this);const y=vn({hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0},w.time),v=m(o,A),_=m(o,M),T=Pt(_,v,at(w.date,y.deltaDays),"constrain");return w=ra(P(v,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),P(T,y),_,i,a,u,c),Ft(w,i)}if(ne(n))throw new RangeError(`a starting point is required for ${n}s balancing`);if(ne(i))throw new RangeError(`a starting point is required for ${i}s balancing`);let p=se(this);if(u==="day"){const{quotient:w,remainder:y}=p.time.divmod(jr);let v=p.date.days+w+mr(y,"day");v=Pe(v,a,c),p=Me({years:0,months:0,weeks:0,days:v},L.ZERO)}else p=Me({years:0,months:0,weeks:0,days:0},ii(p.time,a,u,c));return Ft(p,i)}total(t){if(b(this,G),t===void 0)throw new TypeError("options argument is required");const n=typeof t=="string"?Ve("unit",t):x(t);let{plainRelativeTo:r,zonedRelativeTo:i}=qi(n);const o=At(n,"unit","datetime",ye);if(i){const a=pn(this),c=m(i,S),u=m(i,M),l=m(i,$);return(function(h,d,g,p,w){return be(w)==="time"?mr(L.fromEpochNsDiff(d,h),w):na(ta(h,d,g,p,w),d,Ut(g,h),g,p,w)})(l,fr(l,c,u,a),c,u,o)}if(r){const a=se(this);let c=vn({hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0},a.time);const u=m(r,A),l=m(r,M),h=Pt(l,u,at(a.date,c.deltaDays),"constrain");return(function(d,g,p,w){if(bn(d,g)==0)return 0;We(d),We(g);const y=Js(d,g,p,w);return w==="nanosecond"?f.toNumber(y.time.totalNs):na(y,st(g),d,null,p,w)})(P(u,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),P(h,c),l,o)}const s=we(this);if(ne(s))throw new RangeError(`a starting point is required for ${s}s total`);if(ne(o))throw new RangeError(`a starting point is required for ${o}s total`);return mr(se(this).time,o)}toString(t=void 0){b(this,G);const n=x(t),r=Vn(n),i=Xt(n,"trunc"),o=At(n,"smallestUnit","time",void 0);if(o==="hour"||o==="minute")throw new RangeError('smallestUnit must be a time unit other than "hours" or "minutes"');const{precision:s,unit:a,increment:c}=Kn(o,r);if(a==="nanosecond"&&c===1)return Kr(this,s);const u=we(this);let l=pn(this);const h=ii(l.time,c,a,i);return l=Me(l.date,h),Kr(Ft(l,ve(u,"second")),s)}toJSON(){return b(this,G),Kr(this,"auto")}toLocaleString(t=void 0,n=void 0){if(b(this,G),typeof Intl.DurationFormat=="function"){const r=new Intl.DurationFormat(t,n);return ka.call(r,this)}return console.warn("Temporal.Duration.prototype.toLocaleString() requires Intl.DurationFormat."),Kr(this,"auto")}valueOf(){Se("Duration")}static from(t){return zt(t)}static compare(t,n,r=void 0){const i=zt(t),o=zt(n),s=x(r),{plainRelativeTo:a,zonedRelativeTo:c}=qi(s);if(m(i,lt)===m(o,lt)&&m(i,ht)===m(o,ht)&&m(i,Ct)===m(o,Ct)&&m(i,dt)===m(o,dt)&&m(i,ft)===m(o,ft)&&m(i,mt)===m(o,mt)&&m(i,gt)===m(o,gt)&&m(i,pt)===m(o,pt)&&m(i,yt)===m(o,yt)&&m(i,$t)===m(o,$t))return 0;const u=we(i),l=we(o),h=pn(i),d=pn(o);if(c&&(be(u)==="date"||be(l)==="date")){const v=m(c,S),_=m(c,M),T=m(c,$),D=fr(T,v,_,h),E=fr(T,v,_,d);return Rt(f.toNumber(f.subtract(D,E)))}let g=h.date.days,p=d.date.days;if(ne(u)||ne(l)){if(!a)throw new RangeError("A starting point is required for years, months, or weeks comparison");g=Ks(h.date,a),p=Ks(d.date,a)}const w=h.time.add24HourDays(g),y=d.time.add24HourDays(p);return w.cmp(y)}}pe(Dn,"Temporal.Duration");class wo{constructor(t,n,r="iso8601",i=1972){const o=k(t),s=k(n),a=Mt(r===void 0?"iso8601":J(r)),c=k(i);qe(c,o,s),ks(this,{year:c,month:o,day:s},a)}get monthCode(){return Na(this,"monthCode")}get day(){return Na(this,"day")}get calendarId(){return b(this,Yt),m(this,M)}with(t,n=void 0){if(b(this,Yt),!W(t))throw new TypeError("invalid argument");ln(t);const r=m(this,M);let i=vt(r,m(this,A),"month-day");return i=Ue(r,i,It(r,t,["year","month","monthCode","day"],[],"partial")),fn(Gr(r,i,I(x(n))),r)}equals(t){b(this,Yt);const n=xs(t);return ae(m(this,A),m(n,A))===0&&ie(m(this,M),m(n,M))}toString(t=void 0){return b(this,Yt),Fs(this,Gn(x(t)))}toJSON(){return b(this,Yt),Fs(this)}toLocaleString(t=void 0,n=void 0){return b(this,Yt),new Zt(t,n).format(this)}valueOf(){Se("PlainMonthDay")}toPlainDate(t){if(b(this,Yt),!W(t))throw new TypeError("argument should be an object");const n=m(this,M);return bt(Oe(n,Ue(n,vt(n,m(this,A),"month-day"),It(n,t,["year"],[],[])),"constrain"),n)}static from(t,n=void 0){return xs(t,n)}}function Na(e,t){b(e,Yt);const n=m(e,A);return Qn(e).isoToDate(n,{[t]:!0})[t]}function vo(e){return Ut(e,uo())}pe(wo,"Temporal.PlainMonthDay");const Ra={instant:()=>re(uo()),plainDateTimeISO:(e=gr())=>jt(vo(_t(e)),"iso8601"),plainDateISO:(e=gr())=>bt(vo(_t(e)).isoDate,"iso8601"),plainTimeISO:(e=gr())=>_e(vo(_t(e)).time),timeZoneId:()=>gr(),zonedDateTimeISO:(e=gr())=>{const t=_t(e);return ct(uo(),t,"iso8601")},[Symbol.toStringTag]:"Temporal.Now"};Object.defineProperty(Ra,Symbol.toStringTag,{value:"Temporal.Now",writable:!1,enumerable:!1,configurable:!0});class Mr{constructor(t=0,n=0,r=0,i=0,o=0,s=0){const a=t===void 0?0:k(t),c=n===void 0?0:k(n),u=r===void 0?0:k(r),l=i===void 0?0:k(i),h=o===void 0?0:k(o),d=s===void 0?0:k(s);ei(a,c,u,l,h,d),Ns(this,{hour:a,minute:c,second:u,millisecond:l,microsecond:h,nanosecond:d})}get hour(){return b(this,K),m(this,X).hour}get minute(){return b(this,K),m(this,X).minute}get second(){return b(this,K),m(this,X).second}get millisecond(){return b(this,K),m(this,X).millisecond}get microsecond(){return b(this,K),m(this,X).microsecond}get nanosecond(){return b(this,K),m(this,X).nanosecond}with(t,n=void 0){if(b(this,K),!W(t))throw new TypeError("invalid argument");ln(t);const r=Xi(t,"partial"),i=Xi(this);let{hour:o,minute:s,second:a,millisecond:c,microsecond:u,nanosecond:l}=Object.assign(i,r);const h=I(x(n));return{hour:o,minute:s,second:a,millisecond:c,microsecond:u,nanosecond:l}=qr(o,s,a,c,u,l,h),new Mr(o,s,a,c,u,l)}add(t){return b(this,K),ga("add",this,t)}subtract(t){return b(this,K),ga("subtract",this,t)}until(t,n=void 0){return b(this,K),ca("until",this,t,n)}since(t,n=void 0){return b(this,K),ca("since",this,t,n)}round(t){if(b(this,K),t===void 0)throw new TypeError("options parameter is required");const n=typeof t=="string"?Ve("smallestUnit",t):x(t),r=hn(n),i=Xt(n,"halfExpand"),o=At(n,"smallestUnit","time",ye);return dn(r,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[o],!1),_e(ao(m(this,X),r,o,i))}equals(t){b(this,K);const n=Le(t);return co(m(this,X),m(n,X))===0}toString(t=void 0){b(this,K);const n=x(t),r=Vn(n),i=Xt(n,"trunc"),o=At(n,"smallestUnit","time",void 0);if(o==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');const{precision:s,unit:a,increment:c}=Kn(o,r);return Us(ao(m(this,X),c,a,i),s)}toJSON(){return b(this,K),Us(m(this,X),"auto")}toLocaleString(t=void 0,n=void 0){return b(this,K),new Zt(t,n).format(this)}valueOf(){Se("PlainTime")}static from(t,n=void 0){return Le(t,n)}static compare(t,n){const r=Le(t),i=Le(n);return co(m(r,X),m(i,X))}}pe(Mr,"Temporal.PlainTime");class bo{constructor(t,n,r="iso8601",i=1){const o=k(t),s=k(n),a=Mt(r===void 0?"iso8601":J(r)),c=k(i);qe(o,s,c),Rs(this,{year:o,month:s,day:c},a)}get year(){return xe(this,"year")}get month(){return xe(this,"month")}get monthCode(){return xe(this,"monthCode")}get calendarId(){return b(this,ot),m(this,M)}get era(){return xe(this,"era")}get eraYear(){return xe(this,"eraYear")}get daysInMonth(){return xe(this,"daysInMonth")}get daysInYear(){return xe(this,"daysInYear")}get monthsInYear(){return xe(this,"monthsInYear")}get inLeapYear(){return xe(this,"inLeapYear")}with(t,n=void 0){if(b(this,ot),!W(t))throw new TypeError("invalid argument");ln(t);const r=m(this,M);let i=vt(r,m(this,A),"year-month");return i=Ue(r,i,It(r,t,["year","month","monthCode"],[],"partial")),mn(ar(r,i,I(x(n))),r)}add(t,n=void 0){return b(this,ot),pa("add",this,t,n)}subtract(t,n=void 0){return b(this,ot),pa("subtract",this,t,n)}until(t,n=void 0){return b(this,ot),ua("until",this,t,n)}since(t,n=void 0){return b(this,ot),ua("since",this,t,n)}equals(t){b(this,ot);const n=nr(t);return ae(m(this,A),m(n,A))===0&&ie(m(this,M),m(n,M))}toString(t=void 0){return b(this,ot),Hs(this,Gn(x(t)))}toJSON(){return b(this,ot),Hs(this)}toLocaleString(t=void 0,n=void 0){return b(this,ot),new Zt(t,n).format(this)}valueOf(){Se("PlainYearMonth")}toPlainDate(t){if(b(this,ot),!W(t))throw new TypeError("argument should be an object");const n=m(this,M);return bt(Oe(n,Ue(n,vt(n,m(this,A),"year-month"),It(n,t,["day"],[],[])),"constrain"),n)}static from(t,n=void 0){return nr(t,n)}static compare(t,n){const r=nr(t),i=nr(n);return ae(m(r,A),m(i,A))}}function xe(e,t){b(e,ot);const n=m(e,A);return Qn(e).isoToDate(n,{[t]:!0})[t]}pe(bo,"Temporal.PlainYearMonth");const Gu=Zt.prototype.resolvedOptions;class _o{constructor(t,n,r="iso8601"){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");const i=oi(t);let o=J(n);const{tzName:s,offsetMinutes:a}=Ne(o);if(a===void 0){const c=Qr(s);if(!c)throw new RangeError(`unknown time zone ${s}`);o=c.identifier}else o=Vi(a);Os(this,i,o,Mt(r===void 0?"iso8601":J(r)))}get calendarId(){return b(this,O),m(this,M)}get timeZoneId(){return b(this,O),m(this,S)}get year(){return xt(this,"year")}get month(){return xt(this,"month")}get monthCode(){return xt(this,"monthCode")}get day(){return xt(this,"day")}get hour(){return xn(this,"hour")}get minute(){return xn(this,"minute")}get second(){return xn(this,"second")}get millisecond(){return xn(this,"millisecond")}get microsecond(){return xn(this,"microsecond")}get nanosecond(){return xn(this,"nanosecond")}get era(){return xt(this,"era")}get eraYear(){return xt(this,"eraYear")}get epochMilliseconds(){return b(this,O),Ht(m(this,$),"floor")}get epochNanoseconds(){return b(this,O),wa(m(this,$))}get dayOfWeek(){return xt(this,"dayOfWeek")}get dayOfYear(){return xt(this,"dayOfYear")}get weekOfYear(){return xt(this,"weekOfYear")?.week}get yearOfWeek(){return xt(this,"weekOfYear")?.year}get hoursInDay(){b(this,O);const t=m(this,S),n=he(this).isoDate,r=kt(n.year,n.month,n.day+1),i=Ye(t,n),o=Ye(t,r);return mr(L.fromEpochNsDiff(o,i),"hour")}get daysInWeek(){return xt(this,"daysInWeek")}get daysInMonth(){return xt(this,"daysInMonth")}get daysInYear(){return xt(this,"daysInYear")}get monthsInYear(){return xt(this,"monthsInYear")}get inLeapYear(){return xt(this,"inLeapYear")}get offset(){return b(this,O),Wi(Te(m(this,S),m(this,$)))}get offsetNanoseconds(){return b(this,O),Te(m(this,S),m(this,$))}with(t,n=void 0){if(b(this,O),!W(t))throw new TypeError("invalid zoned-date-time-like");ln(t);const r=m(this,M),i=m(this,S),o=Te(i,m(this,$)),s=he(this);let a={...vt(r,s.isoDate),...s.time,offset:Wi(o)};a=Ue(r,a,It(r,t,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond","offset"],"partial"));const c=x(n),u=Wn(c),l=Xr(c,"prefer"),h=Jn(r,a,I(c)),d=gn(a.offset);return ct(Wr(h.isoDate,h.time,"option",d,i,u,l,!1),i,r)}withPlainTime(t=void 0){b(this,O);const n=m(this,S),r=m(this,M),i=he(this).isoDate;let o;return o=t===void 0?Ye(n,i):ut(n,P(i,m(Le(t),X)),"compatible"),ct(o,n,r)}withTimeZone(t){b(this,O);const n=_t(t);return ct(m(this,$),n,m(this,M))}withCalendar(t){b(this,O);const n=or(t);return ct(m(this,$),m(this,S),n)}add(t,n=void 0){return b(this,O),ya("add",this,t,n)}subtract(t,n=void 0){return b(this,O),ya("subtract",this,t,n)}until(t,n=void 0){return b(this,O),la("until",this,t,n)}since(t,n=void 0){return b(this,O),la("since",this,t,n)}round(t){if(b(this,O),t===void 0)throw new TypeError("options parameter is required");const n=typeof t=="string"?Ve("smallestUnit",t):x(t),r=hn(n),i=Xt(n,"halfExpand"),o=At(n,"smallestUnit","time",ye,["day"]),s={day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[o];if(dn(r,s,s===1),o==="nanosecond"&&r===1)return ct(m(this,$),m(this,S),m(this,M));const a=m(this,S),c=m(this,$),u=he(this);let l;if(o==="day"){const h=u.isoDate,d=kt(h.year,h.month,h.day+1),g=Ye(a,h),p=Ye(a,d),w=f.subtract(p,g);l=L.fromEpochNsDiff(c,g).round(w,i).addToEpochNs(g)}else{const h=so(u,r,o,i),d=Te(a,c);l=Wr(h.isoDate,h.time,"option",d,a,"compatible","prefer",!1)}return ct(l,a,m(this,M))}equals(t){b(this,O);const n=rr(t),r=m(this,$),i=m(n,$);return!!f.equal(f.BigInt(r),f.BigInt(i))&&!!Is(m(this,S),m(n,S))&&ie(m(this,M),m(n,M))}toString(t=void 0){b(this,O);const n=x(t),r=Gn(n),i=Vn(n),o=(function(d){return Ee(d,"offset",["auto","never"],"auto")})(n),s=Xt(n,"trunc"),a=At(n,"smallestUnit","time",void 0);if(a==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');const c=(function(d){return Ee(d,"timeZoneName",["auto","never","critical"],"auto")})(n),{precision:u,unit:l,increment:h}=Kn(a,i);return Zs(this,u,r,c,o,{unit:l,increment:h,roundingMode:s})}toLocaleString(t=void 0,n=void 0){b(this,O);const r=x(n),i=Object.create(null);if((function(c,u,l,h){if(u==null)return;const d=Reflect.ownKeys(u);for(let g=0;g<d.length;g++){const p=d[g];if(!l.some((w=>Object.is(w,p)))&&Object.prototype.propertyIsEnumerable.call(u,p)){const w=u[p];c[p]=w}}})(i,r,["timeZone"]),r.timeZone!==void 0)throw new TypeError("ZonedDateTime toLocaleString does not accept a timeZone option");if(i.year===void 0&&i.month===void 0&&i.day===void 0&&i.era===void 0&&i.weekday===void 0&&i.dateStyle===void 0&&i.hour===void 0&&i.minute===void 0&&i.second===void 0&&i.fractionalSecondDigits===void 0&&i.timeStyle===void 0&&i.dayPeriod===void 0&&i.timeZoneName===void 0&&(i.timeZoneName="short"),i.timeZone=m(this,S),qs(i.timeZone))throw new RangeError("toLocaleString does not currently support offset time zones");const o=new Zt(t,i),s=Gu.call(o).calendar,a=m(this,M);if(a!=="iso8601"&&s!=="iso8601"&&!ie(s,a))throw new RangeError(`cannot format ZonedDateTime with calendar ${a} in locale with calendar ${s}`);return o.format(re(m(this,$)))}toJSON(){return b(this,O),Zs(this,"auto")}valueOf(){Se("ZonedDateTime")}startOfDay(){b(this,O);const t=m(this,S);return ct(Ye(t,he(this).isoDate),t,m(this,M))}getTimeZoneTransition(t){b(this,O);const n=m(this,S);if(t===void 0)throw new TypeError("options parameter is required");const r=Ee(typeof t=="string"?Ve("direction",t):x(t),"direction",["next","previous"],ye);if(r===void 0)throw new TypeError("direction option is required");if(qs(n)||n==="UTC")return null;const i=m(this,$),o=r==="next"?Qi(n,i):Bi(n,i);return o===null?null:ct(o,n,m(this,M))}toInstant(){return b(this,O),re(m(this,$))}toPlainDate(){return b(this,O),bt(he(this).isoDate,m(this,M))}toPlainTime(){return b(this,O),_e(he(this).time)}toPlainDateTime(){return b(this,O),jt(he(this),m(this,M))}static from(t,n=void 0){return rr(t,n)}static compare(t,n){const r=rr(t),i=rr(n),o=m(r,$),s=m(i,$);return f.lessThan(f.BigInt(o),f.BigInt(s))?-1:f.greaterThan(f.BigInt(o),f.BigInt(s))?1:0}}function he(e){return Ut(m(e,S),m(e,$))}function xt(e,t){b(e,O);const n=he(e).isoDate;return Qn(e).isoToDate(n,{[t]:!0})[t]}function xn(e,t){return b(e,O),he(e).time[t]}pe(_o,"Temporal.ZonedDateTime");var Vu=Object.freeze({__proto__:null,Duration:Dn,Instant:go,Now:Ra,PlainDate:po,PlainDateTime:yo,PlainMonthDay:wo,PlainTime:Mr,PlainYearMonth:bo,ZonedDateTime:_o});const Ku=[go,po,yo,Dn,wo,Mr,bo,_o];for(const e of Ku){const t=Object.getOwnPropertyDescriptor(e,"prototype");(t.configurable||t.enumerable||t.writable)&&(t.configurable=!1,t.enumerable=!1,t.writable=!1,Object.defineProperty(e,"prototype",t))}function Q(e){if(e==null)throw new Error('normalizeTime received undefined or null input. Check that all events have a "time" property and all periods have a "startTime" property.');if(typeof e=="string"){const t=/Z|[+-]\d{2}:\d{2}$/.test(e);let n;if(t)n=Temporal.Instant.from(e);else try{n=Temporal.PlainDateTime.from(e).toZonedDateTime("UTC").toInstant()}catch{n=Temporal.PlainDate.from(e).toZonedDateTime("UTC").toInstant()}return ui(n)}if(e instanceof Temporal.Instant)return ui(e);if("year"in e&&"era"in e)return e.era==="CE"?e.year:-e.year;if("value"in e&&"unit"in e){const t=Temporal.Now.plainDateISO().year;return e.unit==="mya"?-(e.value*1e6):t-e.value}if("localTime"in e&&"timezone"in e){const t=Temporal.PlainDateTime.from(e.localTime).toZonedDateTime(e.timezone);return ui(t.toInstant())}throw new Error(`Unsupported time input format: ${JSON.stringify(e)}`)}function ui(e){const n=e.toZonedDateTimeISO("UTC").year,r=Temporal.ZonedDateTime.from({year:n,month:1,day:1,hour:0,minute:0,second:0,timeZone:"UTC"}),o=Temporal.ZonedDateTime.from({year:n+1,month:1,day:1,hour:0,minute:0,second:0,timeZone:"UTC"}).epochNanoseconds-r.epochNanoseconds,s=e.epochNanoseconds-r.toInstant().epochNanoseconds,a=Number(s)/Number(o);return n+a}function Qu(e,t){if(e<-1e6)return`${(Math.abs(e)/1e6).toFixed(1)} MYA`;if(e<-1e4)return`${(Math.abs(e)/1e3).toFixed(1)} KYA`;if(e<0)return`${Math.abs(Math.floor(e))} BCE`;if(e<1e3)return`${Math.floor(e)} CE`;{const n=Math.floor(e);return t==="precise"?Bu(e).toString():t==="historical"?`${n} CE`:n.toString()}}function Bu(e){const t=Math.floor(e),n=e-t,r=Temporal.ZonedDateTime.from({year:t,month:1,day:1,hour:0,minute:0,second:0,timeZone:"UTC"}),o=Temporal.ZonedDateTime.from({year:t+1,month:1,day:1,hour:0,minute:0,second:0,timeZone:"UTC"}).epochNanoseconds-r.epochNanoseconds,s=BigInt(Math.round(n*Number(o))),a=r.epochNanoseconds+s;return Temporal.Instant.fromEpochNanoseconds(a)}function Ju(e,t){const n=t-e;return n>1e6||e<-1e6?"geological":n>1e4||e<-1e4?"prehistoric":n>1e3?"historical":n>1?"modern":"precise"}function La(){return ui(Temporal.Now.instant())}function Oa(e){return e.endTime===void 0||e.endTime===null}function Er(e,t=!1){return e==null?t?1/0:La():Q(e)}function tl(e,t){const n=new Map;e.forEach(y=>{n.set(y.id,{name:y.name,startTime:Q(y.startTime),endTime:Er(y.endTime,!0)})});const r=t.filter(y=>y.type==="defined"),i=new Map,o=new Map;r.forEach(y=>{i.has(y.fromId)||i.set(y.fromId,[]),i.get(y.fromId).push(y.toId),o.has(y.toId)||o.set(y.toId,[]),o.get(y.toId).push(y.fromId)});const s=[];new Set([...r.map(y=>y.fromId),...r.map(y=>y.toId)]).forEach(y=>{o.has(y)||s.push(y)});const c=new Map;function u(y){const v=new Set;let _=[y];for(;_.length>0;){const T=[];for(const D of _){if(v.has(D))continue;v.add(D);const E=o.get(D)||[];if(E.length===0){const R=n.get(D);if(R)return{rootId:D,rootStartTime:R.startTime}}else T.push(...E)}_=T}return null}o.forEach((y,v)=>{if(y.length>1){let _=null;for(const T of y){const D=u(T);D&&(!_||D.rootStartTime<_.rootStartTime)&&(_=D)}_&&c.set(v,_.rootId)}});const l=new Set;function h(y,v){const _=n.get(y);if(!_||c.has(y)&&c.get(y)!==v||l.has(y))return null;l.add(y);const T={id:y,name:_.name,startTime:_.startTime,endTime:_.endTime,children:[]},D=i.get(y)||[];for(const E of D){const R=h(E,v);R&&T.children.push(R)}return T.children.sort((E,R)=>E.startTime-R.startTime),T}const d=[],g=new Set;function p(y,v){v.add(y.id),y.children.forEach(_=>p(_,v))}for(const y of s){l.clear();const v=h(y,y);if(v){const _=new Set;p(v,_),d.push({root:v,allNodeIds:_}),_.forEach(T=>g.add(T))}}d.sort((y,v)=>y.root.startTime-v.root.startTime);const w=new Map;return n.forEach((y,v)=>{g.has(v)||w.set(v,y)}),{trees:d,unconnectedPeriods:w,periodMap:n}}function To(e){let t=e.endTime;for(const n of e.children){const r=To(n);r>t&&(t=r)}return t}function Mo(e){const t=[e],n=e.children.filter(a=>a.startTime>=e.endTime);if(n.length===0)return t;let r=n[0],i=r.startTime,o=To(r);for(let a=1;a<n.length;a++){const c=n[a],u=To(c);c.startTime<i?(r=c,i=c.startTime,o=u):c.startTime===i&&u>o&&(r=c,o=u)}const s=Mo(r);return t.push(...s),t}function el(e){const t=new Set(e.map(r=>r.id)),n=[];for(const r of e)for(const i of r.children)if(!t.has(i.id)){const o=Mo(i);n.push(o)}return n}function nl(e,t,n,r){return e<r&&n<t}function Ya(e,t,n,r){const i=r.find(o=>o.lane===n&&nl(e,t,o.startTime,o.endTime));return i?i.id:null}function Ia(e,t,n,r){for(const i of e){const o=Ya(i.startTime,i.endTime,t,n);if(o)return r.get(o),!1}return!0}function Eo(e,t,n){for(const r of e)n.push({id:r.id,lane:t,startTime:r.startTime,endTime:r.endTime})}function rl(e,t,n,r){const i=[],o=Mo(e.root);let s=t;const a=100;let c=0;for(;c<a;){if(s<0){s=0,c++;continue}const w=[...n,...i];if(Ia(o,s,w,r)){Eo(o,s,i);break}s++,c++}const u=[{trunk:o,parentLane:s,isAboveParent:null}],l=new Map;l.set(o[0].id,s);let h=0;for(;h<u.length;){const{trunk:w,parentLane:y,isAboveParent:v}=u[h],_=v===null,T=el(w);T.length>0;let D=1,E=1,R=_?!0:v;for(let H=0;H<T.length;H++){const U=T[H],j=U[0].id;let Z,C=!1;for(c=0;!C&&c<a;){if(R?Z=y+D:Z=y-E,Z<0){s++,i.length=0,Eo(o,s,i),u.length=1,u[0]={trunk:o,parentLane:s,isAboveParent:null},l.clear(),l.set(o[0].id,s),h=-1;break}const Y=[...n,...i];if(Ia(U,Z,Y,r)){Eo(U,Z,i),C=!0,l.set(j,Z);const z=Z>y;u.push({trunk:U,parentLane:Z,isAboveParent:z}),R?D++:E++,_&&(R=!R)}else R?D++:E++;c++}}h++}const d=i.map(w=>w.lane),g=d.length>0?Math.min(...d):s,p=d.length>0?Math.max(...d):s;return{placements:i,minLane:g,maxLane:p}}function il(e,t){const n=[],r=Array.from(e.entries()).sort((i,o)=>i[1].startTime-o[1].startTime);for(const[i,o]of r){let s=0;const a=[...t,...n];for(;Ya(o.startTime,o.endTime,s,a);)s++;n.push({id:i,lane:s,startTime:o.startTime,endTime:o.endTime})}return n}const ol={name:"Succession-based",description:"Periods that succeed each other are placed on the same row",layout(e,t=[]){if(e.length===0)return[];const{trees:n,unconnectedPeriods:r,periodMap:i}=tl(e,t);n.forEach((u,l)=>{});const o=[];let s=0;for(let u=0;u<n.length;u++){const l=n[u],{placements:h,maxLane:d}=rl(l,s,o,i);o.push(...h),s=d+1}const a=il(r,o);o.push(...a);const c=o.map(u=>({itemId:u.id,lane:u.lane,startTime:u.startTime,endTime:u.endTime,type:"period"}));return c.forEach(u=>{}),c}};function Pa(e,t){return e<t}function sl(e,t){const n=[1,0,2];for(const o of n)if(!Pa(e,t[o]))return o;let r=1,i=t[1];for(let o=0;o<3;o++)t[o]<i&&(r=o,i=t[o]);return r}function al(e,t=0,n=[]){const r=[],i=new Map;for(const l of n)i.set(l.itemId,l.lane);const o=[],s=[];for(const l of e)l.relates_to&&i.has(l.relates_to)?o.push(l):s.push(l);const a=new Map;for(const l of o){const h=i.get(l.relates_to),d=Q(l.time);a.has(h)||a.set(h,[]),a.get(h).push({event:l,time:d})}for(const[l,h]of a){h.sort((g,p)=>g.time-p.time);const d=[-1/0,-1/0,-1/0];for(const{event:g,time:p}of h){const w=sl(p,d);d[w]=p,r.push({itemId:g.id,lane:l,startTime:p,endTime:p,type:"event",subLane:w})}}const c=s.map(l=>{const h=Q(l.time);return{id:l.id,time:h}});c.sort((l,h)=>l.time-h.time);const u=[];for(const l of c){let h=-1;for(let d=0;d<Math.min(u.length,3);d++)if(!Pa(l.time,u[d].endTime)){h=d;break}if(h===-1&&u.length<3)h=u.length,u.push({endTime:l.time});else if(h===-1){let d=0,g=u[0].endTime;for(let p=1;p<3;p++)u[p].endTime<g&&(d=p,g=u[p].endTime);h=d,u[h].endTime=l.time}else u[h].endTime=l.time;r.push({itemId:l.id,lane:h+t,startTime:l.time,endTime:l.time,type:"event",subLane:h})}return r}const Sa={succession:ol},za="succession";function ja(e,t,n=za,r=[]){const i=Sa[n];if(!i)throw new Error(`Unknown period layout algorithm: ${n}`);const o=i.layout(e,r),a=(o.length>0?Math.max(...o.map(u=>u.lane)):-1)+1,c=al(t,a,o);return[...o,...c]}function cl(e){return e.length===0?0:Math.max(...e.map(t=>t.lane))+1}const Cn=-138e8;function ul(e){const t=[],n=[],r=[...e.events.map(o=>o.id),...e.periods.map(o=>o.id),...e.connectors.map(o=>o.id)],i=r.filter((o,s)=>r.indexOf(o)!==s);i.length>0&&t.push({type:"error",message:`Duplicate IDs found: ${[...new Set(i)].join(", ")}`});for(const o of e.periods)try{const s=Q(o.startTime);if(!Oa(o)){const c=Er(o.endTime);s>c&&t.push({type:"error",message:`Period "${o.name}" has start time after end time`,itemId:o.id}),c<Cn&&t.push({type:"error",message:`Period "${o.name}" ends before the Big Bang (13.8 billion years ago). End time: ${c.toExponential(2)}`,itemId:o.id})}s<Cn&&t.push({type:"error",message:`Period "${o.name}" starts before the Big Bang (13.8 billion years ago). Start time: ${s.toExponential(2)}`,itemId:o.id})}catch(s){t.push({type:"error",message:`Period "${o.name}" has invalid time format: ${s instanceof Error?s.message:String(s)}`,itemId:o.id})}for(const o of e.connectors){const s=e.periods.find(c=>c.id===o.fromId),a=e.periods.find(c=>c.id===o.toId);if(!s){t.push({type:"error",message:`Connector "${o.id}" references non-existent period: ${o.fromId}`,itemId:o.id});continue}if(!a){t.push({type:"error",message:`Connector "${o.id}" references non-existent period: ${o.toId}`,itemId:o.id});continue}try{if(!Oa(a)){const c=Q(s.startTime),u=Er(a.endTime);if(c>u){const l=c-u;n.push({type:"warning",message:`Connector "${o.id}" connects "${s.name}"  "${a.name}", but "${s.name}" starts ${l.toFixed(0)} years after "${a.name}" ends. The periods don't overlap in time.`,itemId:o.id})}}}catch{}}for(const o of e.events)try{const s=Q(o.time);s<Cn&&t.push({type:"error",message:`Event "${o.name}" is set before the Big Bang (13.8 billion years ago). Time: ${s.toExponential(2)}`,itemId:o.id})}catch(s){t.push({type:"error",message:`Event "${o.name}" has invalid time format: ${s instanceof Error?s.message:String(s)}`,itemId:o.id})}return{valid:t.length===0,errors:t,warnings:n}}function ll(e){const t=[];if(e.valid&&e.warnings.length===0)return t.push(" Timeline data is valid"),t.join(`
`);if(e.errors.length>0){t.push(" Timeline validation failed:"),t.push(""),t.push("Errors:");for(const n of e.errors)t.push(`   ${n.message}`)}if(e.warnings.length>0){t.length>0&&t.push(""),t.push("Warnings:");for(const n of e.warnings)t.push(`   ${n.message}`)}return t.join(`
`)}function li(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function hl(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ua(e){let t,n,r;e.length!==2?(t=li,n=(a,c)=>li(e(a),c),r=(a,c)=>e(a)-c):(t=e===li||e===hl?e:dl,n=e,r=e);function i(a,c,u=0,l=a.length){if(u<l){if(t(c,c)!==0)return l;do{const h=u+l>>>1;n(a[h],c)<0?u=h+1:l=h}while(u<l)}return u}function o(a,c,u=0,l=a.length){if(u<l){if(t(c,c)!==0)return l;do{const h=u+l>>>1;n(a[h],c)<=0?u=h+1:l=h}while(u<l)}return u}function s(a,c,u=0,l=a.length){const h=i(a,c,u,l-1);return h>u&&r(a[h-1],c)>-r(a[h],c)?h-1:h}return{left:i,center:s,right:o}}function dl(){return 0}function fl(e){return e===null?NaN:+e}const ml=Ua(li).right;Ua(fl).center;const gl=Math.sqrt(50),pl=Math.sqrt(10),yl=Math.sqrt(2);function hi(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=gl?10:o>=pl?5:o>=yl?2:1;let a,c,u;return i<0?(u=Math.pow(10,-i)/s,a=Math.round(e*u),c=Math.round(t*u),a/u<e&&++a,c/u>t&&--c,u=-u):(u=Math.pow(10,i)*s,a=Math.round(e/u),c=Math.round(t/u),a*u<e&&++a,c*u>t&&--c),c<a&&.5<=n&&n<2?hi(e,t,n*2):[a,c,u]}function wl(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,s]=r?hi(t,e,n):hi(e,t,n);if(!(o>=i))return[];const a=o-i+1,c=new Array(a);if(r)if(s<0)for(let u=0;u<a;++u)c[u]=(o-u)/-s;else for(let u=0;u<a;++u)c[u]=(o-u)*s;else if(s<0)for(let u=0;u<a;++u)c[u]=(i+u)/-s;else for(let u=0;u<a;++u)c[u]=(i+u)*s;return c}function Do(e,t,n){return t=+t,e=+e,n=+n,hi(e,t,n)[2]}function vl(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Do(t,e,n):Do(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}var bl={value:()=>{}};function Fa(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new di(n)}function di(e){this._=e}function _l(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}di.prototype=Fa.prototype={constructor:di,on:function(e,t){var n=this._,r=_l(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=Tl(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=Ha(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Ha(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new di(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Tl(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Ha(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=bl,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var xo="http://www.w3.org/1999/xhtml";const Za={svg:"http://www.w3.org/2000/svg",xhtml:xo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function fi(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Za.hasOwnProperty(t)?{space:Za[t],local:e}:e}function Ml(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===xo&&t.documentElement.namespaceURI===xo?t.createElement(e):t.createElementNS(n,e)}}function El(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function qa(e){var t=fi(e);return(t.local?El:Ml)(t)}function Dl(){}function Co(e){return e==null?Dl:function(){return this.querySelector(e)}}function xl(e){typeof e!="function"&&(e=Co(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),c,u,l=0;l<s;++l)(c=o[l])&&(u=e.call(c,c.__data__,l,o))&&("__data__"in c&&(u.__data__=c.__data__),a[l]=u);return new Wt(r,this._parents)}function Cl(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function $l(){return[]}function Xa(e){return e==null?$l:function(){return this.querySelectorAll(e)}}function Al(e){return function(){return Cl(e.apply(this,arguments))}}function kl(e){typeof e=="function"?e=Al(e):e=Xa(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,c,u=0;u<a;++u)(c=s[u])&&(r.push(e.call(c,c.__data__,u,s)),i.push(c));return new Wt(r,i)}function Wa(e){return function(){return this.matches(e)}}function Ga(e){return function(t){return t.matches(e)}}var Nl=Array.prototype.find;function Rl(e){return function(){return Nl.call(this.children,e)}}function Ll(){return this.firstElementChild}function Ol(e){return this.select(e==null?Ll:Rl(typeof e=="function"?e:Ga(e)))}var Yl=Array.prototype.filter;function Il(){return Array.from(this.children)}function Pl(e){return function(){return Yl.call(this.children,e)}}function Sl(e){return this.selectAll(e==null?Il:Pl(typeof e=="function"?e:Ga(e)))}function zl(e){typeof e!="function"&&(e=Wa(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],c,u=0;u<s;++u)(c=o[u])&&e.call(c,c.__data__,u,o)&&a.push(c);return new Wt(r,this._parents)}function Va(e){return new Array(e.length)}function jl(){return new Wt(this._enter||this._groups.map(Va),this._parents)}function mi(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}mi.prototype={constructor:mi,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ul(e){return function(){return e}}function Fl(e,t,n,r,i,o){for(var s=0,a,c=t.length,u=o.length;s<u;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new mi(e,o[s]);for(;s<c;++s)(a=t[s])&&(i[s]=a)}function Hl(e,t,n,r,i,o,s){var a,c,u=new Map,l=t.length,h=o.length,d=new Array(l),g;for(a=0;a<l;++a)(c=t[a])&&(d[a]=g=s.call(c,c.__data__,a,t)+"",u.has(g)?i[a]=c:u.set(g,c));for(a=0;a<h;++a)g=s.call(e,o[a],a,o)+"",(c=u.get(g))?(r[a]=c,c.__data__=o[a],u.delete(g)):n[a]=new mi(e,o[a]);for(a=0;a<l;++a)(c=t[a])&&u.get(d[a])===c&&(i[a]=c)}function Zl(e){return e.__data__}function ql(e,t){if(!arguments.length)return Array.from(this,Zl);var n=t?Hl:Fl,r=this._parents,i=this._groups;typeof e!="function"&&(e=Ul(e));for(var o=i.length,s=new Array(o),a=new Array(o),c=new Array(o),u=0;u<o;++u){var l=r[u],h=i[u],d=h.length,g=Xl(e.call(l,l&&l.__data__,u,r)),p=g.length,w=a[u]=new Array(p),y=s[u]=new Array(p),v=c[u]=new Array(d);n(l,h,w,y,v,g,t);for(var _=0,T=0,D,E;_<p;++_)if(D=w[_]){for(_>=T&&(T=_+1);!(E=y[T])&&++T<p;);D._next=E||null}}return s=new Wt(s,r),s._enter=a,s._exit=c,s}function Xl(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Wl(){return new Wt(this._exit||this._groups.map(Va),this._parents)}function Gl(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Vl(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),c=0;c<s;++c)for(var u=n[c],l=r[c],h=u.length,d=a[c]=new Array(h),g,p=0;p<h;++p)(g=u[p]||l[p])&&(d[p]=g);for(;c<i;++c)a[c]=n[c];return new Wt(a,this._parents)}function Kl(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Ql(e){e||(e=Bl);function t(h,d){return h&&d?e(h.__data__,d.__data__):!h-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,c=i[o]=new Array(a),u,l=0;l<a;++l)(u=s[l])&&(c[l]=u);c.sort(t)}return new Wt(i,this._parents).order()}function Bl(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Jl(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function th(){return Array.from(this)}function eh(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function nh(){let e=0;for(const t of this)++e;return e}function rh(){return!this.node()}function ih(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function oh(e){return function(){this.removeAttribute(e)}}function sh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ah(e,t){return function(){this.setAttribute(e,t)}}function ch(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function uh(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function lh(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function hh(e,t){var n=fi(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?sh:oh:typeof t=="function"?n.local?lh:uh:n.local?ch:ah)(n,t))}function Ka(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function dh(e){return function(){this.style.removeProperty(e)}}function fh(e,t,n){return function(){this.style.setProperty(e,t,n)}}function mh(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function gh(e,t,n){return arguments.length>1?this.each((t==null?dh:typeof t=="function"?mh:fh)(e,t,n??"")):$n(this.node(),e)}function $n(e,t){return e.style.getPropertyValue(t)||Ka(e).getComputedStyle(e,null).getPropertyValue(t)}function ph(e){return function(){delete this[e]}}function yh(e,t){return function(){this[e]=t}}function wh(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function vh(e,t){return arguments.length>1?this.each((t==null?ph:typeof t=="function"?wh:yh)(e,t)):this.node()[e]}function Qa(e){return e.trim().split(/^|\s+/)}function $o(e){return e.classList||new Ba(e)}function Ba(e){this._node=e,this._names=Qa(e.getAttribute("class")||"")}Ba.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ja(e,t){for(var n=$o(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function tc(e,t){for(var n=$o(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function bh(e){return function(){Ja(this,e)}}function _h(e){return function(){tc(this,e)}}function Th(e,t){return function(){(t.apply(this,arguments)?Ja:tc)(this,e)}}function Mh(e,t){var n=Qa(e+"");if(arguments.length<2){for(var r=$o(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Th:t?bh:_h)(n,t))}function Eh(){this.textContent=""}function Dh(e){return function(){this.textContent=e}}function xh(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ch(e){return arguments.length?this.each(e==null?Eh:(typeof e=="function"?xh:Dh)(e)):this.node().textContent}function $h(){this.innerHTML=""}function Ah(e){return function(){this.innerHTML=e}}function kh(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Nh(e){return arguments.length?this.each(e==null?$h:(typeof e=="function"?kh:Ah)(e)):this.node().innerHTML}function Rh(){this.nextSibling&&this.parentNode.appendChild(this)}function Lh(){return this.each(Rh)}function Oh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Yh(){return this.each(Oh)}function Ih(e){var t=typeof e=="function"?e:qa(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ph(){return null}function Sh(e,t){var n=typeof e=="function"?e:qa(e),r=t==null?Ph:typeof t=="function"?t:Co(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function zh(){var e=this.parentNode;e&&e.removeChild(this)}function jh(){return this.each(zh)}function Uh(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Fh(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Hh(e){return this.select(e?Fh:Uh)}function Zh(e){return arguments.length?this.property("__data__",e):this.node().__data__}function qh(e){return function(t){e.call(this,t,this.__data__)}}function Xh(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Wh(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Gh(e,t,n){return function(){var r=this.__on,i,o=qh(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Vh(e,t,n){var r=Xh(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,l;c<u;++c)for(i=0,l=a[c];i<o;++i)if((s=r[i]).type===l.type&&s.name===l.name)return l.value}return}for(a=t?Gh:Wh,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function ec(e,t,n){var r=Ka(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Kh(e,t){return function(){return ec(this,e,t)}}function Qh(e,t){return function(){return ec(this,e,t.apply(this,arguments))}}function Bh(e,t){return this.each((typeof t=="function"?Qh:Kh)(e,t))}function*Jh(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var td=[null];function Wt(e,t){this._groups=e,this._parents=t}function Dr(){return new Wt([[document.documentElement]],td)}function ed(){return this}Wt.prototype=Dr.prototype={constructor:Wt,select:xl,selectAll:kl,selectChild:Ol,selectChildren:Sl,filter:zl,data:ql,enter:jl,exit:Wl,join:Gl,merge:Vl,selection:ed,order:Kl,sort:Ql,call:Jl,nodes:th,node:eh,size:nh,empty:rh,each:ih,attr:hh,style:gh,property:vh,classed:Mh,text:Ch,html:Nh,raise:Lh,lower:Yh,append:Ih,insert:Sh,remove:jh,clone:Hh,datum:Zh,on:Vh,dispatch:Bh,[Symbol.iterator]:Jh};function Ao(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function nc(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function xr(){}var Cr=.7,gi=1/Cr,An="\\s*([+-]?\\d+)\\s*",$r="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",de="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nd=/^#([0-9a-f]{3,8})$/,rd=new RegExp(`^rgb\\(${An},${An},${An}\\)$`),id=new RegExp(`^rgb\\(${de},${de},${de}\\)$`),od=new RegExp(`^rgba\\(${An},${An},${An},${$r}\\)$`),sd=new RegExp(`^rgba\\(${de},${de},${de},${$r}\\)$`),ad=new RegExp(`^hsl\\(${$r},${de},${de}\\)$`),cd=new RegExp(`^hsla\\(${$r},${de},${de},${$r}\\)$`),rc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ao(xr,Be,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ic,formatHex:ic,formatHex8:ud,formatHsl:ld,formatRgb:oc,toString:oc});function ic(){return this.rgb().formatHex()}function ud(){return this.rgb().formatHex8()}function ld(){return lc(this).formatHsl()}function oc(){return this.rgb().formatRgb()}function Be(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=nd.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?sc(t):n===3?new Lt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?pi(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?pi(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=rd.exec(e))?new Lt(t[1],t[2],t[3],1):(t=id.exec(e))?new Lt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=od.exec(e))?pi(t[1],t[2],t[3],t[4]):(t=sd.exec(e))?pi(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ad.exec(e))?uc(t[1],t[2]/100,t[3]/100,1):(t=cd.exec(e))?uc(t[1],t[2]/100,t[3]/100,t[4]):rc.hasOwnProperty(e)?sc(rc[e]):e==="transparent"?new Lt(NaN,NaN,NaN,0):null}function sc(e){return new Lt(e>>16&255,e>>8&255,e&255,1)}function pi(e,t,n,r){return r<=0&&(e=t=n=NaN),new Lt(e,t,n,r)}function hd(e){return e instanceof xr||(e=Be(e)),e?(e=e.rgb(),new Lt(e.r,e.g,e.b,e.opacity)):new Lt}function ko(e,t,n,r){return arguments.length===1?hd(e):new Lt(e,t,n,r??1)}function Lt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ao(Lt,ko,nc(xr,{brighter(e){return e=e==null?gi:Math.pow(gi,e),new Lt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Cr:Math.pow(Cr,e),new Lt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Lt(Je(this.r),Je(this.g),Je(this.b),yi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ac,formatHex:ac,formatHex8:dd,formatRgb:cc,toString:cc}));function ac(){return`#${tn(this.r)}${tn(this.g)}${tn(this.b)}`}function dd(){return`#${tn(this.r)}${tn(this.g)}${tn(this.b)}${tn((isNaN(this.opacity)?1:this.opacity)*255)}`}function cc(){const e=yi(this.opacity);return`${e===1?"rgb(":"rgba("}${Je(this.r)}, ${Je(this.g)}, ${Je(this.b)}${e===1?")":`, ${e})`}`}function yi(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Je(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tn(e){return e=Je(e),(e<16?"0":"")+e.toString(16)}function uc(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Gt(e,t,n,r)}function lc(e){if(e instanceof Gt)return new Gt(e.h,e.s,e.l,e.opacity);if(e instanceof xr||(e=Be(e)),!e)return new Gt;if(e instanceof Gt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,c=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=c<.5?o+i:2-o-i,s*=60):a=c>0&&c<1?0:s,new Gt(s,a,c,e.opacity)}function fd(e,t,n,r){return arguments.length===1?lc(e):new Gt(e,t,n,r??1)}function Gt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ao(Gt,fd,nc(xr,{brighter(e){return e=e==null?gi:Math.pow(gi,e),new Gt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Cr:Math.pow(Cr,e),new Gt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Lt(No(e>=240?e-240:e+120,i,r),No(e,i,r),No(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Gt(hc(this.h),wi(this.s),wi(this.l),yi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=yi(this.opacity);return`${e===1?"hsl(":"hsla("}${hc(this.h)}, ${wi(this.s)*100}%, ${wi(this.l)*100}%${e===1?")":`, ${e})`}`}}));function hc(e){return e=(e||0)%360,e<0?e+360:e}function wi(e){return Math.max(0,Math.min(1,e||0))}function No(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ro=e=>()=>e;function md(e,t){return function(n){return e+n*t}}function gd(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function pd(e){return(e=+e)==1?dc:function(t,n){return n-t?gd(t,n,e):Ro(isNaN(t)?n:t)}}function dc(e,t){var n=t-e;return n?md(e,n):Ro(isNaN(e)?t:e)}const vi=(function e(t){var n=pd(t);function r(i,o){var s=n((i=ko(i)).r,(o=ko(o)).r),a=n(i.g,o.g),c=n(i.b,o.b),u=dc(i.opacity,o.opacity);return function(l){return i.r=s(l),i.g=a(l),i.b=c(l),i.opacity=u(l),i+""}}return r.gamma=e,r})(1);function yd(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function wd(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function vd(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Yo(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function bd(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Vt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function _d(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Yo(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Lo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Oo=new RegExp(Lo.source,"g");function Td(e){return function(){return e}}function Md(e){return function(t){return e(t)+""}}function fc(e,t){var n=Lo.lastIndex=Oo.lastIndex=0,r,i,o,s=-1,a=[],c=[];for(e=e+"",t=t+"";(r=Lo.exec(e))&&(i=Oo.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,c.push({i:s,x:Vt(r,i)})),n=Oo.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?c[0]?Md(c[0].x):Td(t):(t=c.length,function(u){for(var l=0,h;l<t;++l)a[(h=c[l]).i]=h.x(u);return a.join("")})}function Yo(e,t){var n=typeof t,r;return t==null||n==="boolean"?Ro(t):(n==="number"?Vt:n==="string"?(r=Be(t))?(t=r,vi):fc:t instanceof Be?vi:t instanceof Date?bd:wd(t)?yd:Array.isArray(t)?vd:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?_d:Vt)(e,t)}function Ed(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var mc=180/Math.PI,Io={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function gc(e,t,n,r,i,o){var s,a,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),e*r<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*mc,skewX:Math.atan(c)*mc,scaleX:s,scaleY:a}}var bi;function Dd(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Io:gc(t.a,t.b,t.c,t.d,t.e,t.f)}function xd(e){return e==null||(bi||(bi=document.createElementNS("http://www.w3.org/2000/svg","g")),bi.setAttribute("transform",e),!(e=bi.transform.baseVal.consolidate()))?Io:(e=e.matrix,gc(e.a,e.b,e.c,e.d,e.e,e.f))}function pc(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,l,h,d,g,p){if(u!==h||l!==d){var w=g.push("translate(",null,t,null,n);p.push({i:w-4,x:Vt(u,h)},{i:w-2,x:Vt(l,d)})}else(h||d)&&g.push("translate("+h+t+d+n)}function s(u,l,h,d){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),d.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Vt(u,l)})):l&&h.push(i(h)+"rotate("+l+r)}function a(u,l,h,d){u!==l?d.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Vt(u,l)}):l&&h.push(i(h)+"skewX("+l+r)}function c(u,l,h,d,g,p){if(u!==h||l!==d){var w=g.push(i(g)+"scale(",null,",",null,")");p.push({i:w-4,x:Vt(u,h)},{i:w-2,x:Vt(l,d)})}else(h!==1||d!==1)&&g.push(i(g)+"scale("+h+","+d+")")}return function(u,l){var h=[],d=[];return u=e(u),l=e(l),o(u.translateX,u.translateY,l.translateX,l.translateY,h,d),s(u.rotate,l.rotate,h,d),a(u.skewX,l.skewX,h,d),c(u.scaleX,u.scaleY,l.scaleX,l.scaleY,h,d),u=l=null,function(g){for(var p=-1,w=d.length,y;++p<w;)h[(y=d[p]).i]=y.x(g);return h.join("")}}}var Cd=pc(Dd,"px, ","px)","deg)"),$d=pc(xd,", ",")",")"),kn=0,Ar=0,kr=0,yc=1e3,_i,Nr,Ti=0,en=0,Mi=0,Rr=typeof performance=="object"&&performance.now?performance:Date,wc=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Po(){return en||(wc(Ad),en=Rr.now()+Mi)}function Ad(){en=0}function Ei(){this._call=this._time=this._next=null}Ei.prototype=vc.prototype={constructor:Ei,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Po():+n)+(t==null?0:+t),!this._next&&Nr!==this&&(Nr?Nr._next=this:_i=this,Nr=this),this._call=e,this._time=n,So()},stop:function(){this._call&&(this._call=null,this._time=1/0,So())}};function vc(e,t,n){var r=new Ei;return r.restart(e,t,n),r}function kd(){Po(),++kn;for(var e=_i,t;e;)(t=en-e._time)>=0&&e._call.call(void 0,t),e=e._next;--kn}function bc(){en=(Ti=Rr.now())+Mi,kn=Ar=0;try{kd()}finally{kn=0,Rd(),en=0}}function Nd(){var e=Rr.now(),t=e-Ti;t>yc&&(Mi-=t,Ti=e)}function Rd(){for(var e,t=_i,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:_i=n);Nr=e,So(r)}function So(e){if(!kn){Ar&&(Ar=clearTimeout(Ar));var t=e-en;t>24?(e<1/0&&(Ar=setTimeout(bc,e-Rr.now()-Mi)),kr&&(kr=clearInterval(kr))):(kr||(Ti=Rr.now(),kr=setInterval(Nd,yc)),kn=1,wc(bc))}}function _c(e,t,n){var r=new Ei;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Ld=Fa("start","end","cancel","interrupt"),Od=[],Tc=0,Mc=1,zo=2,Di=3,Ec=4,jo=5,xi=6;function Ci(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Yd(e,n,{name:t,index:r,group:i,on:Ld,tween:Od,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Tc})}function Uo(e,t){var n=Kt(e,t);if(n.state>Tc)throw new Error("too late; already scheduled");return n}function fe(e,t){var n=Kt(e,t);if(n.state>Di)throw new Error("too late; already running");return n}function Kt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Yd(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=vc(o,0,n.time);function o(u){n.state=Mc,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var l,h,d,g;if(n.state!==Mc)return c();for(l in r)if(g=r[l],g.name===n.name){if(g.state===Di)return _c(s);g.state===Ec?(g.state=xi,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[l]):+l<t&&(g.state=xi,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[l])}if(_c(function(){n.state===Di&&(n.state=Ec,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=zo,n.on.call("start",e,e.__data__,n.index,n.group),n.state===zo){for(n.state=Di,i=new Array(d=n.tween.length),l=0,h=-1;l<d;++l)(g=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=g);i.length=h+1}}function a(u){for(var l=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=jo,1),h=-1,d=i.length;++h<d;)i[h].call(e,l);n.state===jo&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=xi,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Id(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>zo&&r.state<jo,r.state=xi,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function Pd(e){return this.each(function(){Id(this,e)})}function Sd(e,t){var n,r;return function(){var i=fe(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function zd(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=fe(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},c=0,u=i.length;c<u;++c)if(i[c].name===t){i[c]=a;break}c===u&&i.push(a)}o.tween=i}}function jd(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Kt(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?Sd:zd)(n,e,t))}function Fo(e,t,n){var r=e._id;return e.each(function(){var i=fe(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Kt(i,r).value[t]}}function Dc(e,t){var n;return(typeof t=="number"?Vt:t instanceof Be?vi:(n=Be(t))?(t=n,vi):fc)(e,t)}function Ud(e){return function(){this.removeAttribute(e)}}function Fd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Hd(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function Zd(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function qd(e,t,n){var r,i,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=t(r=s,a)))}}function Xd(e,t,n){var r,i,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=t(r=s,a)))}}function Wd(e,t){var n=fi(e),r=n==="transform"?$d:Dc;return this.attrTween(e,typeof t=="function"?(n.local?Xd:qd)(n,r,Fo(this,"attr."+e,t)):t==null?(n.local?Fd:Ud)(n):(n.local?Zd:Hd)(n,r,t))}function Gd(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Vd(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Kd(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Vd(e,o)),n}return i._value=t,i}function Qd(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Gd(e,o)),n}return i._value=t,i}function Bd(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=fi(e);return this.tween(n,(r.local?Kd:Qd)(r,t))}function Jd(e,t){return function(){Uo(this,e).delay=+t.apply(this,arguments)}}function tf(e,t){return t=+t,function(){Uo(this,e).delay=t}}function ef(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Jd:tf)(t,e)):Kt(this.node(),t).delay}function nf(e,t){return function(){fe(this,e).duration=+t.apply(this,arguments)}}function rf(e,t){return t=+t,function(){fe(this,e).duration=t}}function of(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?nf:rf)(t,e)):Kt(this.node(),t).duration}function sf(e,t){if(typeof t!="function")throw new Error;return function(){fe(this,e).ease=t}}function af(e){var t=this._id;return arguments.length?this.each(sf(t,e)):Kt(this.node(),t).ease}function cf(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;fe(this,e).ease=n}}function uf(e){if(typeof e!="function")throw new Error;return this.each(cf(this._id,e))}function lf(e){typeof e!="function"&&(e=Wa(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],c,u=0;u<s;++u)(c=o[u])&&e.call(c,c.__data__,u,o)&&a.push(c);return new Ce(r,this._parents,this._name,this._id)}function hf(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var c=t[a],u=n[a],l=c.length,h=s[a]=new Array(l),d,g=0;g<l;++g)(d=c[g]||u[g])&&(h[g]=d);for(;a<r;++a)s[a]=t[a];return new Ce(s,this._parents,this._name,this._id)}function df(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function ff(e,t,n){var r,i,o=df(t)?Uo:fe;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function mf(e,t){var n=this._id;return arguments.length<2?Kt(this.node(),n).on.on(e):this.each(ff(n,e,t))}function gf(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function pf(){return this.on("end.remove",gf(this._id))}function yf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Co(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],c=a.length,u=o[s]=new Array(c),l,h,d=0;d<c;++d)(l=a[d])&&(h=e.call(l,l.__data__,d,a))&&("__data__"in l&&(h.__data__=l.__data__),u[d]=h,Ci(u[d],t,n,d,u,Kt(l,n)));return new Ce(o,this._parents,t,n)}function wf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Xa(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var c=r[a],u=c.length,l,h=0;h<u;++h)if(l=c[h]){for(var d=e.call(l,l.__data__,h,c),g,p=Kt(l,n),w=0,y=d.length;w<y;++w)(g=d[w])&&Ci(g,t,n,w,d,p);o.push(d),s.push(l)}return new Ce(o,s,t,n)}var vf=Dr.prototype.constructor;function bf(){return new vf(this._groups,this._parents)}function _f(e,t){var n,r,i;return function(){var o=$n(this,e),s=(this.style.removeProperty(e),$n(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function xc(e){return function(){this.style.removeProperty(e)}}function Tf(e,t,n){var r,i=n+"",o;return function(){var s=$n(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function Mf(e,t,n){var r,i,o;return function(){var s=$n(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),$n(this,e))),s===c?null:s===r&&c===i?o:(i=c,o=t(r=s,a))}}function Ef(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var c=fe(this,e),u=c.on,l=c.value[o]==null?a||(a=xc(t)):void 0;(u!==n||i!==l)&&(r=(n=u).copy()).on(s,i=l),c.on=r}}function Df(e,t,n){var r=(e+="")=="transform"?Cd:Dc;return t==null?this.styleTween(e,_f(e,r)).on("end.style."+e,xc(e)):typeof t=="function"?this.styleTween(e,Mf(e,r,Fo(this,"style."+e,t))).each(Ef(this._id,e)):this.styleTween(e,Tf(e,r,t),n).on("end.style."+e,null)}function xf(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Cf(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&xf(e,s,n)),r}return o._value=t,o}function $f(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Cf(e,t,n??""))}function Af(e){return function(){this.textContent=e}}function kf(e){return function(){var t=e(this);this.textContent=t??""}}function Nf(e){return this.tween("text",typeof e=="function"?kf(Fo(this,"text",e)):Af(e==null?"":e+""))}function Rf(e){return function(t){this.textContent=e.call(this,t)}}function Lf(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Rf(i)),t}return r._value=e,r}function Of(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Lf(e))}function Yf(){for(var e=this._name,t=this._id,n=Cc(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,u=0;u<a;++u)if(c=s[u]){var l=Kt(c,t);Ci(c,e,n,u,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Ce(r,this._parents,e,n)}function If(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},c={value:function(){--i===0&&o()}};n.each(function(){var u=fe(this,r),l=u.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),u.on=t}),i===0&&o()})}var Pf=0;function Ce(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Cc(){return++Pf}var $e=Dr.prototype;Ce.prototype={constructor:Ce,select:yf,selectAll:wf,selectChild:$e.selectChild,selectChildren:$e.selectChildren,filter:lf,merge:hf,selection:bf,transition:Yf,call:$e.call,nodes:$e.nodes,node:$e.node,size:$e.size,empty:$e.empty,each:$e.each,on:mf,attr:Wd,attrTween:Bd,style:Df,styleTween:$f,text:Nf,textTween:Of,remove:pf,tween:jd,delay:ef,duration:of,ease:af,easeVarying:uf,end:If,[Symbol.iterator]:$e[Symbol.iterator]};function Sf(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var zf={time:null,delay:0,duration:250,ease:Sf};function jf(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Uf(e){var t,n;e instanceof Ce?(t=e._id,e=e._name):(t=Cc(),(n=zf).time=Po(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,u=0;u<a;++u)(c=s[u])&&Ci(c,e,t,u,s,n||jf(c,t));return new Ce(r,this._parents,e,t)}Dr.prototype.interrupt=Pd,Dr.prototype.transition=Uf;const Ho=Math.PI,Zo=2*Ho,nn=1e-6,Ff=Zo-nn;function $c(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Hf(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return $c;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Zf{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?$c:Hf(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,c=r-t,u=i-n,l=s-t,h=a-n,d=l*l+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>nn)if(!(Math.abs(h*c-u*l)>nn)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let g=r-s,p=i-a,w=c*c+u*u,y=g*g+p*p,v=Math.sqrt(w),_=Math.sqrt(d),T=o*Math.tan((Ho-Math.acos((w+d-y)/(2*v*_)))/2),D=T/_,E=T/v;Math.abs(D-1)>nn&&this._append`L${t+D*l},${n+D*h}`,this._append`A${o},${o},0,0,${+(h*g>l*p)},${this._x1=t+E*c},${this._y1=n+E*u}`}}arc(t,n,r,i,o,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),c=r*Math.sin(i),u=t+a,l=n+c,h=1^s,d=s?i-o:o-i;this._x1===null?this._append`M${u},${l}`:(Math.abs(this._x1-u)>nn||Math.abs(this._y1-l)>nn)&&this._append`L${u},${l}`,r&&(d<0&&(d=d%Zo+Zo),d>Ff?this._append`A${r},${r},0,1,${h},${t-a},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=l}`:d>nn&&this._append`A${r},${r},0,${+(d>=Ho)},${h},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function qf(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function $i(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Nn(e){return e=$i(Math.abs(e)),e?e[1]:NaN}function Xf(e,t){return function(n,r){for(var i=n.length,o=[],s=0,a=e[0],c=0;i>0&&a>0&&(c+a+1>r&&(a=Math.max(1,r-c)),o.push(n.substring(i-=a,i+a)),!((c+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function Wf(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Gf=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ai(e){if(!(t=Gf.exec(e)))throw new Error("invalid format: "+e);var t;return new qo({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ai.prototype=qo.prototype;function qo(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}qo.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Vf(e){t:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break t;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Ac;function Kf(e,t){var n=$i(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(Ac=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+$i(e,Math.max(0,t+o-1))[0]}function kc(e,t){var n=$i(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Nc={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:qf,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>kc(e*100,t),r:kc,s:Kf,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Rc(e){return e}var Lc=Array.prototype.map,Oc=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Qf(e){var t=e.grouping===void 0||e.thousands===void 0?Rc:Xf(Lc.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?Rc:Wf(Lc.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(h){h=Ai(h);var d=h.fill,g=h.align,p=h.sign,w=h.symbol,y=h.zero,v=h.width,_=h.comma,T=h.precision,D=h.trim,E=h.type;E==="n"?(_=!0,E="g"):Nc[E]||(T===void 0&&(T=12),D=!0,E="g"),(y||d==="0"&&g==="=")&&(y=!0,d="0",g="=");var R=w==="$"?n:w==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",H=w==="$"?r:/[%p]/.test(E)?s:"",U=Nc[E],j=/[defgprs%]/.test(E);T=T===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function Z(C){var Y=R,z=H,B,Qt,Bt;if(E==="c")z=U(C)+z,C="";else{C=+C;var Jt=C<0||1/C<0;if(C=isNaN(C)?c:U(Math.abs(C),T),D&&(C=Vf(C)),Jt&&+C==0&&p!=="+"&&(Jt=!1),Y=(Jt?p==="("?p:a:p==="-"||p==="("?"":p)+Y,z=(E==="s"?Oc[8+Ac/3]:"")+z+(Jt&&p==="("?")":""),j){for(B=-1,Qt=C.length;++B<Qt;)if(Bt=C.charCodeAt(B),48>Bt||Bt>57){z=(Bt===46?i+C.slice(B+1):C.slice(B))+z,C=C.slice(0,B);break}}}_&&!y&&(C=t(C,1/0));var On=Y.length+C.length+z.length,te=On<v?new Array(v-On+1).join(d):"";switch(_&&y&&(C=t(te+C,te.length?v-z.length:1/0),te=""),g){case"<":C=Y+C+z+te;break;case"=":C=Y+te+C+z;break;case"^":C=te.slice(0,On=te.length>>1)+Y+C+z+te.slice(On);break;default:C=te+Y+C+z;break}return o(C)}return Z.toString=function(){return h+""},Z}function l(h,d){var g=u((h=Ai(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(Nn(d)/3)))*3,w=Math.pow(10,-p),y=Oc[8+p/3];return function(v){return g(w*v)+y}}return{format:u,formatPrefix:l}}var ki,Yc,Ic;Bf({thousands:",",grouping:[3],currency:["$",""]});function Bf(e){return ki=Qf(e),Yc=ki.format,Ic=ki.formatPrefix,ki}function Jf(e){return Math.max(0,-Nn(Math.abs(e)))}function tm(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Nn(t)/3)))*3-Nn(Math.abs(e)))}function em(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Nn(t)-Nn(e))+1}function nm(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function rm(e){return function(){return e}}function im(e){return+e}var Pc=[0,1];function Rn(e){return e}function Xo(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:rm(isNaN(t)?NaN:.5)}function om(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function sm(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=Xo(i,r),o=n(s,o)):(r=Xo(r,i),o=n(o,s)),function(a){return o(r(a))}}function am(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=Xo(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var c=ml(e,a,1,r)-1;return o[c](i[c](a))}}function cm(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function um(){var e=Pc,t=Pc,n=Yo,r,i,o,s=Rn,a,c,u;function l(){var d=Math.min(e.length,t.length);return s!==Rn&&(s=om(e[0],e[d-1])),a=d>2?am:sm,c=u=null,h}function h(d){return d==null||isNaN(d=+d)?o:(c||(c=a(e.map(r),t,n)))(r(s(d)))}return h.invert=function(d){return s(i((u||(u=a(t,e.map(r),Vt)))(d)))},h.domain=function(d){return arguments.length?(e=Array.from(d,im),l()):e.slice()},h.range=function(d){return arguments.length?(t=Array.from(d),l()):t.slice()},h.rangeRound=function(d){return t=Array.from(d),n=Ed,l()},h.clamp=function(d){return arguments.length?(s=d?!0:Rn,l()):s!==Rn},h.interpolate=function(d){return arguments.length?(n=d,l()):n},h.unknown=function(d){return arguments.length?(o=d,h):o},function(d,g){return r=d,i=g,l()}}function lm(){return um()(Rn,Rn)}function hm(e,t,n,r){var i=vl(e,t,n),o;switch(r=Ai(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=tm(i,s))&&(r.precision=o),Ic(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=em(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Jf(i))&&(r.precision=o-(r.type==="%")*2);break}}return Yc(r)}function dm(e){var t=e.domain;return e.ticks=function(n){var r=t();return wl(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return hm(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],a=r[o],c,u,l=10;for(a<s&&(u=s,s=a,a=u,u=i,i=o,o=u);l-- >0;){if(u=Do(s,a,n),u===c)return r[i]=s,r[o]=a,t(r);if(u>0)s=Math.floor(s/u)*u,a=Math.ceil(a/u)*u;else if(u<0)s=Math.ceil(s*u)/u,a=Math.floor(a*u)/u;else break;c=u}return e},e}function Lr(){var e=lm();return e.copy=function(){return cm(e,Lr())},nm.apply(e,arguments),dm(e)}function Ln(e){return function(){return e}}function fm(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Zf(t)}function mm(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Sc(e){this._context=e}Sc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function gm(e){return new Sc(e)}function pm(e){return e[0]}function ym(e){return e[1]}function zc(e,t){var n=Ln(!0),r=null,i=gm,o=null,s=fm(a);e=typeof e=="function"?e:e===void 0?pm:Ln(e),t=typeof t=="function"?t:t===void 0?ym:Ln(t);function a(c){var u,l=(c=mm(c)).length,h,d=!1,g;for(r==null&&(o=i(g=s())),u=0;u<=l;++u)!(u<l&&n(h=c[u],u,c))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(h,u,c),+t(h,u,c));if(g)return o=null,g+""||null}return a.x=function(c){return arguments.length?(e=typeof c=="function"?c:Ln(+c),a):e},a.y=function(c){return arguments.length?(t=typeof c=="function"?c:Ln(+c),a):t},a.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Ln(!!c),a):n},a.curve=function(c){return arguments.length?(i=c,r!=null&&(o=i(r)),a):i},a.context=function(c){return arguments.length?(c==null?r=o=null:o=i(r=c),a):r},a}function Or(e,t,n){this.k=e,this.x=t,this.y=n}Or.prototype={constructor:Or,scale:function(e){return e===1?this:new Or(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Or(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},Or.prototype;const wm={name:"Sigmoid v3",description:"Smooth sigmoid curve that travels horizontally first, with limited curve distance",render(e){const t=[],n=e.fromX-5,r=e.toX+5;let i=e.fromY;e.toY<e.fromY?i=e.fromY-5:e.toY>e.fromY&&(i=e.fromY+5);const o=e.toY,s=Math.abs(r-n),a=50;if(s<=a)return vm(n,i,r,o,e);const u=r>n?n+a:n-a,l=jc(n,i,u,o);if(!l){const g=document.createElementNS("http://www.w3.org/2000/svg","path");return g.setAttribute("d",`M ${n},${i} L ${r},${o}`),g.setAttribute("stroke",e.color),g.setAttribute("stroke-width","5"),g.setAttribute("fill","none"),t.push(g),t}const h=`${l} L ${r},${o}`,d=document.createElementNS("http://www.w3.org/2000/svg","path");return d.setAttribute("d",h),d.setAttribute("stroke",e.color),d.setAttribute("stroke-width","5"),d.setAttribute("fill","none"),e.connectorType==="undefined"?(d.setAttribute("stroke-dasharray","5,5"),d.setAttribute("stroke-opacity","0.5")):d.setAttribute("stroke-opacity",e.opacity.toString()),t.push(d),t}};function vm(e,t,n,r,i){const o=[],s=jc(e,t,n,r);if(!s){const c=document.createElementNS("http://www.w3.org/2000/svg","path");return c.setAttribute("d",`M ${e},${t} L ${n},${r}`),c.setAttribute("stroke",i.color),c.setAttribute("stroke-width","2"),c.setAttribute("fill","none"),o.push(c),o}const a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("d",s),a.setAttribute("stroke",i.color),a.setAttribute("stroke-width","5"),a.setAttribute("fill","none"),i.connectorType==="undefined"?(a.setAttribute("stroke-dasharray","5,5"),a.setAttribute("stroke-opacity","0.5")):a.setAttribute("stroke-opacity",i.opacity.toString()),o.push(a),o}function jc(e,t,n,r){const i=h=>1/(1+Math.exp(-2*h)),a=[];for(let h=-3;h<=3;h+=.1){const d=i(h);a.push([d,h])}const c=Lr().domain([0,1]).range([e,n]),u=Lr().domain([0,1]).range([t,r]);return zc().x(h=>{const d=(h[1]+3)/6;return c(d)}).y(h=>u(h[0]))(a)}const bm={name:"Connector v4",description:"Limited sigmoid for defined connectors, full sigmoid for undefined connectors",render(e){return e.connectorType==="undefined"?_m(e):Tm(e)}};function _m(e){const t=[],n=e.fromX-5,r=e.fromY,i=e.toX+5,o=e.toY,s=Wo(n,r,i,o);if(!s){const c=document.createElementNS("http://www.w3.org/2000/svg","path");return c.setAttribute("d",`M ${n},${r} L ${i},${o}`),c.setAttribute("stroke",e.color),c.setAttribute("stroke-width","3"),c.setAttribute("fill","none"),c.setAttribute("stroke-dasharray","5,5"),c.setAttribute("stroke-opacity","0.5"),t.push(c),t}const a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("d",s),a.setAttribute("stroke",e.color),a.setAttribute("stroke-width","3"),a.setAttribute("fill","none"),a.setAttribute("stroke-dasharray","5,5"),a.setAttribute("stroke-opacity","0.5"),t.push(a),t}function Tm(e){const t=[],n=e.fromX-5,r=e.toX+5;let i=e.fromY;e.toY<e.fromY?i=e.fromY-5:e.toY>e.fromY&&(i=e.fromY+5);const o=e.toY,s=Math.abs(r-n),a=50;if(s<=a){const g=Wo(n,i,r,o);if(!g){const w=document.createElementNS("http://www.w3.org/2000/svg","path");return w.setAttribute("d",`M ${n},${i} L ${r},${o}`),w.setAttribute("stroke",e.color),w.setAttribute("stroke-width","5"),w.setAttribute("fill","none"),w.setAttribute("stroke-opacity",e.opacity.toString()),t.push(w),t}const p=document.createElementNS("http://www.w3.org/2000/svg","path");return p.setAttribute("d",g),p.setAttribute("stroke",e.color),p.setAttribute("stroke-width","5"),p.setAttribute("fill","none"),p.setAttribute("stroke-opacity",e.opacity.toString()),t.push(p),t}const u=r>n?n+a:n-a,l=Wo(n,i,u,o);if(!l){const g=document.createElementNS("http://www.w3.org/2000/svg","path");return g.setAttribute("d",`M ${n},${i} L ${r},${o}`),g.setAttribute("stroke",e.color),g.setAttribute("stroke-width","5"),g.setAttribute("fill","none"),g.setAttribute("stroke-opacity",e.opacity.toString()),t.push(g),t}const h=`${l} L ${r},${o}`,d=document.createElementNS("http://www.w3.org/2000/svg","path");return d.setAttribute("d",h),d.setAttribute("stroke",e.color),d.setAttribute("stroke-width","5"),d.setAttribute("fill","none"),d.setAttribute("stroke-opacity",e.opacity.toString()),t.push(d),t}function Wo(e,t,n,r){const i=h=>1/(1+Math.exp(-2*h)),a=[];for(let h=-3;h<=3;h+=.1){const d=i(h);a.push([d,h])}const c=Lr().domain([0,1]).range([e,n]),u=Lr().domain([0,1]).range([t,r]);return zc().x(h=>{const d=(h[1]+3)/6;return c(d)}).y(h=>u(h[0]))(a)}const Uc={"connector-v4":bm,sigmoidHorizontalLimited:wm},Fc="sigmoidHorizontalLimited",Mm=`
.info-popup {
  position: absolute;
  background: white;
  border: 1px solid #ccc;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  max-width: 300px;
  min-width: 200px;
  z-index: 1000;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  font-size: 14px;
}

.info-popup-close {
  position: absolute;
  top: 8px;
  right: 8px;
  background: none;
  border: none;
  font-size: 18px;
  cursor: pointer;
  color: #666;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px;
}

.info-popup-close:hover {
  background: #f0f0f0;
  color: #333;
}

.info-popup-content {
  padding: 12px 16px;
  padding-right: 36px;
  white-space: pre-wrap;
  line-height: 1.5;
  color: #333;
}
`;let Hc=!1;function Em(){if(Hc)return;const e=document.createElement("style");e.setAttribute("data-thymeline-info-popup",""),e.textContent=Mm,document.head.appendChild(e),Hc=!0}class Dm{element=null;container;documentClickHandler=null;constructor(t){this.container=t,Em()}show(t,n,r){this.hide(),this.element=document.createElement("div"),this.element.className="info-popup";const i=document.createElement("button");i.className="info-popup-close",i.innerHTML="&times;",i.addEventListener("click",s=>{s.stopPropagation(),this.hide()});const o=document.createElement("div");o.className="info-popup-content",o.textContent=t,this.element.appendChild(i),this.element.appendChild(o),this.container.appendChild(this.element),this.positionPopup(n,r),setTimeout(()=>{this.documentClickHandler=s=>{this.element&&!this.element.contains(s.target)&&this.hide()},document.addEventListener("click",this.documentClickHandler)},0)}positionPopup(t,n){if(!this.element)return;const r=this.container.getBoundingClientRect(),i=250,o=150,s=10;let a=t-r.left+s,c=n-r.top+s;a+i>r.width&&(a=t-r.left-i-s),c+o>r.height&&(c=n-r.top-o-s),a=Math.max(10,a),c=Math.max(10,c),this.element.style.left=`${a}px`,this.element.style.top=`${c}px`}hide(){this.element&&(this.element.remove(),this.element=null),this.documentClickHandler&&(document.removeEventListener("click",this.documentClickHandler),this.documentClickHandler=null)}isVisible(){return this.element!==null}destroy(){this.hide()}}class xm{container;svg=null;data=null;options;viewport;eventListeners=new Map;laneAssignments=[];rowMapping=new Map;infoPopup=null;constructor(t,n={}){if(typeof t=="string"){const r=document.querySelector(t);if(!r||!(r instanceof HTMLElement))throw new Error(`Container element not found: ${t}`);this.container=r}else this.container=t;this.container.style.position="relative",this.options={width:n.width??this.container.clientWidth,height:n.height??this.container.clientHeight,initialStartTime:n.initialStartTime??"1900-01-01",initialEndTime:n.initialEndTime??Temporal.Now.instant().toString(),minZoom:n.minZoom??.1,maxZoom:n.maxZoom??1e9,theme:n.theme??"light",constraints:n.constraints??{minEventWidth:2,maxEventWidth:20,periodHeight:28,laneHeight:80,laneGap:40},periodLayoutAlgorithm:n.periodLayoutAlgorithm??"succession",connectorRenderer:n.connectorRenderer??Fc,showRowNumbers:n.showRowNumbers??!1},this.viewport={startTime:Q(this.options.initialStartTime),endTime:Q(this.options.initialEndTime),zoomLevel:1,centerTime:0},this.viewport.centerTime=(this.viewport.startTime+this.viewport.endTime)/2}render(t){this.data=t;const{minTime:n,maxTime:r}=this.calculateDataTimeRange(t);this.viewport.startTime=n,this.viewport.endTime=r,this.viewport.centerTime=(n+r)/2,this.viewport.zoomLevel=1;const i=ja(t.periods,t.events,this.options.periodLayoutAlgorithm,t.connectors);this.laneAssignments=i,this.rowMapping=this.buildRowMapping(),this.createSVG(),this.renderTimeline()}zoomIn(){this.setZoomLevel(this.viewport.zoomLevel*1.5)}zoomOut(){this.setZoomLevel(this.viewport.zoomLevel/1.5)}zoomTo(t,n){this.viewport.startTime=Q(t),this.viewport.endTime=Q(n),this.viewport.centerTime=(this.viewport.startTime+this.viewport.endTime)/2,this.viewport.zoomLevel=1,this.updateView()}setZoomLevel(t,n){if(!this.data)return;const r=this.viewport.zoomLevel,i=this.viewport.endTime-this.viewport.startTime,o=n!==void 0?n:this.viewport.centerTime,{minTime:s,maxTime:a}=this.calculateDataTimeRange(this.data),c=a-s,u=this.viewport.endTime-this.viewport.startTime,l=Math.min(this.options.minZoom,r*(u/c)),h=this.findShortestPeriod();let d=this.options.maxZoom;if(h!==null){const y=h*10;d=Math.min(this.options.maxZoom,c/y)}const g=Math.max(l,Math.min(d,t));if(g===r)return;this.viewport.zoomLevel=g;let p=i*(r/g);p=Math.min(p,c*1.05),this.viewport.centerTime=o,this.viewport.startTime=o-p/2,this.viewport.endTime=o+p/2,this.clampPanPosition();const w=this.viewport.endTime-this.viewport.startTime;this.viewport.startTime=this.viewport.centerTime-w/2,this.viewport.endTime=this.viewport.centerTime+w/2,this.updateView(),this.emit("zoom",this.viewport.zoomLevel)}panTo(t){this.viewport.centerTime=Q(t),this.clampPanPosition(),this.recalculateViewportBounds(),this.updateView(),this.emit("pan",this.viewport.centerTime)}panBy(t){const n=this.viewport.endTime-this.viewport.startTime,r=t/this.options.width*n;this.viewport.centerTime+=r,this.clampPanPosition(),this.recalculateViewportBounds(),this.updateView(),this.emit("pan",this.viewport.centerTime)}addEvent(t){this.data&&(this.data.events.push(t),this.render(this.data))}addPeriod(t){this.data&&(this.data.periods.push(t),this.render(this.data))}addConnector(t){this.data&&(this.data.connectors.push(t),this.render(this.data))}removeItem(t){this.data&&(this.data.events=this.data.events.filter(n=>n.id!==t),this.data.periods=this.data.periods.filter(n=>n.id!==t),this.data.connectors=this.data.connectors.filter(n=>n.id!==t),this.render(this.data))}updateItem(t,n){if(!this.data)return;const r=this.data.events.find(o=>o.id===t);r&&Object.assign(r,n);const i=this.data.periods.find(o=>o.id===t);i&&Object.assign(i,n),this.render(this.data)}setShowRowNumbers(t){this.options.showRowNumbers=t,this.renderTimeline()}toSVG(){return this.svg?.outerHTML??""}async toPNG(){throw new Error("PNG export not yet implemented")}destroy(){this.infoPopup&&(this.infoPopup.destroy(),this.infoPopup=null),this.svg&&(this.svg.remove(),this.svg=null),this.eventListeners.clear()}getViewport(){return{...this.viewport}}on(t,n){this.eventListeners.has(t)||this.eventListeners.set(t,new Set),this.eventListeners.get(t).add(n)}createSVG(){this.svg&&this.svg.remove(),this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("width",this.options.width.toString());const t=this.rowMapping.size>0?Math.max(...this.rowMapping.values())+1:1,n=this.options.constraints.periodHeight,r=this.options.constraints.laneGap,i=60,o=r/3,s=o,a=o*2,u=i+s+t*(n+r)+a+20,l=Math.max(this.options.height,u);this.svg.setAttribute("height",l.toString()),this.svg.style.border="1px solid #ccc",this.svg.style.background="#fff",this.svg.style.cursor="grab",this.svg.style.userSelect="none",this.setupDragToPan(),this.container.appendChild(this.svg),this.infoPopup||(this.infoPopup=new Dm(this.container))}setupDragToPan(){if(!this.svg)return;let t=!1,n=0,r=0,i=0;this.svg.addEventListener("mousedown",s=>{const a=Date.now();if(a-i<300){this.handleDoubleClick(s),i=0;return}i=a,t=!0,n=s.clientX,r=this.viewport.centerTime,this.svg&&(this.svg.style.cursor="grabbing")}),this.svg.addEventListener("mousemove",s=>{if(!t)return;const a=s.clientX-n,c=this.viewport.endTime-this.viewport.startTime,u=-a/this.options.width*c;this.viewport.centerTime=r+u,this.clampPanPosition(),this.recalculateViewportBounds(),this.updateView(),this.emit("pan",this.viewport.centerTime)});const o=()=>{t&&this.svg&&(t=!1,this.svg.style.cursor="grab")};this.svg.addEventListener("mouseup",o),this.svg.addEventListener("mouseleave",o),this.svg.addEventListener("wheel",s=>{s.preventDefault(),s.deltaY<0?this.zoomIn():this.zoomOut()})}handleDoubleClick(t){if(!this.svg)return;const n=this.svg.getBoundingClientRect(),r=t.clientX-n.left,i=this.xToTime(r),o=this.viewport.zoomLevel*1.5;this.setZoomLevel(o,i)}xToTime(t){const n=this.viewport.endTime-this.viewport.startTime,r=t/this.options.width;return this.viewport.startTime+n*r}updateView(){this.data&&this.renderTimeline()}emit(t,...n){const r=this.eventListeners.get(t);r&&r.forEach(i=>i(...n))}calculateDataTimeRange(t){let n=1/0,r=-1/0;for(const s of t.events){const a=Q(s.time);n=Math.min(n,a),r=Math.max(r,a)}for(const s of t.periods){const a=Q(s.startTime),c=Er(s.endTime,!1);n=Math.min(n,a),r=Math.max(r,c)}(n===1/0||r===-1/0)&&(n=Q(this.options.initialStartTime),r=Q(this.options.initialEndTime));const o=(r-n)*.025;return{minTime:n-o,maxTime:r+o}}findShortestPeriod(){if(!this.data||this.data.periods.length===0)return null;let t=1/0;for(const n of this.data.periods){if(n.endTime===void 0||n.endTime===null)continue;const r=Q(n.startTime),o=Q(n.endTime)-r;o>0&&(t=Math.min(t,o))}return t===1/0?null:t}clampPanPosition(){if(!this.data)return;let t=1/0,n=-1/0;for(const a of this.data.events){const c=Q(a.time);t=Math.min(t,c),n=Math.max(n,c)}for(const a of this.data.periods){const c=Q(a.startTime),u=Er(a.endTime,!1);t=Math.min(t,c),n=Math.max(n,u)}if(t===1/0||n===-1/0)return;const r=this.viewport.endTime-this.viewport.startTime,i=r*.15,o=t-i+r/2,s=n+i-r/2;this.viewport.centerTime=Math.max(o,Math.min(s,this.viewport.centerTime))}recalculateViewportBounds(){const t=this.viewport.endTime-this.viewport.startTime;this.viewport.startTime=this.viewport.centerTime-t/2,this.viewport.endTime=this.viewport.centerTime+t/2}timeToX(t){const n=this.viewport.endTime-this.viewport.startTime,r=this.options.width/n;return(t-this.viewport.startTime)*r}buildRowMapping(){const t=new Map,n=this.laneAssignments.filter(l=>l.type==="period"),r=this.laneAssignments.filter(l=>l.type==="event"),i=[...new Set(n.map(l=>l.lane))].sort((l,h)=>l-h);n.forEach(l=>{const h=i.indexOf(l.lane);t.set(l.itemId,h)});const o=new Set(i),s=r.filter(l=>o.has(l.lane)),a=r.filter(l=>!o.has(l.lane));s.forEach(l=>{const h=i.indexOf(l.lane);t.set(l.itemId,h)});const c=i.length,u=[...new Set(a.map(l=>l.lane))].sort((l,h)=>l-h);return a.forEach(l=>{const h=u.indexOf(l.lane),d=c+h;t.set(l.itemId,d)}),t}rowToY(t,n){const r=this.options.constraints.periodHeight,i=20,o=this.options.constraints.laneGap,s=60,c=o/3;return n==="period"?s+c+t*(r+o):s+c+t*(i+o)}eventToY(t,n,r){const i=this.options.constraints.periodHeight,o=this.options.constraints.laneGap,s=60,a=o/3,c=a;return r?s+c+t*(i+o)+i+n*a:s+c+t*(20+o)+n*a}renderTimeline(){if(!(!this.svg||!this.data)){this.svg.innerHTML="",this.options.showRowNumbers&&this.renderRowNumbers(),this.renderTimeAxis();for(const t of this.data.connectors)t.type==="undefined"&&this.renderConnector(t);for(const t of this.data.connectors)t.type!=="undefined"&&this.renderConnector(t);for(const t of this.data.periods)this.renderPeriod(t);this.renderEventsWithLabelPositioning(this.data.events)}}renderRowNumbers(){if(!this.svg)return;const t=this.rowMapping.size>0?Math.max(...this.rowMapping.values())+1:0,n=this.options.constraints.periodHeight;for(let r=0;r<t;r++){let i=!0;for(const[c,u]of this.rowMapping.entries())if(u===r&&this.laneAssignments.find(h=>h.itemId===c)?.type==="period"){i=!1;break}const o=this.rowToY(r,i?"event":"period"),s=document.createElementNS("http://www.w3.org/2000/svg","rect");s.setAttribute("x","0"),s.setAttribute("y",o.toString()),s.setAttribute("width","30"),s.setAttribute("height",n.toString()),s.setAttribute("fill","#f0f0f0"),s.setAttribute("stroke","#ccc"),s.setAttribute("stroke-width","0.5"),this.svg.appendChild(s);const a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttribute("x","15"),a.setAttribute("y",(o+n/2+4).toString()),a.setAttribute("text-anchor","middle"),a.setAttribute("font-size","10"),a.setAttribute("fill","#666"),a.setAttribute("font-family","monospace"),a.textContent=r.toString(),this.svg.appendChild(a)}}renderTimeAxis(){if(!this.svg)return;const t=document.createElementNS("http://www.w3.org/2000/svg","rect");t.setAttribute("id","time-axis-background"),t.setAttribute("x","0"),t.setAttribute("y","0"),t.setAttribute("width",this.options.width.toString()),t.setAttribute("height","40"),t.setAttribute("fill","#f8f9fa"),this.svg.appendChild(t),this.renderBigBangBoundary();const n=document.createElementNS("http://www.w3.org/2000/svg","line");n.setAttribute("x1","0"),n.setAttribute("y1","40"),n.setAttribute("x2",this.options.width.toString()),n.setAttribute("y2","40"),n.setAttribute("stroke","#666"),n.setAttribute("stroke-width","2"),this.svg.appendChild(n);const r=40,i=this.options.width-r*2,o=10,s=this.viewport.endTime-this.viewport.startTime;for(let a=0;a<=o;a++){const c=r+i/o*a,u=(c-0)/this.options.width,l=this.viewport.startTime+s*u,h=document.createElementNS("http://www.w3.org/2000/svg","line");if(h.setAttribute("x1",c.toString()),h.setAttribute("y1","40"),h.setAttribute("x2",c.toString()),h.setAttribute("y2","50"),h.setAttribute("stroke","#666"),h.setAttribute("stroke-width","1"),this.svg.appendChild(h),l>=Cn){const d=document.createElementNS("http://www.w3.org/2000/svg","text");d.setAttribute("x",c.toString()),d.setAttribute("y","25"),d.setAttribute("text-anchor","middle"),d.setAttribute("font-size","11"),d.setAttribute("fill","#666"),d.textContent=this.formatTimeLabel(l),this.svg.appendChild(d)}}}renderBigBangBoundary(){if(!this.svg)return;const t=this.timeToX(Cn);if(t<0||t>this.options.width)return;const n=parseFloat(this.svg.getAttribute("height")||"500"),r="static-noise-pattern";let i=this.svg.querySelector("defs");i||(i=document.createElementNS("http://www.w3.org/2000/svg","defs"),this.svg.insertBefore(i,this.svg.firstChild));const o=i.querySelector(`#${r}`);o&&o.remove();const s=document.createElementNS("http://www.w3.org/2000/svg","filter");s.setAttribute("id","noise-filter"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("width","100%"),s.setAttribute("height","100%");const a=document.createElementNS("http://www.w3.org/2000/svg","feTurbulence");a.setAttribute("type","fractalNoise"),a.setAttribute("baseFrequency","2.5"),a.setAttribute("numOctaves","5"),a.setAttribute("result","noise");const c=document.createElementNS("http://www.w3.org/2000/svg","feColorMatrix");if(c.setAttribute("in","noise"),c.setAttribute("type","matrix"),c.setAttribute("values","0 0 0 0 0.5 0 0 0 0 0.5 0 0 0 0 0.5 0 0 0 1 0"),s.appendChild(a),s.appendChild(c),i.appendChild(s),t>0){const u=document.createElementNS("http://www.w3.org/2000/svg","rect");u.setAttribute("x","0"),u.setAttribute("y","40"),u.setAttribute("width",t.toString()),u.setAttribute("height",(n-40).toString()),u.setAttribute("fill","#d0d0d0"),u.setAttribute("filter","url(#noise-filter)"),u.setAttribute("opacity","0.35"),this.svg.appendChild(u);const l=document.createElementNS("http://www.w3.org/2000/svg","line");l.setAttribute("x1",t.toString()),l.setAttribute("y1","40"),l.setAttribute("x2",t.toString()),l.setAttribute("y2",n.toString()),l.setAttribute("stroke","#333"),l.setAttribute("stroke-width","2"),l.setAttribute("stroke-dasharray","5,5"),this.svg.appendChild(l);const h=document.createElementNS("http://www.w3.org/2000/svg","text");h.setAttribute("x",(t-5).toString()),h.setAttribute("y","55"),h.setAttribute("text-anchor","end"),h.setAttribute("font-size","10"),h.setAttribute("fill","#666"),h.setAttribute("font-style","italic"),h.textContent="Big Bang",this.svg.appendChild(h)}}formatTimeLabel(t){return t<-1e6?`${(Math.abs(t)/1e6).toFixed(0)}M BCE`:t<0?`${Math.abs(Math.floor(t))} BCE`:t<1e3?`${Math.floor(t)} CE`:Math.floor(t).toString()}formatTimeForDisplay(t){if(typeof t=="string")try{return new Date(t).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}catch{return t}else{if(t instanceof Temporal.Instant)return new Date(t.epochMilliseconds).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"});if("era"in t)return`${t.year} ${t.era}`;if("unit"in t)return t.unit==="mya"?`${t.value} million years ago`:`${t.value} years ago`;if("localTime"in t)return`${t.localTime} (${t.timezone})`}return String(t)}renderPeriod(t){if(!this.svg)return;const n=this.laneAssignments.find(d=>d.itemId===t.id);if(!n)return;const r=this.rowMapping.get(t.id);if(r===void 0)return;const i=this.timeToX(n.startTime),o=n.endTime===1/0?La():n.endTime,s=this.timeToX(o),a=this.rowToY(r,"period"),c=Math.max(2,s-i),u=this.options.constraints.periodHeight,l=document.createElementNS("http://www.w3.org/2000/svg","rect");if(l.setAttribute("id",t.id),l.setAttribute("x",i.toString()),l.setAttribute("y",a.toString()),l.setAttribute("width",c.toString()),l.setAttribute("height",u.toString()),l.setAttribute("fill","#000"),l.setAttribute("fill-opacity","1"),l.setAttribute("stroke","#000"),l.setAttribute("stroke-width","1"),l.setAttribute("rx","5"),l.setAttribute("ry",(u*.35).toString()),l.style.cursor="pointer",l.addEventListener("click",d=>{if(d.stopPropagation(),this.infoPopup){const g=this.formatTimeForDisplay(t.startTime),p=t.endTime?this.formatTimeForDisplay(t.endTime):"ongoing";let w=`${t.name}
${g}  ${p}`;t.info&&(w+=`

${t.info}`),this.infoPopup.show(w,d.clientX,d.clientY)}this.emit("itemClick",t)}),this.svg.appendChild(l),!this.renderPeriodLabel(t.name,i,a,c,u)){let d=null;l.addEventListener("mouseenter",()=>{this.svg&&(d=document.createElementNS("http://www.w3.org/2000/svg","text"),d.setAttribute("x",(i+c/2).toString()),d.setAttribute("y",(a+u+14).toString()),d.setAttribute("text-anchor","middle"),d.setAttribute("font-size","11"),d.setAttribute("fill","#000"),d.setAttribute("font-weight","bold"),d.setAttribute("pointer-events","none"),d.textContent=t.name,this.svg.appendChild(d))}),l.addEventListener("mouseleave",()=>{d&&(d.remove(),d=null)})}}renderPeriodLabel(t,n,r,i,o){if(!this.svg)return!1;const a=i-8*2;if(a<=0)return!1;const c=n+i/2,u=11,l=u+2,h=D=>{const E=document.createElementNS("http://www.w3.org/2000/svg","text");E.setAttribute("font-size",u.toString()),E.setAttribute("font-weight","bold"),E.textContent=D,this.svg.appendChild(E);const R=E.getBBox();return E.remove(),R.width};if(h(t)<=a){const D=document.createElementNS("http://www.w3.org/2000/svg","text");return D.setAttribute("x",c.toString()),D.setAttribute("y",(r+o/2+u/3).toString()),D.setAttribute("text-anchor","middle"),D.setAttribute("font-size",u.toString()),D.setAttribute("fill","#fff"),D.setAttribute("font-weight","bold"),D.setAttribute("pointer-events","none"),D.textContent=t,this.svg.appendChild(D),!0}const g=t.split(" ");if(g.length<2)return!1;let p=1,w=1/0;for(let D=1;D<g.length;D++){const E=g.slice(0,D).join(" "),R=g.slice(D).join(" "),H=Math.max(h(E),h(R));H<w&&(w=H,p=D)}if(w>a)return!1;const y=g.slice(0,p).join(" "),v=g.slice(p).join(" "),_=document.createElementNS("http://www.w3.org/2000/svg","text");_.setAttribute("x",c.toString()),_.setAttribute("y",(r+o/2-l/2+u/3).toString()),_.setAttribute("text-anchor","middle"),_.setAttribute("font-size",u.toString()),_.setAttribute("fill","#fff"),_.setAttribute("font-weight","bold"),_.setAttribute("pointer-events","none"),_.textContent=y,this.svg.appendChild(_);const T=document.createElementNS("http://www.w3.org/2000/svg","text");return T.setAttribute("x",c.toString()),T.setAttribute("y",(r+o/2+l/2+u/3).toString()),T.setAttribute("text-anchor","middle"),T.setAttribute("font-size",u.toString()),T.setAttribute("fill","#fff"),T.setAttribute("font-weight","bold"),T.setAttribute("pointer-events","none"),T.textContent=v,this.svg.appendChild(T),!0}renderEventsWithLabelPositioning(t){if(!this.svg)return;const n=20,r=4,i=8,o=10,s=6,a=o+4,c=[];for(const l of t){const h=this.laneAssignments.find(T=>T.itemId===l.id);if(!h)continue;const d=this.rowMapping.get(l.id);if(d===void 0)continue;const g=this.timeToX(h.startTime),p=h.subLane??1,w=!!l.relates_to,v=this.eventToY(d,p,w)+n/2,_=l.name.length*s;c.push({id:l.id,circleX:g,circleY:v,circleRadius:r,labelY:v-a/2,labelHeight:a,labelWidth:_,rightLabelX:g+i,leftLabelX:g-i-_})}const u=new Map;for(const l of c){if(!this.checkLabelOverlap(l,"right",c,u)){u.set(l.id,"right");continue}this.checkLabelOverlap(l,"left",c,u)?u.set(l.id,"hidden"):u.set(l.id,"left")}for(const l of t){const h=u.get(l.id)??"right";this.renderEvent(l,h)}}checkLabelOverlap(t,n,r,i){const o=n==="right"?t.rightLabelX:t.leftLabelX,s=o+t.labelWidth,a=t.labelY,c=t.labelY+t.labelHeight;for(const u of r){if(u.id===t.id)continue;const l=u.circleX-u.circleRadius,h=u.circleX+u.circleRadius,d=u.circleY-u.circleRadius,g=u.circleY+u.circleRadius;if(o<h&&s>l&&a<g&&c>d)return!0;const p=i.get(u.id);if(p&&p!=="hidden"){const w=p==="right"?u.rightLabelX:u.leftLabelX,y=w+u.labelWidth,v=u.labelY,_=u.labelY+u.labelHeight;if(o<y&&s>w&&a<_&&c>v)return!0}}return!1}renderEvent(t,n="right"){if(!this.svg)return;const r=this.laneAssignments.find(h=>h.itemId===t.id);if(!r)return;const i=this.rowMapping.get(t.id);if(i===void 0)return;const o=this.timeToX(r.startTime),s=20,a=r.subLane??1,c=!!t.relates_to,u=this.eventToY(i,a,c),l=document.createElementNS("http://www.w3.org/2000/svg","circle");if(l.setAttribute("id",t.id),l.setAttribute("cx",o.toString()),l.setAttribute("cy",(u+s/2).toString()),l.setAttribute("r","4"),l.setAttribute("fill","none"),l.setAttribute("stroke","#000"),l.setAttribute("stroke-width","2"),l.style.cursor="pointer",l.addEventListener("click",h=>{if(h.stopPropagation(),this.infoPopup){const d=this.formatTimeForDisplay(t.time);let g=`${t.name}
${d}`;t.info&&(g+=`

${t.info}`),this.infoPopup.show(g,h.clientX,h.clientY)}this.emit("itemClick",t)}),this.svg.appendChild(l),n!=="hidden"){const h=document.createElementNS("http://www.w3.org/2000/svg","text");n==="right"?(h.setAttribute("x",(o+8).toString()),h.setAttribute("text-anchor","start")):(h.setAttribute("x",(o-8).toString()),h.setAttribute("text-anchor","end")),h.setAttribute("y",(u+s/2+4).toString()),h.setAttribute("font-size","10"),h.setAttribute("fill","#333"),h.setAttribute("pointer-events","none"),h.textContent=t.name,this.svg.appendChild(h)}}renderConnector(t){if(!this.svg||!this.data)return;const n=this.laneAssignments.find(E=>E.itemId===t.fromId),r=this.laneAssignments.find(E=>E.itemId===t.toId);if(!n||!r)return;const i=this.timeToX(n.startTime),s=this.timeToX(n.endTime)-i,a=this.timeToX(r.startTime),u=this.timeToX(r.endTime)-a;if(s<10||u<10)return;const l=this.rowMapping.get(t.fromId),h=this.rowMapping.get(t.toId);if(l===void 0||h===void 0)return;const g=this.data.periods.find(E=>E.id===t.fromId)?"#000":"#f587f3",p=Math.min(n.endTime,r.startTime),w=this.timeToX(p),y=this.timeToX(r.startTime),v=this.rowToY(l,n.type)+this.options.constraints.periodHeight/2,_=this.rowToY(h,r.type)+this.options.constraints.periodHeight/2,T=Uc[this.options.connectorRenderer];if(!T){console.warn(`Connector renderer not found: ${this.options.connectorRenderer}`);return}T.render({fromX:w,fromY:v,toX:y,toY:_,connectorType:t.type,color:g,opacity:.85}).forEach(E=>{E.setAttribute("id",t.id),this.svg.appendChild(E)})}}typeof globalThis.Temporal>"u"&&(globalThis.Temporal=Vu),tt.BIG_BANG_TIME=Cn,tt.CONNECTOR_RENDERERS=Uc,tt.DEFAULT_CONNECTOR=Fc,tt.DEFAULT_PERIOD_LAYOUT=za,tt.PERIOD_LAYOUT_ALGORITHMS=Sa,tt.TimelineRenderer=xm,tt.assignLanes=ja,tt.determineTimeScale=Ju,tt.formatTime=Qu,tt.formatValidationResult=ll,tt.getLaneCount=cl,tt.normalizeTime=Q,tt.validateTimelineData=ul,Object.defineProperty(tt,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=thymeline.umd.cjs.map
