(function(et,f){typeof exports=="object"&&typeof module<"u"?f(exports):typeof define=="function"&&define.amd?define(["exports"],f):(et=typeof globalThis<"u"?globalThis:et||self,f(et.Thymeline={}))})(this,(function(et){"use strict";class f extends Array{constructor(t,n){if(super(t),this.sign=n,Object.setPrototypeOf(this,f.prototype),t>f.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded")}static BigInt(t){var n=Math.floor,r=Number.isFinite;if(typeof t=="number"){if(t===0)return f.__zero();if(f.__isOneDigitInt(t))return 0>t?f.__oneDigit(-t,!0):f.__oneDigit(t,!1);if(!r(t)||n(t)!==t)throw new RangeError("The number "+t+" cannot be converted to BigInt because it is not an integer");return f.__fromDouble(t)}if(typeof t=="string"){const i=f.__fromString(t);if(i===null)throw new SyntaxError("Cannot convert "+t+" to a BigInt");return i}if(typeof t=="boolean")return t===!0?f.__oneDigit(1,!1):f.__zero();if(typeof t=="object"){if(t.constructor===f)return t;const i=f.__toPrimitive(t);return f.BigInt(i)}throw new TypeError("Cannot convert "+t+" to a BigInt")}toDebugString(){const t=["BigInt["];for(const n of this)t.push((n&&(n>>>0).toString(16))+", ");return t.push("]"),t.join("")}toString(t=10){if(2>t||36<t)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":(t&t-1)==0?f.__toStringBasePowerOfTwo(this,t):f.__toStringGeneric(this,t,!1)}valueOf(){throw new Error("Convert JSBI instances to native numbers using `toNumber`.")}static toNumber(t){const n=t.length;if(n===0)return 0;if(n===1){const y=t.__unsignedDigit(0);return t.sign?-y:y}const r=t.__digit(n-1),i=f.__clz30(r),o=30*n-i;if(1024<o)return t.sign?-1/0:1/0;let s=o-1,a=r,c=n-1;const l=i+3;let u=l===32?0:a<<l;u>>>=12;const h=l-12;let d=12<=l?0:a<<20+l,g=20+l;for(0<h&&0<c&&(c--,a=t.__digit(c),u|=a>>>30-h,d=a<<h+2,g=h+2);0<g&&0<c;)c--,a=t.__digit(c),d|=30<=g?a<<g-30:a>>>30-g,g-=30;const p=f.__decideRounding(t,g,c,a);if((p===1||p===0&&(1&d)==1)&&(d=d+1>>>0,d===0&&(u++,u>>>20!=0&&(u=0,s++,1023<s))))return t.sign?-1/0:1/0;const w=t.sign?-2147483648:0;return s=s+1023<<20,f.__kBitConversionInts[f.__kBitConversionIntHigh]=w|s|u,f.__kBitConversionInts[f.__kBitConversionIntLow]=d,f.__kBitConversionDouble[0]}static unaryMinus(t){if(t.length===0)return t;const n=t.__copy();return n.sign=!t.sign,n}static bitwiseNot(t){return t.sign?f.__absoluteSubOne(t).__trim():f.__absoluteAddOne(t,!0)}static exponentiate(t,n){if(n.sign)throw new RangeError("Exponent must be positive");if(n.length===0)return f.__oneDigit(1,!1);if(t.length===0)return t;if(t.length===1&&t.__digit(0)===1)return t.sign&&(1&n.__digit(0))==0?f.unaryMinus(t):t;if(1<n.length)throw new RangeError("BigInt too big");let r=n.__unsignedDigit(0);if(r===1)return t;if(r>=f.__kMaxLengthBits)throw new RangeError("BigInt too big");if(t.length===1&&t.__digit(0)===2){const s=1+(0|r/30),a=t.sign&&(1&r)!=0,c=new f(s,a);c.__initializeDigits();const l=1<<r%30;return c.__setDigit(s-1,l),c}let i=null,o=t;for((1&r)!=0&&(i=t),r>>=1;r!==0;r>>=1)o=f.multiply(o,o),(1&r)!=0&&(i===null?i=o:i=f.multiply(i,o));return i}static multiply(t,n){if(t.length===0)return t;if(n.length===0)return n;let r=t.length+n.length;30<=t.__clzmsd()+n.__clzmsd()&&r--;const i=new f(r,t.sign!==n.sign);i.__initializeDigits();for(let o=0;o<t.length;o++)f.__multiplyAccumulate(n,t.__digit(o),i,o);return i.__trim()}static divide(t,n){if(n.length===0)throw new RangeError("Division by zero");if(0>f.__absoluteCompare(t,n))return f.__zero();const r=t.sign!==n.sign,i=n.__unsignedDigit(0);let o;if(n.length===1&&32767>=i){if(i===1)return r===t.sign?t:f.unaryMinus(t);o=f.__absoluteDivSmall(t,i,null)}else o=f.__absoluteDivLarge(t,n,!0,!1);return o.sign=r,o.__trim()}static remainder(t,n){if(n.length===0)throw new RangeError("Division by zero");if(0>f.__absoluteCompare(t,n))return t;const r=n.__unsignedDigit(0);if(n.length===1&&32767>=r){if(r===1)return f.__zero();const o=f.__absoluteModSmall(t,r);return o===0?f.__zero():f.__oneDigit(o,t.sign)}const i=f.__absoluteDivLarge(t,n,!1,!0);return i.sign=t.sign,i.__trim()}static add(t,n){const r=t.sign;return r===n.sign?f.__absoluteAdd(t,n,r):0<=f.__absoluteCompare(t,n)?f.__absoluteSub(t,n,r):f.__absoluteSub(n,t,!r)}static subtract(t,n){const r=t.sign;return r===n.sign?0<=f.__absoluteCompare(t,n)?f.__absoluteSub(t,n,r):f.__absoluteSub(n,t,!r):f.__absoluteAdd(t,n,r)}static leftShift(t,n){return n.length===0||t.length===0?t:n.sign?f.__rightShiftByAbsolute(t,n):f.__leftShiftByAbsolute(t,n)}static signedRightShift(t,n){return n.length===0||t.length===0?t:n.sign?f.__leftShiftByAbsolute(t,n):f.__rightShiftByAbsolute(t,n)}static unsignedRightShift(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}static lessThan(t,n){return 0>f.__compareToBigInt(t,n)}static lessThanOrEqual(t,n){return 0>=f.__compareToBigInt(t,n)}static greaterThan(t,n){return 0<f.__compareToBigInt(t,n)}static greaterThanOrEqual(t,n){return 0<=f.__compareToBigInt(t,n)}static equal(t,n){if(t.sign!==n.sign||t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t.__digit(r)!==n.__digit(r))return!1;return!0}static notEqual(t,n){return!f.equal(t,n)}static bitwiseAnd(t,n){var r=Math.max;if(!t.sign&&!n.sign)return f.__absoluteAnd(t,n).__trim();if(t.sign&&n.sign){const i=r(t.length,n.length)+1;let o=f.__absoluteSubOne(t,i);const s=f.__absoluteSubOne(n);return o=f.__absoluteOr(o,s,o),f.__absoluteAddOne(o,!0,o).__trim()}return t.sign&&([t,n]=[n,t]),f.__absoluteAndNot(t,f.__absoluteSubOne(n)).__trim()}static bitwiseXor(t,n){var r=Math.max;if(!t.sign&&!n.sign)return f.__absoluteXor(t,n).__trim();if(t.sign&&n.sign){const s=r(t.length,n.length),a=f.__absoluteSubOne(t,s),c=f.__absoluteSubOne(n);return f.__absoluteXor(a,c,a).__trim()}const i=r(t.length,n.length)+1;t.sign&&([t,n]=[n,t]);let o=f.__absoluteSubOne(n,i);return o=f.__absoluteXor(o,t,o),f.__absoluteAddOne(o,!0,o).__trim()}static bitwiseOr(t,n){var r=Math.max;const i=r(t.length,n.length);if(!t.sign&&!n.sign)return f.__absoluteOr(t,n).__trim();if(t.sign&&n.sign){let s=f.__absoluteSubOne(t,i);const a=f.__absoluteSubOne(n);return s=f.__absoluteAnd(s,a,s),f.__absoluteAddOne(s,!0,s).__trim()}t.sign&&([t,n]=[n,t]);let o=f.__absoluteSubOne(n,i);return o=f.__absoluteAndNot(o,t,o),f.__absoluteAddOne(o,!0,o).__trim()}static asIntN(t,n){var r=Math.floor;if(n.length===0)return n;if(t=r(t),0>t)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(t===0)return f.__zero();if(t>=f.__kMaxLengthBits)return n;const i=0|(t+29)/30;if(n.length<i)return n;const o=n.__unsignedDigit(i-1),s=1<<(t-1)%30;if(n.length===i&&o<s)return n;if((o&s)!==s)return f.__truncateToNBits(t,n);if(!n.sign)return f.__truncateAndSubFromPowerOfTwo(t,n,!0);if((o&s-1)==0){for(let a=i-2;0<=a;a--)if(n.__digit(a)!==0)return f.__truncateAndSubFromPowerOfTwo(t,n,!1);return n.length===i&&o===s?n:f.__truncateToNBits(t,n)}return f.__truncateAndSubFromPowerOfTwo(t,n,!1)}static asUintN(t,n){var r=Math.floor;if(n.length===0)return n;if(t=r(t),0>t)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(t===0)return f.__zero();if(n.sign){if(t>f.__kMaxLengthBits)throw new RangeError("BigInt too big");return f.__truncateAndSubFromPowerOfTwo(t,n,!1)}if(t>=f.__kMaxLengthBits)return n;const i=0|(t+29)/30;if(n.length<i)return n;const o=t%30;return n.length==i&&(o===0||!(n.__digit(i-1)>>>o))?n:f.__truncateToNBits(t,n)}static ADD(t,n){if(t=f.__toPrimitive(t),n=f.__toPrimitive(n),typeof t=="string")return typeof n!="string"&&(n=n.toString()),t+n;if(typeof n=="string")return t.toString()+n;if(t=f.__toNumeric(t),n=f.__toNumeric(n),f.__isBigInt(t)&&f.__isBigInt(n))return f.add(t,n);if(typeof t=="number"&&typeof n=="number")return t+n;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}static LT(t,n){return f.__compare(t,n,0)}static LE(t,n){return f.__compare(t,n,1)}static GT(t,n){return f.__compare(t,n,2)}static GE(t,n){return f.__compare(t,n,3)}static EQ(t,n){for(;;){if(f.__isBigInt(t))return f.__isBigInt(n)?f.equal(t,n):f.EQ(n,t);if(typeof t=="number"){if(f.__isBigInt(n))return f.__equalToNumber(n,t);if(typeof n!="object")return t==n;n=f.__toPrimitive(n)}else if(typeof t=="string"){if(f.__isBigInt(n))return t=f.__fromString(t),t!==null&&f.equal(t,n);if(typeof n!="object")return t==n;n=f.__toPrimitive(n)}else if(typeof t=="boolean"){if(f.__isBigInt(n))return f.__equalToNumber(n,+t);if(typeof n!="object")return t==n;n=f.__toPrimitive(n)}else if(typeof t=="symbol"){if(f.__isBigInt(n))return!1;if(typeof n!="object")return t==n;n=f.__toPrimitive(n)}else if(typeof t=="object"){if(typeof n=="object"&&n.constructor!==f)return t==n;t=f.__toPrimitive(t)}else return t==n}}static NE(t,n){return!f.EQ(t,n)}static DataViewGetBigInt64(t,n,r=!1){return f.asIntN(64,f.DataViewGetBigUint64(t,n,r))}static DataViewGetBigUint64(t,n,r=!1){const[i,o]=r?[4,0]:[0,4],s=t.getUint32(n+i,r),a=t.getUint32(n+o,r),c=new f(3,!1);return c.__setDigit(0,1073741823&a),c.__setDigit(1,(268435455&s)<<2|a>>>30),c.__setDigit(2,s>>>28),c.__trim()}static DataViewSetBigInt64(t,n,r,i=!1){f.DataViewSetBigUint64(t,n,r,i)}static DataViewSetBigUint64(t,n,r,i=!1){r=f.asUintN(64,r);let o=0,s=0;if(0<r.length&&(s=r.__digit(0),1<r.length)){const l=r.__digit(1);s|=l<<30,o=l>>>2,2<r.length&&(o|=r.__digit(2)<<28)}const[a,c]=i?[4,0]:[0,4];t.setUint32(n+a,o,i),t.setUint32(n+c,s,i)}static __zero(){return new f(0,!1)}static __oneDigit(t,n){const r=new f(1,n);return r.__setDigit(0,t),r}__copy(){const t=new f(this.length,this.sign);for(let n=0;n<this.length;n++)t[n]=this[n];return t}__trim(){let t=this.length,n=this[t-1];for(;n===0;)t--,n=this[t-1],this.pop();return t===0&&(this.sign=!1),this}__initializeDigits(){for(let t=0;t<this.length;t++)this[t]=0}static __decideRounding(t,n,r,i){if(0<n)return-1;let o;if(0>n)o=-n-1;else{if(r===0)return-1;r--,i=t.__digit(r),o=29}let s=1<<o;if((i&s)==0)return-1;if(s-=1,(i&s)!=0)return 1;for(;0<r;)if(r--,t.__digit(r)!==0)return 1;return 0}static __fromDouble(t){f.__kBitConversionDouble[0]=t;const n=2047&f.__kBitConversionInts[f.__kBitConversionIntHigh]>>>20,r=n-1023,i=(0|r/30)+1,o=new f(i,0>t);let s=1048575&f.__kBitConversionInts[f.__kBitConversionIntHigh]|1048576,a=f.__kBitConversionInts[f.__kBitConversionIntLow];const c=20,l=r%30;let u,h=0;if(l<20){const d=c-l;h=d+32,u=s>>>d,s=s<<32-d|a>>>d,a<<=32-d}else if(l===20)h=32,u=s,s=a,a=0;else{const d=l-c;h=32-d,u=s<<d|a>>>32-d,s=a<<d,a=0}o.__setDigit(i-1,u);for(let d=i-2;0<=d;d--)0<h?(h-=30,u=s>>>2,s=s<<30|a>>>2,a<<=30):u=0,o.__setDigit(d,u);return o.__trim()}static __isWhitespace(t){return 13>=t&&9<=t||(159>=t?t==32:131071>=t?t==160||t==5760:196607>=t?(t&=131071,10>=t||t==40||t==41||t==47||t==95||t==4096):t==65279)}static __fromString(t,n=0){let r=0;const i=t.length;let o=0;if(o===i)return f.__zero();let s=t.charCodeAt(o);for(;f.__isWhitespace(s);){if(++o===i)return f.__zero();s=t.charCodeAt(o)}if(s===43){if(++o===i)return null;s=t.charCodeAt(o),r=1}else if(s===45){if(++o===i)return null;s=t.charCodeAt(o),r=-1}if(n===0){if(n=10,s===48){if(++o===i)return f.__zero();if(s=t.charCodeAt(o),s===88||s===120){if(n=16,++o===i)return null;s=t.charCodeAt(o)}else if(s===79||s===111){if(n=8,++o===i)return null;s=t.charCodeAt(o)}else if(s===66||s===98){if(n=2,++o===i)return null;s=t.charCodeAt(o)}}}else if(n===16&&s===48){if(++o===i)return f.__zero();if(s=t.charCodeAt(o),s===88||s===120){if(++o===i)return null;s=t.charCodeAt(o)}}if(r!=0&&n!==10)return null;for(;s===48;){if(++o===i)return f.__zero();s=t.charCodeAt(o)}const a=i-o;let c=f.__kMaxBitsPerChar[n],l=f.__kBitsPerCharTableMultiplier-1;if(a>1073741824/c)return null;const u=c*a+l>>>f.__kBitsPerCharTableShift,h=new f(0|(u+29)/30,!1),d=10>n?n:10,g=10<n?n-10:0;if((n&n-1)==0){c>>=f.__kBitsPerCharTableShift;const p=[],w=[];let y=!1;do{let v=0,_=0;for(;;){let T;if(s-48>>>0<d)T=s-48;else if((32|s)-97>>>0<g)T=(32|s)-87;else{y=!0;break}if(_+=c,v=v<<c|T,++o===i){y=!0;break}if(s=t.charCodeAt(o),30<_+c)break}p.push(v),w.push(_)}while(!y);f.__fillFromParts(h,p,w)}else{h.__initializeDigits();let p=!1,w=0;do{let y=0,v=1;for(;;){let T;if(s-48>>>0<d)T=s-48;else if((32|s)-97>>>0<g)T=(32|s)-87;else{p=!0;break}const M=v*n;if(1073741823<M)break;if(v=M,y=y*n+T,w++,++o===i){p=!0;break}s=t.charCodeAt(o)}l=30*f.__kBitsPerCharTableMultiplier-1;const _=0|(c*w+l>>>f.__kBitsPerCharTableShift)/30;h.__inplaceMultiplyAdd(v,y,_)}while(!p)}if(o!==i){if(!f.__isWhitespace(s))return null;for(o++;o<i;o++)if(s=t.charCodeAt(o),!f.__isWhitespace(s))return null}return h.sign=r==-1,h.__trim()}static __fillFromParts(t,n,r){let i=0,o=0,s=0;for(let a=n.length-1;0<=a;a--){const c=n[a],l=r[a];o|=c<<s,s+=l,s===30?(t.__setDigit(i++,o),s=0,o=0):30<s&&(t.__setDigit(i++,1073741823&o),s-=30,o=c>>>l-s)}if(o!==0){if(i>=t.length)throw new Error("implementation bug");t.__setDigit(i++,o)}for(;i<t.length;i++)t.__setDigit(i,0)}static __toStringBasePowerOfTwo(t,n){const r=t.length;let i=n-1;i=(85&i>>>1)+(85&i),i=(51&i>>>2)+(51&i),i=(15&i>>>4)+(15&i);const o=i,s=n-1,a=t.__digit(r-1),c=f.__clz30(a);let l=0|(30*r-c+o-1)/o;if(t.sign&&l++,268435456<l)throw new Error("string too long");const u=Array(l);let h=l-1,d=0,g=0;for(let w=0;w<r-1;w++){const y=t.__digit(w),v=(d|y<<g)&s;u[h--]=f.__kConversionChars[v];const _=o-g;for(d=y>>>_,g=30-_;g>=o;)u[h--]=f.__kConversionChars[d&s],d>>>=o,g-=o}const p=(d|a<<g)&s;for(u[h--]=f.__kConversionChars[p],d=a>>>o-g;d!==0;)u[h--]=f.__kConversionChars[d&s],d>>>=o;if(t.sign&&(u[h--]="-"),h!=-1)throw new Error("implementation bug");return u.join("")}static __toStringGeneric(t,n,r){const i=t.length;if(i===0)return"";if(i===1){let w=t.__unsignedDigit(0).toString(n);return r===!1&&t.sign&&(w="-"+w),w}const o=30*i-f.__clz30(t.__digit(i-1)),s=f.__kMaxBitsPerChar[n],a=s-1;let c=o*f.__kBitsPerCharTableMultiplier;c+=a-1,c=0|c/a;const l=c+1>>1,u=f.exponentiate(f.__oneDigit(n,!1),f.__oneDigit(l,!1));let h,d;const g=u.__unsignedDigit(0);if(u.length===1&&32767>=g){h=new f(t.length,!1),h.__initializeDigits();let w=0;for(let y=2*t.length-1;0<=y;y--){const v=w<<15|t.__halfDigit(y);h.__setHalfDigit(y,0|v/g),w=0|v%g}d=w.toString(n)}else{const w=f.__absoluteDivLarge(t,u,!0,!0);h=w.quotient;const y=w.remainder.__trim();d=f.__toStringGeneric(y,n,!0)}h.__trim();let p=f.__toStringGeneric(h,n,!0);for(;d.length<l;)d="0"+d;return r===!1&&t.sign&&(p="-"+p),p+d}static __unequalSign(t){return t?-1:1}static __absoluteGreater(t){return t?-1:1}static __absoluteLess(t){return t?1:-1}static __compareToBigInt(t,n){const r=t.sign;if(r!==n.sign)return f.__unequalSign(r);const i=f.__absoluteCompare(t,n);return 0<i?f.__absoluteGreater(r):0>i?f.__absoluteLess(r):0}static __compareToNumber(t,n){if(f.__isOneDigitInt(n)){const r=t.sign,i=0>n;if(r!==i)return f.__unequalSign(r);if(t.length===0){if(i)throw new Error("implementation bug");return n===0?0:-1}if(1<t.length)return f.__absoluteGreater(r);const o=Math.abs(n),s=t.__unsignedDigit(0);return s>o?f.__absoluteGreater(r):s<o?f.__absoluteLess(r):0}return f.__compareToDouble(t,n)}static __compareToDouble(t,n){if(n!==n)return n;if(n===1/0)return-1;if(n===-1/0)return 1;const r=t.sign;if(r!==0>n)return f.__unequalSign(r);if(n===0)throw new Error("implementation bug: should be handled elsewhere");if(t.length===0)return-1;f.__kBitConversionDouble[0]=n;const i=2047&f.__kBitConversionInts[f.__kBitConversionIntHigh]>>>20;if(i==2047)throw new Error("implementation bug: handled elsewhere");const o=i-1023;if(0>o)return f.__absoluteGreater(r);const s=t.length;let a=t.__digit(s-1);const c=f.__clz30(a),l=30*s-c,u=o+1;if(l<u)return f.__absoluteLess(r);if(l>u)return f.__absoluteGreater(r);let h=1048576|1048575&f.__kBitConversionInts[f.__kBitConversionIntHigh],d=f.__kBitConversionInts[f.__kBitConversionIntLow];const g=20,p=29-c;if(p!==(0|(l-1)%30))throw new Error("implementation bug");let w,y=0;if(20>p){const v=g-p;y=v+32,w=h>>>v,h=h<<32-v|d>>>v,d<<=32-v}else if(p===20)y=32,w=h,h=d,d=0;else{const v=p-g;y=32-v,w=h<<v|d>>>32-v,h=d<<v,d=0}if(a>>>=0,w>>>=0,a>w)return f.__absoluteGreater(r);if(a<w)return f.__absoluteLess(r);for(let v=s-2;0<=v;v--){0<y?(y-=30,w=h>>>2,h=h<<30|d>>>2,d<<=30):w=0;const _=t.__unsignedDigit(v);if(_>w)return f.__absoluteGreater(r);if(_<w)return f.__absoluteLess(r)}if(h!==0||d!==0){if(y===0)throw new Error("implementation bug");return f.__absoluteLess(r)}return 0}static __equalToNumber(t,n){var r=Math.abs;return f.__isOneDigitInt(n)?n===0?t.length===0:t.length===1&&t.sign===0>n&&t.__unsignedDigit(0)===r(n):f.__compareToDouble(t,n)===0}static __comparisonResultToBool(t,n){return n===0?0>t:n===1?0>=t:n===2?0<t:n===3?0<=t:void 0}static __compare(t,n,r){if(t=f.__toPrimitive(t),n=f.__toPrimitive(n),typeof t=="string"&&typeof n=="string")switch(r){case 0:return t<n;case 1:return t<=n;case 2:return t>n;case 3:return t>=n}if(f.__isBigInt(t)&&typeof n=="string")return n=f.__fromString(n),n!==null&&f.__comparisonResultToBool(f.__compareToBigInt(t,n),r);if(typeof t=="string"&&f.__isBigInt(n))return t=f.__fromString(t),t!==null&&f.__comparisonResultToBool(f.__compareToBigInt(t,n),r);if(t=f.__toNumeric(t),n=f.__toNumeric(n),f.__isBigInt(t)){if(f.__isBigInt(n))return f.__comparisonResultToBool(f.__compareToBigInt(t,n),r);if(typeof n!="number")throw new Error("implementation bug");return f.__comparisonResultToBool(f.__compareToNumber(t,n),r)}if(typeof t!="number")throw new Error("implementation bug");if(f.__isBigInt(n))return f.__comparisonResultToBool(f.__compareToNumber(n,t),2^r);if(typeof n!="number")throw new Error("implementation bug");return r===0?t<n:r===1?t<=n:r===2?t>n:r===3?t>=n:void 0}__clzmsd(){return f.__clz30(this.__digit(this.length-1))}static __absoluteAdd(t,n,r){if(t.length<n.length)return f.__absoluteAdd(n,t,r);if(t.length===0)return t;if(n.length===0)return t.sign===r?t:f.unaryMinus(t);let i=t.length;(t.__clzmsd()===0||n.length===t.length&&n.__clzmsd()===0)&&i++;const o=new f(i,r);let s=0,a=0;for(;a<n.length;a++){const c=t.__digit(a)+n.__digit(a)+s;s=c>>>30,o.__setDigit(a,1073741823&c)}for(;a<t.length;a++){const c=t.__digit(a)+s;s=c>>>30,o.__setDigit(a,1073741823&c)}return a<o.length&&o.__setDigit(a,s),o.__trim()}static __absoluteSub(t,n,r){if(t.length===0)return t;if(n.length===0)return t.sign===r?t:f.unaryMinus(t);const i=new f(t.length,r);let o=0,s=0;for(;s<n.length;s++){const a=t.__digit(s)-n.__digit(s)-o;o=1&a>>>30,i.__setDigit(s,1073741823&a)}for(;s<t.length;s++){const a=t.__digit(s)-o;o=1&a>>>30,i.__setDigit(s,1073741823&a)}return i.__trim()}static __absoluteAddOne(t,n,r=null){const i=t.length;r===null?r=new f(i,n):r.sign=n;let o=1;for(let s=0;s<i;s++){const a=t.__digit(s)+o;o=a>>>30,r.__setDigit(s,1073741823&a)}return o!=0&&r.__setDigitGrow(i,1),r}static __absoluteSubOne(t,n){const r=t.length;n=n||r;const i=new f(n,!1);let o=1;for(let s=0;s<r;s++){const a=t.__digit(s)-o;o=1&a>>>30,i.__setDigit(s,1073741823&a)}if(o!=0)throw new Error("implementation bug");for(let s=r;s<n;s++)i.__setDigit(s,0);return i}static __absoluteAnd(t,n,r=null){let i=t.length,o=n.length,s=o;if(i<o){s=i;const l=t,u=i;t=n,i=o,n=l,o=u}let a=s;r===null?r=new f(a,!1):a=r.length;let c=0;for(;c<s;c++)r.__setDigit(c,t.__digit(c)&n.__digit(c));for(;c<a;c++)r.__setDigit(c,0);return r}static __absoluteAndNot(t,n,r=null){const i=t.length,o=n.length;let s=o;i<o&&(s=i);let a=i;r===null?r=new f(a,!1):a=r.length;let c=0;for(;c<s;c++)r.__setDigit(c,t.__digit(c)&~n.__digit(c));for(;c<i;c++)r.__setDigit(c,t.__digit(c));for(;c<a;c++)r.__setDigit(c,0);return r}static __absoluteOr(t,n,r=null){let i=t.length,o=n.length,s=o;if(i<o){s=i;const l=t,u=i;t=n,i=o,n=l,o=u}let a=i;r===null?r=new f(a,!1):a=r.length;let c=0;for(;c<s;c++)r.__setDigit(c,t.__digit(c)|n.__digit(c));for(;c<i;c++)r.__setDigit(c,t.__digit(c));for(;c<a;c++)r.__setDigit(c,0);return r}static __absoluteXor(t,n,r=null){let i=t.length,o=n.length,s=o;if(i<o){s=i;const l=t,u=i;t=n,i=o,n=l,o=u}let a=i;r===null?r=new f(a,!1):a=r.length;let c=0;for(;c<s;c++)r.__setDigit(c,t.__digit(c)^n.__digit(c));for(;c<i;c++)r.__setDigit(c,t.__digit(c));for(;c<a;c++)r.__setDigit(c,0);return r}static __absoluteCompare(t,n){const r=t.length-n.length;if(r!=0)return r;let i=t.length-1;for(;0<=i&&t.__digit(i)===n.__digit(i);)i--;return 0>i?0:t.__unsignedDigit(i)>n.__unsignedDigit(i)?1:-1}static __multiplyAccumulate(t,n,r,i){if(n===0)return;const o=32767&n,s=n>>>15;let a=0,c=0;for(let l,u=0;u<t.length;u++,i++){l=r.__digit(i);const h=t.__digit(u),d=32767&h,g=h>>>15,p=f.__imul(d,o),w=f.__imul(d,s),y=f.__imul(g,o),v=f.__imul(g,s);l+=c+p+a,a=l>>>30,l&=1073741823,l+=((32767&w)<<15)+((32767&y)<<15),a+=l>>>30,c=v+(w>>>15)+(y>>>15),r.__setDigit(i,1073741823&l)}for(;a!=0||c!==0;i++){let l=r.__digit(i);l+=a+c,c=0,a=l>>>30,r.__setDigit(i,1073741823&l)}}static __internalMultiplyAdd(t,n,r,i,o){let s=r,a=0;for(let c=0;c<i;c++){const l=t.__digit(c),u=f.__imul(32767&l,n),h=f.__imul(l>>>15,n),d=u+((32767&h)<<15)+a+s;s=d>>>30,a=h>>>15,o.__setDigit(c,1073741823&d)}if(o.length>i)for(o.__setDigit(i++,s+a);i<o.length;)o.__setDigit(i++,0);else if(s+a!==0)throw new Error("implementation bug")}__inplaceMultiplyAdd(t,n,r){r>this.length&&(r=this.length);const i=32767&t,o=t>>>15;let s=0,a=n;for(let c=0;c<r;c++){const l=this.__digit(c),u=32767&l,h=l>>>15,d=f.__imul(u,i),g=f.__imul(u,o),p=f.__imul(h,i),w=f.__imul(h,o);let y=a+d+s;s=y>>>30,y&=1073741823,y+=((32767&g)<<15)+((32767&p)<<15),s+=y>>>30,a=w+(g>>>15)+(p>>>15),this.__setDigit(c,1073741823&y)}if(s!=0||a!==0)throw new Error("implementation bug")}static __absoluteDivSmall(t,n,r=null){r===null&&(r=new f(t.length,!1));let i=0;for(let o,s=2*t.length-1;0<=s;s-=2){o=(i<<15|t.__halfDigit(s))>>>0;const a=0|o/n;i=0|o%n,o=(i<<15|t.__halfDigit(s-1))>>>0;const c=0|o/n;i=0|o%n,r.__setDigit(s>>>1,a<<15|c)}return r}static __absoluteModSmall(t,n){let r=0;for(let i=2*t.length-1;0<=i;i--)r=0|((r<<15|t.__halfDigit(i))>>>0)%n;return r}static __absoluteDivLarge(t,n,r,i){const o=n.__halfDigitLength(),s=n.length,a=t.__halfDigitLength()-o;let c=null;r&&(c=new f(a+2>>>1,!1),c.__initializeDigits());const l=new f(o+2>>>1,!1);l.__initializeDigits();const u=f.__clz15(n.__halfDigit(o-1));0<u&&(n=f.__specialLeftShift(n,u,0));const h=f.__specialLeftShift(t,u,1),d=n.__halfDigit(o-1);let g=0;for(let p,w=a;0<=w;w--){p=32767;const y=h.__halfDigit(w+o);if(y!==d){const _=(y<<15|h.__halfDigit(w+o-1))>>>0;p=0|_/d;let T=0|_%d;const M=n.__halfDigit(o-2),E=h.__halfDigit(w+o-2);for(;f.__imul(p,M)>>>0>(T<<16|E)>>>0&&(p--,T+=d,!(32767<T)););}f.__internalMultiplyAdd(n,p,0,s,l);let v=h.__inplaceSub(l,w,o+1);v!==0&&(v=h.__inplaceAdd(n,w,o),h.__setHalfDigit(w+o,32767&h.__halfDigit(w+o)+v),p--),r&&(1&w?g=p<<15:c.__setDigit(w>>>1,g|p))}if(i)return h.__inplaceRightShift(u),r?{quotient:c,remainder:h}:h;if(r)return c;throw new Error("unreachable")}static __clz15(t){return f.__clz30(t)-15}__inplaceAdd(t,n,r){let i=0;for(let o=0;o<r;o++){const s=this.__halfDigit(n+o)+t.__halfDigit(o)+i;i=s>>>15,this.__setHalfDigit(n+o,32767&s)}return i}__inplaceSub(t,n,r){let i=0;if(1&n){n>>=1;let o=this.__digit(n),s=32767&o,a=0;for(;a<r-1>>>1;a++){const u=t.__digit(a),h=(o>>>15)-(32767&u)-i;i=1&h>>>15,this.__setDigit(n+a,(32767&h)<<15|32767&s),o=this.__digit(n+a+1),s=(32767&o)-(u>>>15)-i,i=1&s>>>15}const c=t.__digit(a),l=(o>>>15)-(32767&c)-i;if(i=1&l>>>15,this.__setDigit(n+a,(32767&l)<<15|32767&s),n+a+1>=this.length)throw new RangeError("out of bounds");(1&r)==0&&(o=this.__digit(n+a+1),s=(32767&o)-(c>>>15)-i,i=1&s>>>15,this.__setDigit(n+t.length,1073709056&o|32767&s))}else{n>>=1;let o=0;for(;o<t.length-1;o++){const u=this.__digit(n+o),h=t.__digit(o),d=(32767&u)-(32767&h)-i;i=1&d>>>15;const g=(u>>>15)-(h>>>15)-i;i=1&g>>>15,this.__setDigit(n+o,(32767&g)<<15|32767&d)}const s=this.__digit(n+o),a=t.__digit(o),c=(32767&s)-(32767&a)-i;i=1&c>>>15;let l=0;(1&r)==0&&(l=(s>>>15)-(a>>>15)-i,i=1&l>>>15),this.__setDigit(n+o,(32767&l)<<15|32767&c)}return i}__inplaceRightShift(t){if(t===0)return;let n=this.__digit(0)>>>t;const r=this.length-1;for(let i=0;i<r;i++){const o=this.__digit(i+1);this.__setDigit(i,1073741823&o<<30-t|n),n=o>>>t}this.__setDigit(r,n)}static __specialLeftShift(t,n,r){const i=t.length,o=new f(i+r,!1);if(n===0){for(let a=0;a<i;a++)o.__setDigit(a,t.__digit(a));return 0<r&&o.__setDigit(i,0),o}let s=0;for(let a=0;a<i;a++){const c=t.__digit(a);o.__setDigit(a,1073741823&c<<n|s),s=c>>>30-n}return 0<r&&o.__setDigit(i,s),o}static __leftShiftByAbsolute(t,n){const r=f.__toShiftAmount(n);if(0>r)throw new RangeError("BigInt too big");const i=0|r/30,o=r%30,s=t.length,a=o!==0&&t.__digit(s-1)>>>30-o!=0,c=s+i+(a?1:0),l=new f(c,t.sign);if(o===0){let u=0;for(;u<i;u++)l.__setDigit(u,0);for(;u<c;u++)l.__setDigit(u,t.__digit(u-i))}else{let u=0;for(let h=0;h<i;h++)l.__setDigit(h,0);for(let h=0;h<s;h++){const d=t.__digit(h);l.__setDigit(h+i,1073741823&d<<o|u),u=d>>>30-o}if(a)l.__setDigit(s+i,u);else if(u!==0)throw new Error("implementation bug")}return l.__trim()}static __rightShiftByAbsolute(t,n){const r=t.length,i=t.sign,o=f.__toShiftAmount(n);if(0>o)return f.__rightShiftByMaximum(i);const s=0|o/30,a=o%30;let c=r-s;if(0>=c)return f.__rightShiftByMaximum(i);let l=!1;if(i){if((t.__digit(s)&(1<<a)-1)!=0)l=!0;else for(let h=0;h<s;h++)if(t.__digit(h)!==0){l=!0;break}}l&&a===0&&~t.__digit(r-1)==0&&c++;let u=new f(c,i);if(a===0){u.__setDigit(c-1,0);for(let h=s;h<r;h++)u.__setDigit(h-s,t.__digit(h))}else{let h=t.__digit(s)>>>a;const d=r-s-1;for(let g=0;g<d;g++){const p=t.__digit(g+s+1);u.__setDigit(g,1073741823&p<<30-a|h),h=p>>>a}u.__setDigit(d,h)}return l&&(u=f.__absoluteAddOne(u,!0,u)),u.__trim()}static __rightShiftByMaximum(t){return t?f.__oneDigit(1,!0):f.__zero()}static __toShiftAmount(t){if(1<t.length)return-1;const n=t.__unsignedDigit(0);return n>f.__kMaxLengthBits?-1:n}static __toPrimitive(t,n="default"){if(typeof t!="object"||t.constructor===f)return t;if(typeof Symbol<"u"&&typeof Symbol.toPrimitive=="symbol"&&t[Symbol.toPrimitive]){const o=t[Symbol.toPrimitive](n);if(typeof o!="object")return o;throw new TypeError("Cannot convert object to primitive value")}const r=t.valueOf;if(r){const o=r.call(t);if(typeof o!="object")return o}const i=t.toString;if(i){const o=i.call(t);if(typeof o!="object")return o}throw new TypeError("Cannot convert object to primitive value")}static __toNumeric(t){return f.__isBigInt(t)?t:+t}static __isBigInt(t){return typeof t=="object"&&t!==null&&t.constructor===f}static __truncateToNBits(t,n){const r=0|(t+29)/30,i=new f(r,n.sign),o=r-1;for(let a=0;a<o;a++)i.__setDigit(a,n.__digit(a));let s=n.__digit(o);if(t%30!=0){const a=32-t%30;s=s<<a>>>a}return i.__setDigit(o,s),i.__trim()}static __truncateAndSubFromPowerOfTwo(t,n,r){var i=Math.min;const o=0|(t+29)/30,s=new f(o,r);let a=0;const c=o-1;let l=0;for(const g=i(c,n.length);a<g;a++){const p=0-n.__digit(a)-l;l=1&p>>>30,s.__setDigit(a,1073741823&p)}for(;a<c;a++)s.__setDigit(a,0|1073741823&-l);let u=c<n.length?n.__digit(c):0;const h=t%30;let d;if(h==0)d=0-u-l,d&=1073741823;else{const g=32-h;u=u<<g>>>g;const p=1<<32-g;d=p-u-l,d&=p-1}return s.__setDigit(c,d),s.__trim()}__digit(t){return this[t]}__unsignedDigit(t){return this[t]>>>0}__setDigit(t,n){this[t]=0|n}__setDigitGrow(t,n){this[t]=0|n}__halfDigitLength(){const t=this.length;return 32767>=this.__unsignedDigit(t-1)?2*t-1:2*t}__halfDigit(t){return 32767&this[t>>>1]>>>15*(1&t)}__setHalfDigit(t,n){const r=t>>>1,i=this.__digit(r),o=1&t?32767&i|n<<15:1073709056&i|32767&n;this.__setDigit(r,o)}static __digitPow(t,n){let r=1;for(;0<n;)1&n&&(r*=t),n>>>=1,t*=t;return r}static __detectBigEndian(){return f.__kBitConversionDouble[0]=-0,f.__kBitConversionInts[0]!==0}static __isOneDigitInt(t){return(1073741823&t)===t}}f.__kMaxLength=33554432,f.__kMaxLengthBits=f.__kMaxLength<<5,f.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],f.__kBitsPerCharTableShift=5,f.__kBitsPerCharTableMultiplier=1<<f.__kBitsPerCharTableShift,f.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],f.__kBitConversionBuffer=new ArrayBuffer(8),f.__kBitConversionDouble=new Float64Array(f.__kBitConversionBuffer),f.__kBitConversionInts=new Int32Array(f.__kBitConversionBuffer),f.__kBitConversionIntHigh=f.__detectBigEndian()?0:1,f.__kBitConversionIntLow=f.__detectBigEndian()?1:0,f.__clz30=Math.clz32?function(e){return Math.clz32(e)-2}:function(e){return e===0?30:0|29-(0|Math.log(e>>>0)/Math.LN2)},f.__imul=Math.imul||function(e,t){return 0|e*t};const Pt=f.BigInt(0),Pn=f.BigInt(1),Yi=f.BigInt(2),Gc=f.BigInt(10),Vc=f.BigInt(24),Kc=f.BigInt(60),Qc=f.BigInt(1e3),Sn=f.BigInt(1e6),zn=f.BigInt(1e9),Jo=f.multiply(f.BigInt(3600),zn),Bc=f.multiply(Kc,zn),Ne=f.multiply(Jo,Vc);function ye(e){return typeof e=="bigint"?f.BigInt(e.toString(10)):e}function ts(e){return f.equal(f.remainder(e,Yi),Pt)}function je(e){return f.lessThan(e,Pt)?f.unaryMinus(e):e}function Sr(e,t){return f.lessThan(e,t)?-1:f.greaterThan(e,t)?1:0}function Hn(e,t){return{quotient:f.divide(e,t),remainder:f.remainder(e,t)}}var es,ns;const $="slot-epochNanoSeconds",k="slot-iso-date",X="slot-iso-date-time",W="slot-time",x="slot-calendar",rs="slot-date-brand",is="slot-year-month-brand",os="slot-month-day-brand",j="slot-time-zone",dt="slot-years",ft="slot-months",Lt="slot-weeks",mt="slot-days",gt="slot-hours",pt="slot-minutes",yt="slot-seconds",wt="slot-milliseconds",vt="slot-microseconds",Rt="slot-nanoseconds",ss="date",as="ym",cs="md",ls="time",us="datetime",hs="instant",Fe="original",an="timezone-canonical",Ii="timezone-original",Un="calendar-id",ds="locale",Pi="options",fs=new WeakMap,Si=Symbol.for("@@Temporal__GetSlots");(es=globalThis)[Si]||(es[Si]=function(e){return fs.get(e)});const zr=globalThis[Si],zi=Symbol.for("@@Temporal__CreateSlots");(ns=globalThis)[zi]||(ns[zi]=function(e){fs.set(e,Object.create(null))});const we=globalThis[zi];function bt(e,...t){if(!e||typeof e!="object")return!1;const n=zr(e);return!!n&&t.every((r=>r in n))}function m(e,t){const n=zr(e)?.[t];if(n===void 0)throw new TypeError(`Missing internal slot ${t}`);return n}function N(e,t,n){const r=zr(e);if(r===void 0)throw new TypeError("Missing slots for the given container");if(r[t])throw new TypeError(`${t} already has set`);r[t]=n}const Hi={};function ve(e,t){Object.defineProperty(e.prototype,Symbol.toStringTag,{value:t,writable:!1,enumerable:!1,configurable:!0});const n=Object.getOwnPropertyNames(e);for(let i=0;i<n.length;i++){const o=n[i],s=Object.getOwnPropertyDescriptor(e,o);s.configurable&&s.enumerable&&(s.enumerable=!1,Object.defineProperty(e,o,s))}const r=Object.getOwnPropertyNames(e.prototype);for(let i=0;i<r.length;i++){const o=r[i],s=Object.getOwnPropertyDescriptor(e.prototype,o);s.configurable&&s.enumerable&&(s.enumerable=!1,Object.defineProperty(e.prototype,o,s))}Ui(t,e),Ui(`${t}.prototype`,e.prototype)}function Ui(e,t){const n=`%${e}%`;if(Hi[n]!==void 0)throw new Error(`intrinsic ${e} already exists`);Hi[n]=t}function it(e){return Hi[e]}function cn(e,t){let n=e;if(n===0)return{div:n,mod:n};const r=Math.sign(n);n=Math.abs(n);const i=Math.trunc(1+Math.log10(n));if(t>=i)return{div:0*r,mod:r*n};if(t===0)return{div:r*n,mod:0*r};const o=n.toPrecision(i);return{div:r*Number.parseInt(o.slice(0,i-t),10),mod:r*Number.parseInt(o.slice(i-t),10)}}function ji(e,t,n){let r=e,i=n;if(r===0)return i;const o=Math.sign(r)||Math.sign(i);r=Math.abs(r),i=Math.abs(i);const s=r.toPrecision(Math.trunc(1+Math.log10(r)));if(i===0)return o*Number.parseInt(s+"0".repeat(t),10);const a=s+i.toPrecision(Math.trunc(1+Math.log10(i))).padStart(t,"0");return o*Number.parseInt(a,10)}function Hr(e,t){const n=t==="negative";switch(e){case"ceil":return n?"zero":"infinity";case"floor":return n?"infinity":"zero";case"expand":return"infinity";case"trunc":return"zero";case"halfCeil":return n?"half-zero":"half-infinity";case"halfFloor":return n?"half-infinity":"half-zero";case"halfExpand":return"half-infinity";case"halfTrunc":return"half-zero";case"halfEven":return"half-even"}}function Ur(e,t,n,r,i){return i==="zero"?e:i==="infinity"?t:n<0?e:n>0?t:i==="half-zero"?e:i==="half-infinity"?t:r?e:t}class O{constructor(t){this.totalNs=ye(t),this.sec=f.toNumber(f.divide(this.totalNs,zn)),this.subsec=f.toNumber(f.remainder(this.totalNs,zn))}static validateNew(t,n){if(f.greaterThan(je(t),O.MAX))throw new RangeError(`${n} of duration time units cannot exceed ${O.MAX} s`);return new O(t)}static fromEpochNsDiff(t,n){const r=f.subtract(ye(t),ye(n));return new O(r)}static fromComponents(t,n,r,i,o,s){const a=f.add(f.add(f.add(f.add(f.add(f.BigInt(s),f.multiply(f.BigInt(o),Qc)),f.multiply(f.BigInt(i),Sn)),f.multiply(f.BigInt(r),zn)),f.multiply(f.BigInt(n),Bc)),f.multiply(f.BigInt(t),Jo));return O.validateNew(a,"total")}abs(){return new O(je(this.totalNs))}add(t){return O.validateNew(f.add(this.totalNs,t.totalNs),"sum")}add24HourDays(t){return O.validateNew(f.add(this.totalNs,f.multiply(f.BigInt(t),Ne)),"sum")}addToEpochNs(t){return f.add(ye(t),this.totalNs)}cmp(t){return Sr(this.totalNs,t.totalNs)}divmod(t){const{quotient:n,remainder:r}=Hn(this.totalNs,f.BigInt(t));return{quotient:f.toNumber(n),remainder:new O(r)}}fdiv(t){const n=ye(t),r=f.BigInt(n);let{quotient:i,remainder:o}=Hn(this.totalNs,r);const s=[];let a;const c=(f.lessThan(this.totalNs,Pt)?-1:1)*Math.sign(f.toNumber(n));for(;!f.equal(o,Pt)&&s.length<50;)o=f.multiply(o,Gc),{quotient:a,remainder:o}=Hn(o,r),s.push(Math.abs(f.toNumber(a)));return c*+(je(i).toString()+"."+s.join(""))}isZero(){return f.equal(this.totalNs,Pt)}round(t,n){const r=ye(t);if(f.equal(r,Pn))return this;const{quotient:i,remainder:o}=Hn(this.totalNs,r),s=f.lessThan(this.totalNs,Pt)?"negative":"positive",a=f.multiply(je(i),r),c=f.add(a,r),l=Sr(je(f.multiply(o,Yi)),r),u=Hr(n,s),h=f.equal(je(this.totalNs),a)?a:Ur(a,c,l,ts(i),u),d=s==="positive"?h:f.unaryMinus(h);return O.validateNew(d,"rounding")}sign(){return this.cmp(new O(Pt))}subtract(t){return O.validateNew(f.subtract(this.totalNs,t.totalNs),"difference")}}O.MAX=f.BigInt("9007199254740991999999999"),O.ZERO=new O(Pt);const ms=/[A-Za-z._][A-Za-z._0-9+-]*/,jn=new RegExp(`(?:${/(?:[+-](?:[01][0-9]|2[0-3])(?::?[0-5][0-9])?)/.source}|(?:${ms.source})(?:\\/(?:${ms.source}))*)`),gs=/(?:[+-]\d{6}|\d{4})/,jr=/(?:0[1-9]|1[0-2])/,Fi=/(?:0[1-9]|[12]\d|3[01])/,Jc=new RegExp(`(${gs.source})(?:-(${jr.source})-(${Fi.source})|(${jr.source})(${Fi.source}))`),ps=/(\d{2})(?::(\d{2})(?::(\d{2})(?:[.,](\d{1,9}))?)?|(\d{2})(?:(\d{2})(?:[.,](\d{1,9}))?)?)?/,ys=/((?:[+-])(?:[01][0-9]|2[0-3])(?::?(?:[0-5][0-9])(?::?(?:[0-5][0-9])(?:[.,](?:\d{1,9}))?)?)?)/,ws=new RegExp(`([zZ])|${ys.source}?`),ln=/\[(!)?([a-z_][a-z0-9_-]*)=([A-Za-z0-9]+(?:-[A-Za-z0-9]+)*)\]/g,tl=new RegExp([`^${Jc.source}`,`(?:(?:[tT]|\\s+)${ps.source}(?:${ws.source})?)?`,`(?:\\[!?(${jn.source})\\])?`,`((?:${ln.source})*)$`].join("")),el=new RegExp([`^[tT]?${ps.source}`,`(?:${ws.source})?`,`(?:\\[!?${jn.source}\\])?`,`((?:${ln.source})*)$`].join("")),nl=new RegExp(`^(${gs.source})-?(${jr.source})(?:\\[!?${jn.source}\\])?((?:${ln.source})*)$`),rl=new RegExp(`^(?:--)?(${jr.source})-?(${Fi.source})(?:\\[!?${jn.source}\\])?((?:${ln.source})*)$`),Zi=/(\d+)(?:[.,](\d{1,9}))?/,il=new RegExp(`(?:${Zi.source}H)?(?:${Zi.source}M)?(?:${Zi.source}S)?`),ol=new RegExp(`^([+-])?P${/(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?/.source}(?:T(?!$)${il.source})?$`,"i"),Oe=864e5,Fr=1e6*Oe,sl=6e10,vs=1e8*Oe,un=ue(vs),Fn=f.unaryMinus(un),al=f.add(f.subtract(Fn,Ne),Pn),cl=f.subtract(f.add(un,Ne),Pn),ll=146097*Oe,bs=-271821,_s=275760,Zn=Date.UTC(1847,0,1),ul=["iso8601","hebrew","islamic","islamic-umalqura","islamic-tbla","islamic-civil","islamic-rgsa","islamicc","persian","ethiopic","ethioaa","ethiopic-amete-alem","coptic","chinese","dangi","roc","indian","buddhist","japanese","gregory"],hl=new Set(["ACT","AET","AGT","ART","AST","BET","BST","CAT","CNT","CST","CTT","EAT","ECT","IET","IST","JST","MIT","NET","NST","PLT","PNT","PRT","PST","SST","VST"]);function G(e){return typeof e=="object"&&e!==null||typeof e=="function"}function Zr(e){if(typeof e=="bigint")throw new TypeError("Cannot convert BigInt to number");return Number(e)}function qr(e){if(typeof e=="symbol")throw new TypeError("Cannot convert a Symbol value to a String");return String(e)}function L(e){const t=Zr(e);if(t===0)return 0;if(Number.isNaN(t)||t===1/0||t===-1/0)throw new RangeError("invalid number value");const n=Math.trunc(t);return n===0?0:n}function Ts(e,t){const n=L(e);if(n<=0)throw t!==void 0?new RangeError(`property '${t}' cannot be a a number less than one`):new RangeError("Cannot convert a number less than one to a positive integer");return n}function Kt(e){const t=Zr(e);if(Number.isNaN(t))throw new RangeError("not a number");if(t===1/0||t===-1/0)throw new RangeError("infinity is out of range");if(!(function(n){if(typeof n!="number"||Number.isNaN(n)||n===1/0||n===-1/0)return!1;const r=Math.abs(n);return Math.floor(r)===r})(t))throw new RangeError(`unsupported fractional value ${e}`);return t===0?0:t}function qn(e,t){return String(e).padStart(t,"0")}function tt(e){if(typeof e!="string")throw new TypeError(`expected a string, not ${String(e)}`);return e}function qi(e,t){if(G(e)){const n=e?.toString();if(typeof n=="string"||typeof n=="number")return n;throw new TypeError("Cannot convert object to primitive value")}return e}const Xi=["era","eraYear","year","month","monthCode","day","hour","minute","second","millisecond","microsecond","nanosecond","offset","timeZone"],dl={era:qr,eraYear:L,year:L,month:Ts,monthCode:function(e){const t=tt(qi(e));if(t.length<3||t.length>4||t[0]!=="M"||"0123456789".indexOf(t[1])===-1||"0123456789".indexOf(t[2])===-1||t[1]+t[2]==="00"&&t[3]!=="L"||t[3]!=="L"&&t[3]!==void 0)throw new RangeError(`bad month code ${t}; must match M01-M99 or M00L-M99L`);return t},day:Ts,hour:L,minute:L,second:L,millisecond:L,microsecond:L,nanosecond:L,offset:function(e){const t=tt(qi(e));return wn(t),t},timeZone:Mt},fl={hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0},hn=[["years","year","date"],["months","month","date"],["weeks","week","date"],["days","day","date"],["hours","hour","time"],["minutes","minute","time"],["seconds","second","time"],["milliseconds","millisecond","time"],["microseconds","microsecond","time"],["nanoseconds","nanosecond","time"]],Ms=Object.fromEntries(hn.map((e=>[e[0],e[1]]))),ml=Object.fromEntries(hn.map((([e,t])=>[t,e]))),Xn=hn.map((([,e])=>e)),dn={day:Fr,hour:36e11,minute:6e10,second:1e9,millisecond:1e6,microsecond:1e3,nanosecond:1},Xr=["days","hours","microseconds","milliseconds","minutes","months","nanoseconds","seconds","weeks","years"],gl=Intl.DateTimeFormat,Es=new Map;function xs(e){const t=wr(e);let n=Es.get(t);return n===void 0&&(n=new gl("en-us",{timeZone:t,hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),Es.set(t,n)),n}function ot(e){return bt(e,$)&&!bt(e,j,x)}function V(e){return bt(e,dt,ft,mt,gt,pt,yt,wt,vt,Rt)}function K(e){return bt(e,rs)}function Q(e){return bt(e,W)}function q(e){return bt(e,X)}function st(e){return bt(e,is)}function St(e){return bt(e,os)}function A(e){return bt(e,$,j,x)}function b(e,t){if(!t(e))throw new TypeError("invalid receiver: method called with the wrong type of this-object")}function fn(e){if(bt(e,x)||bt(e,j))throw new TypeError("with() does not support a calendar or timeZone property");if(Q(e))throw new TypeError("with() does not accept Temporal.PlainTime, use withPlainTime() instead");if(e.calendar!==void 0)throw new TypeError("with() does not support a calendar property");if(e.timeZone!==void 0)throw new TypeError("with() does not support a timeZone property")}function Wn(e,t){return t==="never"||t==="auto"&&e==="iso8601"?"":`[${t==="critical"?"!":""}u-ca=${e}]`}function Wr(e){let t,n,r=!1;for(ln.lastIndex=0;n=ln.exec(e);){const{1:i,2:o,3:s}=n;if(o==="u-ca"){if(t===void 0)t=s,r=i==="!";else if(i==="!"||r)throw new RangeError(`Invalid annotations in ${e}: more than one u-ca present with critical flag`)}else if(i==="!")throw new RangeError(`Unrecognized annotation: !${o}=${s}`)}return t}function re(e){const t=tl.exec(e);if(!t)throw new RangeError(`invalid RFC 9557 string: ${e}`);const n=Wr(t[16]);let r=t[1];if(r==="-000000")throw new RangeError(`invalid RFC 9557 string: ${e}`);const i=+r,o=+(t[2]??t[4]??1),s=+(t[3]??t[5]??1),a=t[6]!==void 0,c=+(t[6]??0),l=+(t[7]??t[10]??0);let u=+(t[8]??t[11]??0);u===60&&(u=59);const h=(t[9]??t[12]??"")+"000000000",d=+h.slice(0,3),g=+h.slice(3,6),p=+h.slice(6,9);let w,y=!1;t[13]?(w=void 0,y=!0):t[14]&&(w=t[14]);const v=t[15];return ro(i,o,s,c,l,u,d,g,p),{year:i,month:o,day:s,time:a?{hour:c,minute:l,second:u,millisecond:d,microsecond:g,nanosecond:p}:"start-of-day",tzAnnotation:v,offset:w,z:y,calendar:n}}function Ds(e){const t=el.exec(e);let n,r,i,o,s,a,c;if(t){c=Wr(t[10]),n=+(t[1]??0),r=+(t[2]??t[5]??0),i=+(t[3]??t[6]??0),i===60&&(i=59);const l=(t[4]??t[7]??"")+"000000000";if(o=+l.slice(0,3),s=+l.slice(3,6),a=+l.slice(6,9),t[8])throw new RangeError("Z designator not supported for PlainTime")}else{let l,u;if({time:l,z:u,calendar:c}=re(e),l==="start-of-day")throw new RangeError(`time is missing in string: ${e}`);if(u)throw new RangeError("Z designator not supported for PlainTime");({hour:n,minute:r,second:i,millisecond:o,microsecond:s,nanosecond:a}=l)}if(ii(n,r,i,o,s,a),/[tT ][0-9][0-9]/.test(e))return{hour:n,minute:r,second:i,millisecond:o,microsecond:s,nanosecond:a,calendar:c};try{const{month:l,day:u}=Gi(e);Ge(1972,l,u)}catch{try{const{year:l,month:u}=Wi(e);Ge(l,u,1)}catch{return{hour:n,minute:r,second:i,millisecond:o,microsecond:s,nanosecond:a,calendar:c}}}throw new RangeError(`invalid RFC 9557 time-only string ${e}; may need a T prefix`)}function Wi(e){const t=nl.exec(e);let n,r,i,o;if(t){i=Wr(t[3]);let s=t[1];if(s==="-000000")throw new RangeError(`invalid RFC 9557 string: ${e}`);if(n=+s,r=+t[2],o=1,i!==void 0&&i!=="iso8601")throw new RangeError("YYYY-MM format is only valid with iso8601 calendar")}else{let s;if({year:n,month:r,calendar:i,day:o,z:s}=re(e),s)throw new RangeError("Z designator not supported for PlainYearMonth")}return{year:n,month:r,calendar:i,referenceISODay:o}}function Gi(e){const t=rl.exec(e);let n,r,i,o;if(t){if(i=Wr(t[3]),n=+t[1],r=+t[2],i!==void 0&&i!=="iso8601")throw new RangeError("MM-DD format is only valid with iso8601 calendar")}else{let s;if({month:n,day:r,calendar:i,year:o,z:s}=re(e),s)throw new RangeError("Z designator not supported for PlainMonthDay")}return{month:n,day:r,calendar:i,referenceISOYear:o}}const Cs=new RegExp(`^${jn.source}$`,"i"),$s=new RegExp(`^${/([+-])([01][0-9]|2[0-3])(?::?([0-5][0-9])?)?/.source}$`);function ks(e){const t=yl.test(e)?"Seconds not allowed in offset time zone":"Invalid time zone";throw new RangeError(`${t}: ${e}`)}function Ae(e){return Cs.test(e)||ks(e),$s.test(e)?{offsetMinutes:wn(e)/6e10}:{tzName:e}}function Gn(e,t,n,r){let i=e,o=t,s=n;switch(r){case"reject":Ge(i,o,s);break;case"constrain":({year:i,month:o,day:s}=na(i,o,s))}return{year:i,month:o,day:s}}function Gr(e,t,n,r,i,o,s){let a=e,c=t,l=n,u=r,h=i,d=o;switch(s){case"reject":ii(a,c,l,u,h,d);break;case"constrain":a=Et(a,0,23),c=Et(c,0,59),l=Et(l,0,59),u=Et(u,0,999),h=Et(h,0,999),d=Et(d,0,999)}return{hour:a,minute:c,second:l,millisecond:u,microsecond:h,nanosecond:d}}function Ls(e){if(!G(e))throw new TypeError("invalid duration-like");const t={years:void 0,months:void 0,weeks:void 0,days:void 0,hours:void 0,minutes:void 0,seconds:void 0,milliseconds:void 0,microseconds:void 0,nanoseconds:void 0};let n=!1;for(let r=0;r<Xr.length;r++){const i=Xr[r],o=e[i];o!==void 0&&(n=!0,t[i]=Kt(o))}if(!n)throw new TypeError("invalid duration-like");return t}function lt({years:e,months:t,weeks:n,days:r},i,o,s){return{years:e,months:s??t,weeks:o??n,days:i??r}}function z(e,t){return{isoDate:e,time:t}}function S(e){return Ce(e,"overflow",["constrain","reject"],"constrain")}function Vn(e){return Ce(e,"disambiguation",["compatible","earlier","later","reject"],"compatible")}function Qt(e,t){return Ce(e,"roundingMode",["ceil","floor","expand","trunc","halfCeil","halfFloor","halfExpand","halfTrunc","halfEven"],t)}function Vr(e,t){return Ce(e,"offset",["prefer","use","ignore","reject"],t)}function Kn(e){return Ce(e,"calendarName",["auto","always","never","critical"],"auto")}function mn(e){let t=e.roundingIncrement;if(t===void 0)return 1;const n=L(t);if(n<1||n>1e9)throw new RangeError(`roundingIncrement must be at least 1 and at most 1e9, not ${t}`);return n}function gn(e,t,n){const r=n?t:t-1;if(e>r)throw new RangeError(`roundingIncrement must be at least 1 and less than ${r}, not ${e}`);if(t%e!=0)throw new RangeError(`Rounding increment must divide evenly into ${t}`)}function Qn(e){const t=e.fractionalSecondDigits;if(t===void 0)return"auto";if(typeof t!="number"){if(qr(t)!=="auto")throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${t}`);return"auto"}const n=Math.floor(t);if(!Number.isFinite(n)||n<0||n>9)throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${t}`);return n}function Bn(e,t){switch(e){case"minute":return{precision:"minute",unit:"minute",increment:1};case"second":return{precision:0,unit:"second",increment:1};case"millisecond":return{precision:3,unit:"millisecond",increment:1};case"microsecond":return{precision:6,unit:"microsecond",increment:1};case"nanosecond":return{precision:9,unit:"nanosecond",increment:1}}switch(t){case"auto":return{precision:t,unit:"nanosecond",increment:1};case 0:return{precision:t,unit:"second",increment:1};case 1:case 2:case 3:return{precision:t,unit:"millisecond",increment:10**(3-t)};case 4:case 5:case 6:return{precision:t,unit:"microsecond",increment:10**(6-t)};case 7:case 8:case 9:return{precision:t,unit:"nanosecond",increment:10**(9-t)};default:throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${t}`)}}const be=Symbol("~required~");function Nt(e,t,n,r,i=[]){let o=[];for(let l=0;l<hn.length;l++){const u=hn[l],h=u[1],d=u[2];n!=="datetime"&&n!==d||o.push(h)}o=o.concat(i);let s=r;s===be?s=void 0:s!==void 0&&o.push(s);let a=[];a=a.concat(o);for(let l=0;l<o.length;l++){const u=o[l],h=ml[u];h!==void 0&&a.push(h)}let c=Ce(e,t,a,s);if(c===void 0&&r===be)throw new RangeError(`${t} is required`);return c&&c in Ms?Ms[c]:c}function Vi(e){const t=e.relativeTo;if(t===void 0)return{};let n,r,i,o,s,a="option",c=!1;if(G(t)){if(A(t))return{zonedRelativeTo:t};if(K(t))return{plainRelativeTo:t};if(q(t))return{plainRelativeTo:Tt(m(t,X).isoDate,m(t,x))};i=cr(t);const l=zt(i,t,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond","offset","timeZone"],[]);({isoDate:n,time:r}=er(i,l,"constrain")),{offset:s,timeZone:o}=l,s===void 0&&(a="wall")}else{let l,u,h,d,g;if({year:h,month:d,day:g,time:r,calendar:i,tzAnnotation:l,offset:s,z:u}=re(tt(t)),l)o=Mt(l),u?a="exact":s||(a="wall"),c=!0;else if(u)throw new RangeError("Z designator not supported for PlainDate relativeTo; either remove the Z or add a bracketed time zone");i||(i="iso8601"),i=xt(i),n={year:h,month:d,day:g}}return o===void 0?{plainRelativeTo:Tt(n,i)}:{zonedRelativeTo:ut(Kr(n,r,a,a==="option"?wn(s):0,o,"compatible","reject",c),o,i)}}function _e(e){return m(e,dt)!==0?"year":m(e,ft)!==0?"month":m(e,Lt)!==0?"week":m(e,mt)!==0?"day":m(e,gt)!==0?"hour":m(e,pt)!==0?"minute":m(e,yt)!==0?"second":m(e,wt)!==0?"millisecond":m(e,vt)!==0?"microsecond":"nanosecond"}function Te(e,t){return Xn.indexOf(e)>Xn.indexOf(t)?t:e}function ie(e){return e==="year"||e==="month"||e==="week"}function Me(e){return ie(e)||e==="day"?"date":"time"}function Ye(e){return it("%calendarImpl%")(e)}function Jn(e){return it("%calendarImpl%")(m(e,x))}function _t(e,t,n="date"){const r=Object.create(null),i=Ye(e).isoToDate(t,{year:!0,monthCode:!0,day:!0});return r.monthCode=i.monthCode,n!=="month-day"&&n!=="date"||(r.day=i.day),n!=="year-month"&&n!=="date"||(r.year=i.year),r}function zt(e,t,n,r,i){const o=Ye(e).extraFields(n),s=n.concat(r,o),a=Object.create(null);let c=!1;s.sort();for(let l=0;l<s.length;l++){const u=s[l],h=t[u];if(h!==void 0)c=!0,a[u]=(0,dl[u])(h);else if(i!=="partial"){if(i.includes(u))throw new TypeError(`required property '${u}' missing or undefined`);a[u]=fl[u]}}if(i==="partial"&&!c)throw new TypeError("no supported properties found");return a}function Ki(e,t="complete"){const n=["hour","microsecond","millisecond","minute","nanosecond","second"];let r=!1;const i=Object.create(null);for(let o=0;o<n.length;o++){const s=n[o],a=e[s];a!==void 0?(i[s]=L(a),r=!0):t==="complete"&&(i[s]=0)}if(!r)throw new TypeError("invalid time-like");return i}function tr(e,t){if(G(e)){if(K(e))return S(C(t)),Tt(m(e,k),m(e,x));if(A(e)){const c=Xt(m(e,j),m(e,$));return S(C(t)),Tt(c.isoDate,m(e,x))}if(q(e))return S(C(t)),Tt(m(e,X).isoDate,m(e,x));const a=cr(e);return Tt(Pe(a,zt(a,e,["year","month","monthCode","day"],[],[]),S(C(t))),a)}let{year:n,month:r,day:i,calendar:o,z:s}=re(tt(e));if(s)throw new RangeError("Z designator not supported for PlainDate");return o||(o="iso8601"),o=xt(o),S(C(t)),Tt({year:n,month:r,day:i},o)}function er(e,t,n){return z(Pe(e,t,n),Gr(t.hour,t.minute,t.second,t.millisecond,t.microsecond,t.nanosecond,n))}function nr(e,t){let n,r,i;if(G(e)){if(q(e))return S(C(t)),qt(m(e,X),m(e,x));if(A(e)){const a=Xt(m(e,j),m(e,$));return S(C(t)),qt(a,m(e,x))}if(K(e))return S(C(t)),qt(z(m(e,k),{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),m(e,x));i=cr(e);const o=zt(i,e,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond"],[]),s=S(C(t));({isoDate:n,time:r}=er(i,o,s))}else{let o,s,a,c;if({year:s,month:a,day:c,time:r,calendar:i,z:o}=re(tt(e)),o)throw new RangeError("Z designator not supported for PlainDateTime");r==="start-of-day"&&(r={deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),ro(s,a,c,r.hour,r.minute,r.second,r.millisecond,r.microsecond,r.nanosecond),i||(i="iso8601"),i=xt(i),S(C(t)),n={year:s,month:a,day:c}}return qt(z(n,r),i)}function Zt(e){const t=it("%Temporal.Duration%");if(V(e))return new t(m(e,dt),m(e,ft),m(e,Lt),m(e,mt),m(e,gt),m(e,pt),m(e,yt),m(e,wt),m(e,vt),m(e,Rt));if(!G(e))return(function(i){const{years:o,months:s,weeks:a,days:c,hours:l,minutes:u,seconds:h,milliseconds:d,microseconds:g,nanoseconds:p}=(function(w){const y=ol.exec(w);if(!y)throw new RangeError(`invalid duration: ${w}`);if(y.every(((kt,ne)=>ne<2||kt===void 0)))throw new RangeError(`invalid duration: ${w}`);const v=y[1]==="-"?-1:1,_=y[2]===void 0?0:L(y[2])*v,T=y[3]===void 0?0:L(y[3])*v,M=y[4]===void 0?0:L(y[4])*v,E=y[5]===void 0?0:L(y[5])*v,R=y[6]===void 0?0:L(y[6])*v,F=y[7],U=y[8],Y=y[9],P=y[10],D=y[11];let I=0,H=0,B=0;if(F!==void 0){if(U??Y??P??D)throw new RangeError("only the smallest unit can be fractional");B=3600*L((F+"000000000").slice(0,9))*v}else if(I=U===void 0?0:L(U)*v,Y!==void 0){if(P??D)throw new RangeError("only the smallest unit can be fractional");B=60*L((Y+"000000000").slice(0,9))*v}else H=P===void 0?0:L(P)*v,D!==void 0&&(B=L((D+"000000000").slice(0,9))*v);const Ft=B%1e3,Z=Math.trunc(B/1e3)%1e3,ct=Math.trunc(B/1e6)%1e3;return H+=Math.trunc(B/1e9)%60,I+=Math.trunc(B/6e10),oi(_,T,M,E,R,I,H,ct,Z,Ft),{years:_,months:T,weeks:M,days:E,hours:R,minutes:I,seconds:H,milliseconds:ct,microseconds:Z,nanoseconds:Ft}})(i);return new(it("%Temporal.Duration%"))(o,s,a,c,l,u,h,d,g,p)})(tt(e));const n={years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};let r=Ls(e);for(let i=0;i<Xr.length;i++){const o=Xr[i],s=r[o];s!==void 0&&(n[o]=s)}return new t(n.years,n.months,n.weeks,n.days,n.hours,n.minutes,n.seconds,n.milliseconds,n.microseconds,n.nanoseconds)}function rr(e){let t;if(G(e)){if(ot(e)||A(e))return oe(m(e,$));t=qi(e)}else t=e;const{year:n,month:r,day:i,time:o,offset:s,z:a}=(function(w){const y=re(w);if(!y.z&&!y.offset)throw new RangeError("Temporal.Instant requires a time zone offset");return y})(tt(t)),{hour:c=0,minute:l=0,second:u=0,millisecond:h=0,microsecond:d=0,nanosecond:g=0}=o==="start-of-day"?{}:o,p=mr(n,r,i,c,l,u,h,d,g-(a?0:wn(s)));return bn(p.isoDate),oe(at(p))}function Rs(e,t){if(G(e)){if(St(e))return S(C(t)),pn(m(e,k),m(e,x));let a;return bt(e,x)?a=m(e,x):(a=e.calendar,a===void 0&&(a="iso8601"),a=ar(a)),pn(Qr(a,zt(a,e,["year","month","monthCode","day"],[],[]),S(C(t))),a)}let{month:n,day:r,referenceISOYear:i,calendar:o}=Gi(tt(e));if(o===void 0&&(o="iso8601"),o=xt(o),S(C(t)),o==="iso8601")return pn({year:1972,month:n,day:r},o);let s={year:i,month:n,day:r};return Ve(s),s=Qr(o,_t(o,s,"month-day"),"constrain"),pn(s,o)}function Ie(e,t){let n;if(G(e)){if(Q(e))return S(C(t)),Ee(m(e,W));if(q(e))return S(C(t)),Ee(m(e,X).time);if(A(e)){const l=Xt(m(e,j),m(e,$));return S(C(t)),Ee(l.time)}const{hour:r,minute:i,second:o,millisecond:s,microsecond:a,nanosecond:c}=Ki(e);n=Gr(r,i,o,s,a,c,S(C(t)))}else n=Ds(tt(e)),S(C(t));return Ee(n)}function Ns(e){return e===void 0?{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}:m(Ie(e),W)}function ir(e,t){if(G(e)){if(st(e))return S(C(t)),yn(m(e,k),m(e,x));const a=cr(e);return yn(lr(a,zt(a,e,["year","month","monthCode"],[],[]),S(C(t))),a)}let{year:n,month:r,referenceISODay:i,calendar:o}=Wi(tt(e));o===void 0&&(o="iso8601"),o=xt(o),S(C(t));let s={year:n,month:r,day:i};return oo(s),s=lr(o,_t(o,s,"year-month"),"constrain"),yn(s,o)}function Kr(e,t,n,r,i,o,s,a){if(t==="start-of-day")return Se(i,e);const c=z(e,t);if(n==="wall"||s==="ignore")return ht(i,c,o);if(n==="exact"||s==="use"){const h=mr(e.year,e.month,e.day,t.hour,t.minute,t.second,t.millisecond,t.microsecond,t.nanosecond-r);bn(h.isoDate);const d=at(h);return ae(d),d}bn(e);const l=at(c),u=ur(i,c);for(let h=0;h<u.length;h++){const d=u[h],g=f.toNumber(f.subtract(l,d)),p=He(g,6e10,"halfExpand");if(g===r||a&&p===r)return d}if(s==="reject"){const h=Qi(r),d=dr(c,"iso8601","auto");throw new RangeError(`Offset ${h} is invalid for ${d} in ${i}`)}return js(u,i,c,o)}function or(e,t){let n,r,i,o,s,a,c,l=!1,u="option";if(G(e)){if(A(e)){const w=C(t);return Vn(w),Vr(w,"reject"),S(w),ut(m(e,$),m(e,j),m(e,x))}s=cr(e);const d=zt(s,e,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond","offset","timeZone"],["timeZone"]);({offset:o,timeZone:i}=d),o===void 0&&(u="wall");const g=C(t);a=Vn(g),c=Vr(g,"reject");const p=S(g);({isoDate:n,time:r}=er(s,d,p))}else{let d,g,p,w,y;({year:p,month:w,day:y,time:r,tzAnnotation:d,offset:o,z:g,calendar:s}=(function(_){const T=re(_);if(!T.tzAnnotation)throw new RangeError("Temporal.ZonedDateTime requires a time zone ID in brackets");return T})(tt(e))),i=Mt(d),g?u="exact":o||(u="wall"),s||(s="iso8601"),s=xt(s),l=!0;const v=C(t);a=Vn(v),c=Vr(v,"reject"),S(v),n={year:p,month:w,day:y}}let h=0;return u==="option"&&(h=wn(o)),ut(Kr(n,r,u,h,i,a,c,l),i,s)}function Os(e,t,n){Ve(t),we(e),N(e,k,t),N(e,x,n),N(e,rs,!0)}function Tt(e,t){const n=it("%Temporal.PlainDate%"),r=Object.create(n.prototype);return Os(r,e,t),r}function As(e,t,n){Ke(t),we(e),N(e,X,t),N(e,x,n)}function qt(e,t){const n=it("%Temporal.PlainDateTime%"),r=Object.create(n.prototype);return As(r,e,t),r}function Ys(e,t,n){Ve(t),we(e),N(e,k,t),N(e,x,n),N(e,os,!0)}function pn(e,t){const n=it("%Temporal.PlainMonthDay%"),r=Object.create(n.prototype);return Ys(r,e,t),r}function Is(e,t){we(e),N(e,W,t)}function Ee(e){const t=it("%Temporal.PlainTime%"),n=Object.create(t.prototype);return Is(n,e),n}function Ps(e,t,n){oo(t),we(e),N(e,k,t),N(e,x,n),N(e,is,!0)}function yn(e,t){const n=it("%Temporal.PlainYearMonth%"),r=Object.create(n.prototype);return Ps(r,e,t),r}function Ss(e,t){ae(t),we(e),N(e,$,t)}function oe(e){const t=it("%Temporal.Instant%"),n=Object.create(t.prototype);return Ss(n,e),n}function zs(e,t,n,r){ae(t),we(e),N(e,$,t),N(e,j,n),N(e,x,r)}function ut(e,t,n="iso8601"){const r=it("%Temporal.ZonedDateTime%"),i=Object.create(r.prototype);return zs(i,e,t,n),i}function Hs(e){return Xi.filter((t=>e[t]!==void 0))}function Ze(e,t,n){const r=Hs(n),i=Ye(e).fieldKeysToIgnore(r),o=Object.create(null),s=Hs(t);for(let a=0;a<Xi.length;a++){let c;const l=Xi[a];s.includes(l)&&!i.includes(l)&&(c=t[l]),r.includes(l)&&(c=n[l]),c!==void 0&&(o[l]=c)}return o}function Ht(e,t,n,r){const i=Ye(e).dateAdd(t,n,r);return Ve(i),i}function sr(e,t,n,r){return Ye(e).dateUntil(t,n,r)}function ar(e){if(G(e)&&bt(e,x))return m(e,x);const t=tt(e);try{return xt(t)}catch{}let n;try{({calendar:n}=re(t))}catch{try{({calendar:n}=Ds(t))}catch{try{({calendar:n}=Wi(t))}catch{({calendar:n}=Gi(t))}}}return n||(n="iso8601"),xt(n)}function cr(e){if(bt(e,x))return m(e,x);const{calendar:t}=e;return t===void 0?"iso8601":ar(t)}function se(e,t){return xt(e)===xt(t)}function Pe(e,t,n){const r=Ye(e);r.resolveFields(t,"date");const i=r.dateToISO(t,n);return Ve(i),i}function lr(e,t,n){const r=Ye(e);r.resolveFields(t,"year-month"),t.day=1;const i=r.dateToISO(t,n);return oo(i),i}function Qr(e,t,n){const r=Ye(e);r.resolveFields(t,"month-day");const i=r.monthDayToISOReferenceDate(t,n);return Ve(i),i}function Mt(e){if(G(e)&&A(e))return m(e,j);const t=tt(e);if(t==="UTC")return"UTC";const{tzName:n,offsetMinutes:r}=(function(o){const{tzAnnotation:s,offset:a,z:c}=(function(l){if(Cs.test(l))return{tzAnnotation:l,offset:void 0,z:!1};try{const{tzAnnotation:u,offset:h,z:d}=re(l);if(d||u||h)return{tzAnnotation:u,offset:h,z:d}}catch{}ks(l)})(o);return s?Ae(s):c?Ae("UTC"):a?Ae(a):void 0})(t);if(r!==void 0)return Ji(r);const i=ti(n);if(!i)throw new RangeError(`Unrecognized time zone ${n}`);return i.identifier}function Us(e,t){if(e===t)return!0;const n=Ae(e).offsetMinutes,r=Ae(t).offsetMinutes;if(n===void 0&&r===void 0){const i=ti(t);if(!i)return!1;const o=ti(e);return!!o&&o.primaryIdentifier===i.primaryIdentifier}return n===r}function xe(e,t){const n=Ae(e).offsetMinutes;return n!==void 0?6e10*n:Bi(e,t)}function Qi(e){const t=e<0?"-":"+",n=Math.abs(e),r=Math.floor(n/36e11),i=Math.floor(n/6e10)%60,o=Math.floor(n/1e9)%60,s=n%1e9;return`${t}${Br(r,i,o,s,o===0&&s===0?"minute":"auto")}`}function Xt(e,t){const n=xe(e,t);let{isoDate:{year:r,month:i,day:o},time:{hour:s,minute:a,second:c,millisecond:l,microsecond:u,nanosecond:h}}=Bs(t);return mr(r,i,o,s,a,c,l,u,h+n)}function ht(e,t,n){return js(ur(e,t),e,t,n)}function js(e,t,n,r){const i=e.length;if(i===1)return e[0];if(i)switch(r){case"compatible":case"earlier":return e[0];case"later":return e[i-1];case"reject":throw new RangeError("multiple instants found")}if(r==="reject")throw new RangeError("multiple instants found");const o=at(n),s=f.subtract(o,Ne);ae(s);const a=xe(t,s),c=f.add(o,Ne);ae(c);const l=xe(t,c)-a;switch(r){case"earlier":{const u=O.fromComponents(0,0,0,0,0,-l),h=Tn(n.time,u);return ur(t,z(Ot(n.isoDate.year,n.isoDate.month,n.isoDate.day+h.deltaDays),h))[0]}case"compatible":case"later":{const u=O.fromComponents(0,0,0,0,0,l),h=Tn(n.time,u),d=ur(t,z(Ot(n.isoDate.year,n.isoDate.month,n.isoDate.day+h.deltaDays),h));return d[d.length-1]}}}function ur(e,t){if(e==="UTC")return bn(t.isoDate),[at(t)];const n=Ae(e).offsetMinutes;if(n!==void 0){const r=mr(t.isoDate.year,t.isoDate.month,t.isoDate.day,t.time.hour,t.time.minute-n,t.time.second,t.time.millisecond,t.time.microsecond,t.time.nanosecond);bn(r.isoDate);const i=at(r);return ae(i),[i]}return bn(t.isoDate),(function(r,i){let o=at(i),s=f.subtract(o,Ne);f.lessThan(s,Fn)&&(s=o);let a=f.add(o,Ne);f.greaterThan(a,un)&&(a=o);const c=Bi(r,s),l=Bi(r,a);return(c===l?[c]:[c,l]).map((h=>{const d=f.subtract(o,f.BigInt(h)),g=(function(p,w){const{epochMilliseconds:y,time:{millisecond:v,microsecond:_,nanosecond:T}}=Bs(w),{year:M,month:E,day:R,hour:F,minute:U,second:Y}=Js(p,y);return mr(M,E,R,F,U,Y,v,_,T)})(r,d);if(Mn(i,g)===0)return ae(d),d})).filter((h=>h!==void 0))})(e,t)}function Se(e,t){const n=z(t,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),r=ur(e,n);if(r.length)return r[0];const i=at(n),o=f.subtract(i,Ne);return ae(o),eo(e,o)}function hr(e){let t;return t=e<0||e>9999?(e<0?"-":"+")+qn(Math.abs(e),6):qn(e,4),t}function Ut(e){return qn(e,2)}function Fs(e,t){let n;if(t==="auto"){if(e===0)return"";n=qn(e,9).replace(/0+$/,"")}else{if(t===0)return"";n=qn(e,9).slice(0,t)}return`.${n}`}function Br(e,t,n,r,i){let o=`${Ut(e)}:${Ut(t)}`;return i==="minute"||(o+=`:${Ut(n)}`,o+=Fs(r,i)),o}function Zs(e,t,n){let r=t;r===void 0&&(r="UTC");const i=m(e,$),o=dr(Xt(r,i),"iso8601",n,"never");let s="Z";return t!==void 0&&(s=Qs(xe(r,i))),`${o}${s}`}function Jr(e,t){const n=m(e,dt),r=m(e,ft),i=m(e,Lt),o=m(e,mt),s=m(e,gt),a=m(e,pt),c=ni(e);let l="";n!==0&&(l+=`${Math.abs(n)}Y`),r!==0&&(l+=`${Math.abs(r)}M`),i!==0&&(l+=`${Math.abs(i)}W`),o!==0&&(l+=`${Math.abs(o)}D`);let u="";s!==0&&(u+=`${Math.abs(s)}H`),a!==0&&(u+=`${Math.abs(a)}M`);const h=O.fromComponents(0,0,m(e,yt),m(e,wt),m(e,vt),m(e,Rt));h.isZero()&&!["second","millisecond","microsecond","nanosecond"].includes(_e(e))&&t==="auto"||(u+=`${Math.abs(h.sec)}${Fs(Math.abs(h.subsec),t)}S`);let d=`${c<0?"-":""}P${l}`;return u&&(d=`${d}T${u}`),d}function qs(e,t="auto"){const{year:n,month:r,day:i}=m(e,k);return`${hr(n)}-${Ut(r)}-${Ut(i)}${Wn(m(e,x),t)}`}function Xs({hour:e,minute:t,second:n,millisecond:r,microsecond:i,nanosecond:o},s){return Br(e,t,n,1e6*r+1e3*i+o,s)}function dr(e,t,n,r="auto"){const{isoDate:{year:i,month:o,day:s},time:{hour:a,minute:c,second:l,millisecond:u,microsecond:h,nanosecond:d}}=e;return`${hr(i)}-${Ut(o)}-${Ut(s)}T${Br(a,c,l,1e6*u+1e3*h+d,n)}${Wn(t,r)}`}function Ws(e,t="auto"){const{year:n,month:r,day:i}=m(e,k);let o=`${Ut(r)}-${Ut(i)}`;const s=m(e,x);t!=="always"&&t!=="critical"&&s==="iso8601"||(o=`${hr(n)}-${o}`);const a=Wn(s,t);return a&&(o+=a),o}function Gs(e,t="auto"){const{year:n,month:r,day:i}=m(e,k);let o=`${hr(n)}-${Ut(r)}`;const s=m(e,x);t!=="always"&&t!=="critical"&&s==="iso8601"||(o+=`-${Ut(i)}`);const a=Wn(s,t);return a&&(o+=a),o}function Vs(e,t,n="auto",r="auto",i="auto",o=void 0){let s=m(e,$);if(o){const{unit:u,increment:h,roundingMode:d}=o;s=lo(s,h,u,d)}const a=m(e,j),c=xe(a,s);let l=dr(Xt(a,s),"iso8601",t,"never");return i!=="never"&&(l+=Qs(c)),r!=="never"&&(l+=`[${r==="critical"?"!":""}${a}]`),l+=Wn(m(e,x),n),l}function Ks(e){return $s.test(e)}function wn(e){const t=wl.exec(e);if(!t)throw new RangeError(`invalid time zone offset: ${e}; must match HH:MM[:SS.SSSSSSSSS]`);return(t[1]==="-"?-1:1)*(1e9*(60*(60*+t[2]+ +(t[3]||0))+ +(t[4]||0))+ +((t[5]||0)+"000000000").slice(0,9))}let fr;const pl=Object.assign(Object.create(null),{"/":!0,"-":!0,_:!0});function ti(e){if(fr===void 0){const o=Intl.supportedValuesOf?.("timeZone");if(o){fr=new Map;for(let s=0;s<o.length;s++){const a=o[s];fr.set(wr(a),a)}}else fr=null}const t=wr(e);let n=fr?.get(t);if(n)return{identifier:n,primaryIdentifier:n};try{n=xs(e).resolvedOptions().timeZone}catch{return}if(t==="antarctica/south_pole"&&(n="Antarctica/McMurdo"),hl.has(e))throw new RangeError(`${e} is a legacy time zone identifier from ICU. Use ${n} instead`);const r=[...t].map(((o,s)=>s===0||pl[t[s-1]]?o.toUpperCase():o)).join("").split("/");if(r.length===1)return t==="gb-eire"?{identifier:"GB-Eire",primaryIdentifier:n}:{identifier:t.length<=3||/[-0-9]/.test(t)?t.toUpperCase():r[0],primaryIdentifier:n};if(r[0]==="Etc")return{identifier:`Etc/${["Zulu","Greenwich","Universal"].includes(r[1])?r[1]:r[1].toUpperCase()}`,primaryIdentifier:n};if(r[0]==="Us")return{identifier:`US/${r[1]}`,primaryIdentifier:n};const i=new Map([["Act","ACT"],["Lhi","LHI"],["Nsw","NSW"],["Dar_Es_Salaam","Dar_es_Salaam"],["Port_Of_Spain","Port_of_Spain"],["Port-Au-Prince","Port-au-Prince"],["Isle_Of_Man","Isle_of_Man"],["Comodrivadavia","ComodRivadavia"],["Knox_In","Knox_IN"],["Dumontdurville","DumontDUrville"],["Mcmurdo","McMurdo"],["Denoronha","DeNoronha"],["Easterisland","EasterIsland"],["Bajanorte","BajaNorte"],["Bajasur","BajaSur"]]);return r[1]=i.get(r[1])??r[1],r.length>2&&(r[2]=i.get(r[2])??r[2]),{identifier:r.join("/"),primaryIdentifier:n}}function qe(e,t){const{year:n,month:r,day:i,hour:o,minute:s,second:a}=Js(e,t);let c=t%1e3;return c<0&&(c+=1e3),1e6*(to({isoDate:{year:n,month:r,day:i},time:{hour:o,minute:s,second:a,millisecond:c}})-t)}function Bi(e,t){return qe(e,Gt(t,"floor"))}function Ji(e){const t=e<0?"-":"+",n=Math.abs(e);return`${t}${Br(Math.floor(n/60),n%60,0,0,"minute")}`}function Qs(e){return Ji(He(e,sl,"halfExpand")/6e10)}function to({isoDate:{year:e,month:t,day:n},time:{hour:r,minute:i,second:o,millisecond:s}}){const a=e%400,c=(e-a)/400,l=new Date;return l.setUTCHours(r,i,o,s),l.setUTCFullYear(a,t-1,n),l.getTime()+ll*c}function at(e){const t=to(e),n=1e3*e.time.microsecond+e.time.nanosecond;return f.add(ue(t),f.BigInt(n))}function Bs(e){let t=Gt(e,"trunc"),n=f.toNumber(f.remainder(e,Sn));n<0&&(n+=1e6,t-=1);const r=Math.floor(n/1e3)%1e3,i=n%1e3,o=new Date(t);return{epochMilliseconds:t,isoDate:{year:o.getUTCFullYear(),month:o.getUTCMonth()+1,day:o.getUTCDate()},time:{hour:o.getUTCHours(),minute:o.getUTCMinutes(),second:o.getUTCSeconds(),millisecond:o.getUTCMilliseconds(),microsecond:r,nanosecond:i}}}function eo(e,t){if(e==="UTC")return null;const n=Gt(t,"floor");if(n<Zn)return eo(e,ue(Zn));const r=Date.now(),i=Math.max(n,r)+366*Oe*3;let o=n,s=qe(e,o),a=o,c=s;for(;s===c&&o<i;){if(a=o+2*Oe*7,a>vs)return null;c=qe(e,a),s===c&&(o=a)}return s===c?null:ue(Ea((l=>qe(e,l)),o,a,s,c))}function no(e,t){if(e==="UTC")return null;const n=Gt(t,"ceil"),r=Date.now(),i=r+366*Oe*3;if(n>i){const l=no(e,ue(i));if(l===null||f.lessThan(l,ue(r)))return l}if(e==="Africa/Casablanca"||e==="Africa/El_Aaiun"){const l=Date.UTC(2088,0,1);if(l<n)return no(e,ue(l))}let o=n-1;if(o<Zn)return null;let s=qe(e,o),a=o,c=s;for(;s===c&&o>Zn;){if(a=o-2*Oe*7,a<Zn)return null;c=qe(e,a),s===c&&(o=a)}return s===c?null:ue(Ea((l=>qe(e,l)),a,o,c,s))}function Js(e,t){return(function(n){const r=n.split(/[^\w]+/);if(r.length!==7)throw new RangeError(`expected 7 parts in "${n}`);const i=+r[0],o=+r[1];let s=+r[2];const a=r[3];if(a[0]==="b"||a[0]==="B")s=1-s;else if(a[0]!=="a"&&a[0]!=="A")throw new RangeError(`Unknown era ${a} in "${n}`);const c=r[4]==="24"?0:+r[4],l=+r[5],u=+r[6];if(!(Number.isFinite(s)&&Number.isFinite(i)&&Number.isFinite(o)&&Number.isFinite(c)&&Number.isFinite(l)&&Number.isFinite(u)))throw new RangeError(`Invalid number in "${n}`);return{year:s,month:i,day:o,hour:c,minute:l,second:u}})(xs(e).format(t))}function ei(e){return e!==void 0&&!(e%4!=0||e%100==0&&e%400!=0)}function Xe(e,t){return{standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]}[ei(e)?"leapyear":"standard"][t-1]}function ni(e){const t=[m(e,dt),m(e,ft),m(e,Lt),m(e,mt),m(e,gt),m(e,pt),m(e,yt),m(e,wt),m(e,vt),m(e,Rt)];for(let n=0;n<t.length;n++){const r=t[n];if(r!==0)return r<0?-1:1}return 0}function ri(e){const t=["years","months","weeks","days"];for(let n=0;n<t.length;n++){const r=e[t[n]];if(r!==0)return r<0?-1:1}return 0}function ta(e){const t=ri(e.date);return t!==0?t:e.time.sign()}function We(e,t){let n=e,r=t;if(!Number.isFinite(n)||!Number.isFinite(r))throw new RangeError("infinity is out of range");return r-=1,n+=Math.floor(r/12),r%=12,r<0&&(r+=12),r+=1,{year:n,month:r}}function Ot(e,t,n){let r=e,i=t,o=n;if(!Number.isFinite(o))throw new RangeError("infinity is out of range");({year:r,month:i}=We(r,i));const s=146097;if(Math.abs(o)>s){const l=Math.trunc(o/s);r+=400*l,o-=l*s}let a=0,c=i>2?r:r-1;for(;a=ei(c)?366:365,o<-a;)r-=1,c-=1,o+=a;for(c+=1;a=ei(c)?366:365,o>a;)r+=1,c+=1,o-=a;for(;o<1;)({year:r,month:i}=We(r,i-1)),o+=Xe(r,i);for(;o>Xe(r,i);)o-=Xe(r,i),{year:r,month:i}=We(r,i+1);return{year:r,month:i,day:o}}function mr(e,t,n,r,i,o,s,a,c){const l=ze(r,i,o,s,a,c);return z(Ot(e,t,n+l.deltaDays),l)}function ze(e,t,n,r,i,o){let s,a=e,c=t,l=n,u=r,h=i,d=o;({div:s,mod:d}=cn(d,3)),h+=s,d<0&&(h-=1,d+=1e3),{div:s,mod:h}=cn(h,3),u+=s,h<0&&(u-=1,h+=1e3),l+=Math.trunc(u/1e3),u%=1e3,u<0&&(l-=1,u+=1e3),c+=Math.trunc(l/60),l%=60,l<0&&(c-=1,l+=60),a+=Math.trunc(c/60),c%=60,c<0&&(a-=1,c+=60);let g=Math.trunc(a/24);return a%=24,a<0&&(g-=1,a+=24),g+=0,a+=0,c+=0,l+=0,u+=0,h+=0,d+=0,{deltaDays:g,hour:a,minute:c,second:l,millisecond:u,microsecond:h,nanosecond:d}}function ea(e,t){const n=lt(e,0);if(ri(n)===0)return e.days;const r=m(t,k),i=Ht(m(t,x),r,n,"constrain"),o=Qe(r.year,r.month-1,r.day),s=Qe(i.year,i.month-1,i.day)-o;return e.days+s}function At(e){return new(it("%Temporal.Duration%"))(-m(e,dt),-m(e,ft),-m(e,Lt),-m(e,mt),-m(e,gt),-m(e,pt),-m(e,yt),-m(e,wt),-m(e,vt),-m(e,Rt))}function Et(e,t,n){return Math.min(n,Math.max(t,e))}function na(e,t,n){const r=Et(t,1,12);return{year:e,month:r,day:Et(n,1,Xe(e,r))}}function nt(e,t,n){if(e<t||e>n)throw new RangeError(`value out of range: ${t} <= ${e} <= ${n}`)}function Ge(e,t,n){nt(t,1,12),nt(n,1,Xe(e,t))}function Ve(e){Ke(z(e,{deltaDays:0,hour:12,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}))}function ii(e,t,n,r,i,o){nt(e,0,23),nt(t,0,59),nt(n,0,59),nt(r,0,999),nt(i,0,999),nt(o,0,999)}function ro(e,t,n,r,i,o,s,a,c){Ge(e,t,n),ii(r,i,o,s,a,c)}function Ke(e){const t=at(e);(f.lessThan(t,al)||f.greaterThan(t,cl))&&ae(t)}function io(e){at(e)}function ae(e){if(f.lessThan(e,Fn)||f.greaterThan(e,un))throw new RangeError("date/time value is outside of supported range")}function oo({year:e,month:t}){nt(e,bs,_s),e===bs?nt(t,4,12):e===_s&&nt(t,1,9)}function oi(e,t,n,r,i,o,s,a,c,l){let u=0;const h=[e,t,n,r,i,o,s,a,c,l];for(let v=0;v<h.length;v++){const _=h[v];if(_===1/0||_===-1/0)throw new RangeError("infinite values not allowed as duration fields");if(_!==0){const T=_<0?-1:1;if(u!==0&&T!==u)throw new RangeError("mixed-sign values not allowed as duration fields");u=T}}if(Math.abs(e)>=2**32||Math.abs(t)>=2**32||Math.abs(n)>=2**32)throw new RangeError("years, months, and weeks must be < 2");const d=cn(a,3),g=cn(c,6),p=cn(l,9),w=cn(1e6*d.mod+1e3*g.mod+p.mod,9).div,y=86400*r+3600*i+60*o+s+d.div+g.div+p.div+w;if(!Number.isSafeInteger(y))throw new RangeError("total of duration time units cannot exceed 9007199254740991.999999999 s")}function vn(e){return{date:{years:m(e,dt),months:m(e,ft),weeks:m(e,Lt),days:m(e,mt)},time:O.fromComponents(m(e,gt),m(e,pt),m(e,yt),m(e,wt),m(e,vt),m(e,Rt))}}function ce(e){const t=O.fromComponents(m(e,gt),m(e,pt),m(e,yt),m(e,wt),m(e,vt),m(e,Rt)).add24HourDays(m(e,mt));return{date:{years:m(e,dt),months:m(e,ft),weeks:m(e,Lt),days:0},time:t}}function ra(e){const t=ce(e),n=Math.trunc(t.time.sec/86400);return oi(t.date.years,t.date.months,t.date.weeks,n,0,0,0,0,0,0),{...t.date,days:n}}function Wt(e,t){const n=e.time.sign();let r=e.time.abs().subsec,i=0,o=0,s=e.time.abs().sec,a=0,c=0,l=0;switch(t){case"year":case"month":case"week":case"day":i=Math.trunc(r/1e3),r%=1e3,o=Math.trunc(i/1e3),i%=1e3,s+=Math.trunc(o/1e3),o%=1e3,a=Math.trunc(s/60),s%=60,c=Math.trunc(a/60),a%=60,l=Math.trunc(c/24),c%=24;break;case"hour":i=Math.trunc(r/1e3),r%=1e3,o=Math.trunc(i/1e3),i%=1e3,s+=Math.trunc(o/1e3),o%=1e3,a=Math.trunc(s/60),s%=60,c=Math.trunc(a/60),a%=60;break;case"minute":i=Math.trunc(r/1e3),r%=1e3,o=Math.trunc(i/1e3),i%=1e3,s+=Math.trunc(o/1e3),o%=1e3,a=Math.trunc(s/60),s%=60;break;case"second":i=Math.trunc(r/1e3),r%=1e3,o=Math.trunc(i/1e3),i%=1e3,s+=Math.trunc(o/1e3),o%=1e3;break;case"millisecond":i=Math.trunc(r/1e3),r%=1e3,o=ji(s,3,Math.trunc(i/1e3)),i%=1e3,s=0;break;case"microsecond":i=ji(s,6,Math.trunc(r/1e3)),r%=1e3,s=0;break;case"nanosecond":r=ji(s,9,r),s=0}return new(it("%Temporal.Duration%"))(e.date.years,e.date.months,e.date.weeks,e.date.days+n*l,n*c,n*a,n*s,n*o,n*i,n*r)}function De(e,t){return ri(e),t.sign(),{date:e,time:t}}function Qe(e,t,n){return to({isoDate:{year:e,month:t+1,day:n},time:{hour:0,minute:0,second:0,millisecond:0}})/Oe}function bn({year:e,month:t,day:n}){if(Math.abs(Qe(e,t-1,n))>1e8)throw new RangeError("date/time value is outside the supported range")}function so(e,t){const n=t.hour-e.hour,r=t.minute-e.minute,i=t.second-e.second,o=t.millisecond-e.millisecond,s=t.microsecond-e.microsecond,a=t.nanosecond-e.nanosecond;return O.fromComponents(n,r,i,o,s,a)}function ao(e,t,n,r,i){let o=O.fromEpochNsDiff(t,e);return o=ai(o,n,r,i),De({years:0,months:0,weeks:0,days:0},o)}function ia(e,t,n,r){io(e),io(t);let i=so(e.time,t.time);const o=i.sign(),s=le(e.isoDate,t.isoDate);let a=t.isoDate;s===o&&(a=Ot(a.year,a.month,a.day+o),i=i.add24HourDays(-o));const c=Te("day",r),l=sr(n,e.isoDate,a,c);return r!==c&&(i=i.add24HourDays(l.days),l.days=0),De(l,i)}function oa(e,t,n,r,i){const o=f.subtract(t,e);if(f.equal(o,Pt))return{date:{years:0,months:0,weeks:0,days:0},time:O.ZERO};const s=f.lessThan(o,Pt)?-1:1,a=Xt(n,e),c=Xt(n,t);let l,u=0,h=s===1?2:1,d=so(a.time,c.time);for(d.sign()===-s&&u++;u<=h;u++){l=z(Ot(c.isoDate.year,c.isoDate.month,c.isoDate.day-u*s),a.time);const p=ht(n,l,"compatible");if(d=O.fromEpochNsDiff(t,p),d.sign()!==-s)break}const g=Te("day",i);return De(sr(r,a.isoDate,l.isoDate,g),d)}function sa(e,t,n,r,i,o,s,a,c){let l,u,h,d,g=t;switch(a){case"year":{const I=He(g.date.years,s,"trunc");l=I,u=I+s*e,h={years:l,months:0,weeks:0,days:0},d={...h,years:u};break}case"month":{const I=He(g.date.months,s,"trunc");l=I,u=I+s*e,h=lt(g.date,0,0,l),d=lt(g.date,0,0,u);break}case"week":{const I=lt(g.date,0,0),H=Ht(o,r.isoDate,I,"constrain"),B=sr(o,H,Ot(H.year,H.month,H.day+g.date.days),"week"),Ft=He(g.date.weeks+B.weeks,s,"trunc");l=Ft,u=Ft+s*e,h=lt(g.date,0,l),d=lt(g.date,0,u);break}case"day":{const I=He(g.date.days,s,"trunc");l=I,u=I+s*e,h=lt(g.date,l),d=lt(g.date,u);break}}const p=Ht(o,r.isoDate,h,"constrain"),w=Ht(o,r.isoDate,d,"constrain");let y,v;const _=z(p,r.time),T=z(w,r.time);i?(y=ht(i,_,"compatible"),v=ht(i,T,"compatible")):(y=at(_),v=at(T));const M=O.fromEpochNsDiff(n,y),E=O.fromEpochNsDiff(v,y),R=Hr(c,e<0?"negative":"positive"),F=M.add(M).abs().subtract(E.abs()).sign(),U=Math.abs(l)/s%2==0,Y=M.isZero()?Math.abs(l):M.cmp(E)?Ur(Math.abs(l),Math.abs(u),F,U,R):Math.abs(u),P=new O(f.add(f.multiply(E.totalNs,f.BigInt(l)),f.multiply(M.totalNs,f.BigInt(s*e)))).fdiv(E.totalNs),D=Y===Math.abs(u);return g={date:D?d:h,time:O.ZERO},{nudgeResult:{duration:g,nudgedEpochNs:D?v:y,didExpandCalendarUnit:D},total:P}}function si(e,t,n,r,i,o,s,a,c){let l=e;const u=ie(a)||r&&a==="day",h=ta(l)<0?-1:1;let d;return u?{nudgeResult:d}=sa(h,l,t,n,r,i,s,a,c):d=r?(function(g,p,w,y,v,_,T,M){let E=p;const R=Ht(v,w.isoDate,E.date,"constrain"),F=z(R,w.time),U=z(Ot(R.year,R.month,R.day+g),w.time),Y=ht(y,F,"compatible"),P=ht(y,U,"compatible"),D=O.fromEpochNsDiff(P,Y);if(D.sign()!==g)throw new RangeError("time zone returned inconsistent Instants");const I=f.BigInt(dn[T]*_);let H=E.time.round(I,M);const B=H.subtract(D),Ft=B.sign()!==-g;let Z,ct;return Ft?(Z=g,H=B.round(I,M),ct=H.addToEpochNs(P)):(Z=0,ct=H.addToEpochNs(Y)),{duration:De(lt(E.date,E.date.days+Z),H),nudgedEpochNs:ct,didExpandCalendarUnit:Ft}})(h,l,n,r,i,s,a,c):(function(g,p,w,y,v,_){let T=g;const M=T.time.add24HourDays(T.date.days),E=M.round(f.BigInt(y*dn[v]),_),R=E.subtract(M),{quotient:F}=M.divmod(Fr),{quotient:U}=E.divmod(Fr),Y=Math.sign(U-F)===M.sign(),P=R.addToEpochNs(p);let D=0,I=E;return Me(w)==="date"&&(D=U,I=E.add(O.fromComponents(24*-U,0,0,0,0,0))),{duration:{date:lt(T.date,D),time:I},nudgedEpochNs:P,didExpandCalendarUnit:Y}})(l,t,o,s,a,c),l=d.duration,d.didExpandCalendarUnit&&a!=="week"&&(l=(function(g,p,w,y,v,_,T,M){let E=p;if(M===T)return E;const R=Xn.indexOf(T);for(let F=Xn.indexOf(M)-1;F>=R;F--){const U=Xn[F];if(U==="week"&&T!=="week")continue;let Y;switch(U){case"year":Y={years:E.date.years+g,months:0,weeks:0,days:0};break;case"month":{const I=E.date.months+g;Y=lt(E.date,0,0,I);break}case"week":{const I=E.date.weeks+g;Y=lt(E.date,0,I);break}}const P=z(Ht(_,y.isoDate,Y,"constrain"),y.time);let D;if(D=v?ht(v,P,"compatible"):at(P),Sr(w,D)===-g)break;E={date:Y,time:O.ZERO}}return E})(h,l,d.nudgedEpochNs,n,r,i,o,Te(a,"day"))),l}function aa(e,t,n,r,i,o){return ie(o)||r&&o==="day"?sa(ta(e)<0?-1:1,e,t,n,r,i,1,o,"trunc").total:pr(e.time.add24HourDays(e.date.days),o)}function ca(e,t,n,r,i,o,s){if(Mn(e,t)==0)return{date:{years:0,months:0,weeks:0,days:0},time:O.ZERO};Ke(e),Ke(t);const a=ia(e,t,n,r);return o==="nanosecond"&&i===1?a:si(a,at(t),e,null,n,r,i,o,s)}function la(e,t,n,r,i,o,s,a){if(Me(i)==="time")return ao(e,t,o,s,a);const c=oa(e,t,n,r,i);return s==="nanosecond"&&o===1?c:si(c,t,Xt(n,e),n,r,i,o,s,a)}function _n(e,t,n,r,i,o){const s=hn.reduce(((g,p)=>{const w=p[0],y=p[1],v=p[2];return n!=="datetime"&&v!==n||r.includes(y)||g.push(y,w),g}),[]);let a=Nt(t,"largestUnit",n,"auto");if(r.includes(a))throw new RangeError(`largestUnit must be one of ${s.join(", ")}, not ${a}`);const c=mn(t);let l=Qt(t,"trunc");e==="since"&&(l=(function(g){switch(g){case"ceil":return"floor";case"floor":return"ceil";case"halfCeil":return"halfFloor";case"halfFloor":return"halfCeil";default:return g}})(l));const u=Nt(t,"smallestUnit",n,i);if(r.includes(u))throw new RangeError(`smallestUnit must be one of ${s.join(", ")}, not ${u}`);const h=Te(o,u);if(a==="auto"&&(a=h),Te(a,u)!==a)throw new RangeError(`largestUnit ${a} cannot be smaller than smallestUnit ${u}`);const d={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[u];return d!==void 0&&gn(c,d,!1),{largestUnit:a,roundingIncrement:c,roundingMode:l,smallestUnit:u}}function ua(e,t,n,r){const i=rr(n),o=_n(e,C(r),"time",[],"nanosecond","second");let s=Wt(ao(m(t,$),m(i,$),o.roundingIncrement,o.smallestUnit,o.roundingMode),o.largestUnit);return e==="since"&&(s=At(s)),s}function ha(e,t,n,r){const i=tr(n),o=m(t,x),s=m(i,x);if(!se(o,s))throw new RangeError(`cannot compute difference between dates of ${o} and ${s} calendars`);const a=_n(e,C(r),"date",[],"day","day"),c=it("%Temporal.Duration%"),l=m(t,k),u=m(i,k);if(le(l,u)===0)return new c;let h={date:sr(o,l,u,a.largestUnit),time:O.ZERO};if(a.smallestUnit!=="day"||a.roundingIncrement!==1){const g=z(l,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});h=si(h,at(z(u,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0})),g,null,o,a.largestUnit,a.roundingIncrement,a.smallestUnit,a.roundingMode)}let d=Wt(h,"day");return e==="since"&&(d=At(d)),d}function da(e,t,n,r){const i=nr(n),o=m(t,x),s=m(i,x);if(!se(o,s))throw new RangeError(`cannot compute difference between dates of ${o} and ${s} calendars`);const a=_n(e,C(r),"datetime",[],"nanosecond","day"),c=it("%Temporal.Duration%"),l=m(t,X),u=m(i,X);if(Mn(l,u)===0)return new c;let h=Wt(ca(l,u,o,a.largestUnit,a.roundingIncrement,a.smallestUnit,a.roundingMode),a.largestUnit);return e==="since"&&(h=At(h)),h}function fa(e,t,n,r){const i=Ie(n),o=_n(e,C(r),"time",[],"nanosecond","hour");let s=so(m(t,W),m(i,W));s=ai(s,o.roundingIncrement,o.smallestUnit,o.roundingMode);let a=Wt(De({years:0,months:0,weeks:0,days:0},s),o.largestUnit);return e==="since"&&(a=At(a)),a}function ma(e,t,n,r){const i=ir(n),o=m(t,x),s=m(i,x);if(!se(o,s))throw new RangeError(`cannot compute difference between months of ${o} and ${s} calendars`);const a=_n(e,C(r),"date",["week","day"],"month","year"),c=it("%Temporal.Duration%");if(le(m(t,k),m(i,k))==0)return new c;const l=_t(o,m(t,k),"year-month");l.day=1;const u=Pe(o,l,"constrain"),h=_t(o,m(i,k),"year-month");h.day=1;const d=Pe(o,h,"constrain");let g={date:lt(sr(o,u,d,a.largestUnit),0,0),time:O.ZERO};if(a.smallestUnit!=="month"||a.roundingIncrement!==1){const w=z(u,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});g=si(g,at(z(d,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0})),w,null,o,a.largestUnit,a.roundingIncrement,a.smallestUnit,a.roundingMode)}let p=Wt(g,"day");return e==="since"&&(p=At(p)),p}function ga(e,t,n,r){const i=or(n),o=m(t,x),s=m(i,x);if(!se(o,s))throw new RangeError(`cannot compute difference between dates of ${o} and ${s} calendars`);const a=_n(e,C(r),"datetime",[],"nanosecond","hour"),c=m(t,$),l=m(i,$),u=it("%Temporal.Duration%");let h;if(Me(a.largestUnit)!=="date")h=Wt(ao(c,l,a.roundingIncrement,a.smallestUnit,a.roundingMode),a.largestUnit);else{const d=m(t,j);if(!Us(d,m(i,j)))throw new RangeError("When calculating difference between time zones, largestUnit must be 'hours' or smaller because day lengths can vary between time zones due to DST or time zone offset changes.");if(f.equal(c,l))return new u;h=Wt(la(c,l,d,o,a.largestUnit,a.roundingIncrement,a.smallestUnit,a.roundingMode),"hour")}return e==="since"&&(h=At(h)),h}function Tn({hour:e,minute:t,second:n,millisecond:r,microsecond:i,nanosecond:o},s){let a=n,c=o;return a+=s.sec,c+=s.subsec,ze(e,t,a,r,i,c)}function co(e,t){const n=t.addToEpochNs(e);return ae(n),n}function gr(e,t,n,r,i="constrain"){if(ri(r.date)===0)return co(e,r.time);const o=Xt(t,e);return co(ht(t,z(Ht(n,o.isoDate,r.date,i),o.time),"compatible"),r.time)}function pa(e,t,n){let r=Zt(n);e==="subtract"&&(r=At(r));const i=Te(_e(t),_e(r));if(ie(i))throw new RangeError("For years, months, or weeks arithmetic, use date arithmetic relative to a starting point");const o=ce(t),s=ce(r);return Wt(De({years:0,months:0,weeks:0,days:0},o.time.add(s.time)),i)}function ya(e,t,n){let r=Zt(n);e==="subtract"&&(r=At(r));const i=_e(r);if(Me(i)==="date")throw new RangeError(`Duration field ${i} not supported by Temporal.Instant. Try Temporal.ZonedDateTime instead.`);const o=ce(r);return oe(co(m(t,$),o.time))}function wa(e,t,n,r){const i=m(t,x);let o=Zt(n);e==="subtract"&&(o=At(o));const s=ra(o),a=S(C(r));return Tt(Ht(i,m(t,k),s,a),i)}function va(e,t,n,r){let i=Zt(n);e==="subtract"&&(i=At(i));const o=S(C(r)),s=m(t,x),a=ce(i),c=m(t,X),l=Tn(c.time,a.time),u=lt(a.date,l.deltaDays);return oi(u.years,u.months,u.weeks,u.days,0,0,0,0,0,0),qt(z(Ht(s,c.isoDate,u,o),l),s)}function ba(e,t,n){let r=Zt(n);e==="subtract"&&(r=At(r));const i=ce(r),{hour:o,minute:s,second:a,millisecond:c,microsecond:l,nanosecond:u}=Tn(m(t,W),i.time);return Ee(Gr(o,s,a,c,l,u,"reject"))}function _a(e,t,n,r){let i=Zt(n);e==="subtract"&&(i=At(i));const o=S(C(r)),s=ni(i),a=m(t,x),c=_t(a,m(t,k),"year-month");c.day=1;let l=Pe(a,c,"constrain");if(s<0){const h=Ht(a,l,{months:1},"constrain");l=Ot(h.year,h.month,h.day-1)}const u=ra(i);return Ve(l),yn(lr(a,_t(a,Ht(a,l,u,o),"year-month"),o),a)}function Ta(e,t,n,r){let i=Zt(n);e==="subtract"&&(i=At(i));const o=S(C(r)),s=m(t,j),a=m(t,x),c=vn(i);return ut(gr(m(t,$),s,a,c,o),s,a)}function He(e,t,n){const r=Math.trunc(e/t),i=e%t,o=e<0?"negative":"positive",s=Math.abs(r),a=s+1,c=Yt(Math.abs(2*i)-t),l=s%2==0,u=Hr(n,o),h=i===0?s:Ur(s,a,c,l,u);return t*(o==="positive"?h:-h)}function lo(e,t,n,r){const i=dn[n]*t;return(function(o,s,a){const c=ye(o),l=ye(s),u=f.divide(c,l),h=f.remainder(c,l),d=Hr(a,"positive");let g,p;f.lessThan(c,Pt)?(g=f.subtract(u,Pn),p=u):(g=u,p=f.add(u,Pn));const w=Sr(je(f.multiply(h,Yi)),l)*(f.lessThan(c,Pt)?-1:1)+0,y=f.equal(h,Pt)?u:Ur(g,p,w,ts(g),d);return f.multiply(y,l)})(e,f.BigInt(i),r)}function uo(e,t,n,r){io(e);const{year:i,month:o,day:s}=e.isoDate,a=ho(e.time,t,n,r);return z(Ot(i,o,s+a.deltaDays),a)}function ho({hour:e,minute:t,second:n,millisecond:r,microsecond:i,nanosecond:o},s,a,c){let l;switch(a){case"day":case"hour":l=1e3*(1e3*(1e3*(60*(60*e+t)+n)+r)+i)+o;break;case"minute":l=1e3*(1e3*(1e3*(60*t+n)+r)+i)+o;break;case"second":l=1e3*(1e3*(1e3*n+r)+i)+o;break;case"millisecond":l=1e3*(1e3*r+i)+o;break;case"microsecond":l=1e3*i+o;break;case"nanosecond":l=o}const u=dn[a],h=He(l,u*s,c)/u;switch(a){case"day":return{deltaDays:h,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0};case"hour":return ze(h,0,0,0,0,0);case"minute":return ze(e,h,0,0,0,0);case"second":return ze(e,t,h,0,0,0);case"millisecond":return ze(e,t,n,h,0,0);case"microsecond":return ze(e,t,n,r,h,0);case"nanosecond":return ze(e,t,n,r,i,h);default:throw new Error(`Invalid unit ${a}`)}}function ai(e,t,n,r){const i=dn[n];return e.round(f.BigInt(i*t),r)}function pr(e,t){const n=dn[t];return e.fdiv(f.BigInt(n))}function le(e,t){return e.year!==t.year?Yt(e.year-t.year):e.month!==t.month?Yt(e.month-t.month):e.day!==t.day?Yt(e.day-t.day):0}function fo(e,t){return e.hour!==t.hour?Yt(e.hour-t.hour):e.minute!==t.minute?Yt(e.minute-t.minute):e.second!==t.second?Yt(e.second-t.second):e.millisecond!==t.millisecond?Yt(e.millisecond-t.millisecond):e.microsecond!==t.microsecond?Yt(e.microsecond-t.microsecond):e.nanosecond!==t.nanosecond?Yt(e.nanosecond-t.nanosecond):0}function Mn(e,t){const n=le(e.isoDate,t.isoDate);return n!==0?n:fo(e.time,t.time)}function Ma(e){const t=ci(e);return globalThis.BigInt!==void 0?globalThis.BigInt(t.toString(10)):t}function Gt(e,t){const n=ye(e),{quotient:r,remainder:i}=Hn(n,Sn);let o=f.toNumber(r);return t==="floor"&&f.toNumber(i)<0&&(o-=1),t==="ceil"&&f.toNumber(i)>0&&(o+=1),o}function ue(e){if(!Number.isInteger(e))throw new RangeError("epoch milliseconds must be an integer");return f.multiply(f.BigInt(e),Sn)}function ci(e){let t=e;if(typeof e=="object"){const n=e[Symbol.toPrimitive];n&&typeof n=="function"&&(t=n.call(e,"number"))}if(typeof t=="number")throw new TypeError("cannot convert number to bigint");return typeof t=="bigint"?f.BigInt(t.toString(10)):f.BigInt(t)}const mo=(()=>{let e=f.BigInt(Date.now()%1e6);return()=>{const t=Date.now(),n=f.BigInt(t),r=f.add(ue(t),e);return e=f.remainder(n,Sn),f.greaterThan(r,un)?un:f.lessThan(r,Fn)?Fn:r}})();function yr(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}function Yt(e){return e<0?-1:e>0?1:e}function C(e){if(e===void 0)return Object.create(null);if(G(e)&&e!==null)return e;throw new TypeError("Options parameter must be an object, not "+(e===null?"null":typeof e))}function Be(e,t){const n=Object.create(null);return n[e]=t,n}function Ce(e,t,n,r){let i=e[t];if(i!==void 0){if(i=qr(i),!n.includes(i))throw new RangeError(`${t} must be one of ${n.join(", ")}, not ${i}`);return i}if(r===be)throw new RangeError(`${t} option is required`);return r}function xt(e){const t=wr(e);if(!ul.includes(wr(t)))throw new RangeError(`invalid calendar identifier ${t}`);switch(t){case"ethiopic-amete-alem":return"ethioaa";case"islamicc":return"islamic-civil"}return t}function wr(e){let t="";for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t+=r>=65&&r<=90?String.fromCharCode(r+32):String.fromCharCode(r)}return t}function Ue(e){throw new TypeError(`Do not use built-in arithmetic operators with Temporal objects. When comparing, use ${e==="PlainMonthDay"?"Temporal.PlainDate.compare(obj1.toPlainDate(year), obj2.toPlainDate(year))":`Temporal.${e}.compare(obj1, obj2)`}, not obj1 > obj2. When coercing to strings, use \`\${obj}\` or String(obj), not '' + obj. When coercing to numbers, use properties or methods of the object, not \`+obj\`. When concatenating with strings, use \`\${str}\${obj}\` or str.concat(obj), not str + obj. In React, coerce to a string before rendering a Temporal object.`)}const yl=new RegExp(`^${ys.source}$`),wl=new RegExp(`^${/([+-])([01][0-9]|2[0-3])(?::?([0-5][0-9])(?::?([0-5][0-9])(?:[.,](\d{1,9}))?)?)?/.source}$`);function Ea(e,t,n,r=e(t),i=e(n)){let o=t,s=n,a=r,c=i;for(;s-o>1;){let l=Math.trunc((o+s)/2);const u=e(l);u===a?(o=l,a=u):u===c&&(s=l,c=u)}return s}function xa(e){return[...e]}function Da(e,t){if(e!=="gregory"&&e!=="iso8601")return;const n=vr[e];let r=t.year;const{dayOfWeek:i,dayOfYear:o,daysInYear:s}=n.isoToDate(t,{dayOfWeek:!0,dayOfYear:!0,daysInYear:!0}),a=n.getFirstDayOfWeek(),c=n.getMinimalDaysInFirstWeek();let l=(i+7-a)%7,u=(i-o+7001-a)%7,h=Math.floor((o-1+u)/7);if(7-u>=c&&++h,h==0)h=(function(d,g,p,w){let y=(w-d-p+1)%7;y<0&&(y+=7);let v=Math.floor((p+y-1)/7);return 7-y>=g&&++v,v})(a,c,o+n.isoToDate(n.dateAdd(t,{years:-1},"constrain"),{daysInYear:!0}).daysInYear,i),r--;else if(o>=s-5){let d=(l+s-o)%7;d<0&&(d+=7),6-d>=c&&o+7-l>s&&(h=1,r++)}return{week:h,year:r}}function Ca(e,t,n,r,i){if(t!==i.year){if(e*(t-i.year)>0)return!0}else if(n!==i.month){if(e*(n-i.month)>0)return!0}else if(r!==i.day&&e*(r-i.day)>0)return!0;return!1}const vr={};function Je(e){if(!e.startsWith("M"))throw new RangeError(`Invalid month code: ${e}.  Month codes must start with M.`);const t=+e.slice(1);if(Number.isNaN(t))throw new RangeError(`Invalid month code: ${e}`);return t}function he(e,t=!1){return`M${`${e}`.padStart(2,"0")}${t?"L":""}`}function go(e,t=void 0,n=12){let{month:r,monthCode:i}=e;if(i===void 0){if(r===void 0)throw new TypeError("Either month or monthCode are required");t==="reject"&&nt(r,1,n),t==="constrain"&&(r=Et(r,1,n)),i=he(r)}else{const o=Je(i);if(i!==he(o))throw new RangeError(`Invalid month code: ${i}`);if(r!==void 0&&r!==o)throw new RangeError(`monthCode ${i} and month ${r} must match if both are present`);if(r=o,r<1||r>n)throw new RangeError(`Invalid monthCode: ${i}`)}return{...e,month:r,monthCode:i}}vr.iso8601={resolveFields(e,t){if((t==="date"||t==="year-month")&&e.year===void 0)throw new TypeError("year is required");if((t==="date"||t==="month-day")&&e.day===void 0)throw new TypeError("day is required");Object.assign(e,go(e))},dateToISO:(e,t)=>Gn(e.year,e.month,e.day,t),monthDayToISOReferenceDate(e,t){const{month:n,day:r}=Gn(e.year??1972,e.month,e.day,t);return{month:n,day:r,year:1972}},extraFields:()=>[],fieldKeysToIgnore(e){const t=new Set;for(let n=0;n<e.length;n++){const r=e[n];t.add(r),r==="month"?t.add("monthCode"):r==="monthCode"&&t.add("month")}return xa(t)},dateAdd(e,{years:t=0,months:n=0,weeks:r=0,days:i=0},o){let{year:s,month:a,day:c}=e;return s+=t,a+=n,{year:s,month:a}=We(s,a),{year:s,month:a,day:c}=Gn(s,a,c,o),c+=i+7*r,Ot(s,a,c)},dateUntil(e,t,n){const r=-le(e,t);if(r===0)return{years:0,months:0,weeks:0,days:0};let i,o=0,s=0;if(n==="year"||n==="month"){let u=t.year-e.year;for(u!==0&&(u-=r);!Ca(r,e.year+u,e.month,e.day,t);)o=u,u+=r;let h=r;for(i=We(e.year+o,e.month+h);!Ca(r,i.year,i.month,e.day,t);)s=h,h+=r,i=We(i.year,i.month+r);n==="month"&&(s+=12*o,o=0)}i=We(e.year+o,e.month+s);const a=na(i.year,i.month,e.day);let c=0,l=Qe(t.year,t.month-1,t.day)-Qe(a.year,a.month-1,a.day);return n==="week"&&(c=Math.trunc(l/7),l%=7),{years:o,months:s,weeks:c,days:l}},isoToDate({year:e,month:t,day:n},r){const i={era:void 0,eraYear:void 0,year:e,month:t,day:n,daysInWeek:7,monthsInYear:12};if(r.monthCode&&(i.monthCode=he(t)),r.dayOfWeek){const o=t+(t<3?10:-2),s=e-(t<3?1:0),a=Math.floor(s/100),c=s-100*a,l=(n+Math.floor(2.6*o-.2)+(c+Math.floor(c/4))+(Math.floor(a/4)-2*a))%7;i.dayOfWeek=l+(l<=0?7:0)}if(r.dayOfYear){let o=n;for(let s=t-1;s>0;s--)o+=Xe(e,s);i.dayOfYear=o}return r.weekOfYear&&(i.weekOfYear=Da("iso8601",{year:e,month:t,day:n})),r.daysInMonth&&(i.daysInMonth=Xe(e,t)),(r.daysInYear||r.inLeapYear)&&(i.inLeapYear=ei(e),i.daysInYear=i.inLeapYear?366:365),i},getFirstDayOfWeek:()=>1,getMinimalDaysInFirstWeek:()=>4};class rt{constructor(t){if(this.map=new Map,this.calls=0,this.hits=0,this.misses=0,t!==void 0){let n=0;for(const r of t.map.entries()){if(++n>rt.MAX_CACHE_ENTRIES)break;this.map.set(...r)}}}get(t){const n=this.map.get(t);return n&&(this.hits++,this.report()),this.calls++,n}set(t,n){this.map.set(t,n),this.misses++,this.report()}report(){}setObject(t){if(rt.objectMap.get(t))throw new RangeError("object already cached");rt.objectMap.set(t,this),this.report()}static getCacheForObject(t){let n=rt.objectMap.get(t);return n||(n=new rt,rt.objectMap.set(t,n)),n}}function $a({isoYear:e,isoMonth:t,isoDay:n}){return`${hr(e)}-${Ut(t)}-${Ut(n)}T00:00Z`}function po(e,t){return{years:e.year-t.year,months:e.month-t.month,days:e.day-t.day}}rt.objectMap=new WeakMap,rt.MAX_CACHE_ENTRIES=1e3;class tn{constructor(){this.eras=[],this.hasEra=!1,this.erasBeginMidYear=!1}getFormatter(){return this.formatter===void 0&&(this.formatter=new Intl.DateTimeFormat(`en-US-u-ca-${this.id}`,{day:"numeric",month:"numeric",year:"numeric",era:"short",timeZone:"UTC"})),this.formatter}getCalendarParts(t){let n=this.getFormatter(),r=new Date(t);if(t==="-271821-04-19T00:00Z"){const i=n.resolvedOptions();n=new Intl.DateTimeFormat(i.locale,{...i,timeZone:"Etc/GMT+1"}),r=new Date("-271821-04-20T00:00Z")}try{return n.formatToParts(r)}catch{throw new RangeError(`Invalid ISO date: ${t}`)}}isoToCalendarDate(t,n){const{year:r,month:i,day:o}=t,s=JSON.stringify({func:"isoToCalendarDate",isoYear:r,isoMonth:i,isoDay:o,id:this.id}),a=n.get(s);if(a)return a;const c=$a({isoYear:r,isoMonth:i,isoDay:o}),l=this.getCalendarParts(c),u={};for(let d=0;d<l.length;d++){const{type:g,value:p}=l[d];if(g!=="year"&&g!=="relatedYear"||(this.hasEra?u.eraYear=+p:u.year=+p),g==="month"){const w=/^([0-9]*)(.*?)$/.exec(p);if(!w||w.length!=3||!w[1]&&!w[2])throw new RangeError(`Unexpected month: ${p}`);if(u.month=w[1]?+w[1]:1,u.month<1)throw new RangeError(`Invalid month ${p} from ${c}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10527)`);if(u.month>13)throw new RangeError(`Invalid month ${p} from ${c}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10529)`);w[2]&&(u.monthExtra=w[2])}g==="day"&&(u.day=+p),this.hasEra&&g==="era"&&p!=null&&p!==""&&(u.era=p.split(" (")[0].normalize("NFD").replace(/[^-0-9 \p{L}]/gu,"").replace(/ /g,"-").toLowerCase())}if(this.hasEra&&u.eraYear===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);if(this.hasEra){const d=this.eras.find((g=>u.era===g.genericName));d&&(u.era=d.code)}if(this.reviseIntlEra){const{era:d,eraYear:g}=this.reviseIntlEra(u,t);u.era=d,u.eraYear=g}this.checkIcuBugs&&this.checkIcuBugs(t);const h=this.adjustCalendarDate(u,n,"constrain",!0);if(h.year===void 0)throw new RangeError(`Missing year converting ${JSON.stringify(t)}`);if(h.month===void 0)throw new RangeError(`Missing month converting ${JSON.stringify(t)}`);if(h.day===void 0)throw new RangeError(`Missing day converting ${JSON.stringify(t)}`);return n.set(s,h),["constrain","reject"].forEach((d=>{const g=JSON.stringify({func:"calendarToIsoDate",year:h.year,month:h.month,day:h.day,overflow:d,id:this.id});n.set(g,t)})),h}validateCalendarDate(t){const{month:n,year:r,day:i,eraYear:o,monthCode:s,monthExtra:a}=t;if(a!==void 0)throw new RangeError("Unexpected `monthExtra` value");if(r===void 0&&o===void 0)throw new TypeError("year or eraYear is required");if(n===void 0&&s===void 0)throw new TypeError("month or monthCode is required");if(i===void 0)throw new RangeError("Missing day");if(s!==void 0){if(typeof s!="string")throw new RangeError("monthCode must be a string, not "+typeof s);if(!/^M([01]?\d)(L?)$/.test(s))throw new RangeError(`Invalid monthCode: ${s}`)}if(this.hasEra&&t.era===void 0!=(t.eraYear===void 0))throw new TypeError("properties era and eraYear must be provided together")}adjustCalendarDate(t,n=void 0,r="constrain",i=!1){if(this.calendarType==="lunisolar")throw new RangeError("Override required for lunisolar calendars");let o=t;this.validateCalendarDate(o);const s=this.monthsInYear(o,n);let{month:a,monthCode:c}=o;return{month:a,monthCode:c}=go(o,r,s),{...o,month:a,monthCode:c}}regulateMonthDayNaive(t,n,r){const i=this.monthsInYear(t,r);let{month:o,day:s}=t;return n==="reject"?(nt(o,1,i),nt(s,1,this.maximumMonthLength(t))):(o=Et(o,1,i),s=Et(s,1,this.maximumMonthLength({...t,month:o}))),{...t,month:o,day:s}}calendarToIsoDate(t,n="constrain",r){const i=t;let o=this.adjustCalendarDate(t,r,n,!1);o=this.regulateMonthDayNaive(o,n,r);const{year:s,month:a,day:c}=o,l=JSON.stringify({func:"calendarToIsoDate",year:s,month:a,day:c,overflow:n,id:this.id});let u,h=r.get(l);if(h||i.year!==void 0&&i.month!==void 0&&i.day!==void 0&&(i.year!==o.year||i.month!==o.month||i.day!==o.day)&&(u=JSON.stringify({func:"calendarToIsoDate",year:i.year,month:i.month,day:i.day,overflow:n,id:this.id}),h=r.get(u),h))return h;let d=this.estimateIsoDate({year:s,month:a,day:c});const g=_=>{let T=this.addDaysIso(d,_);if(o.day>this.minimumMonthLength(o)){let M=this.isoToCalendarDate(T,r);for(;M.month!==a||M.year!==s;){if(n==="reject")throw new RangeError(`day ${c} does not exist in month ${a} of year ${s}`);T=this.addDaysIso(T,-1),M=this.isoToCalendarDate(T,r)}}return T};let p=0,w=this.isoToCalendarDate(d,r),y=po(o,w);if(y.years!==0||y.months!==0||y.days!==0){const _=365*y.years+30*y.months+y.days;d=this.addDaysIso(d,_),w=this.isoToCalendarDate(d,r),y=po(o,w),y.years===0&&y.months===0?d=g(y.days):p=this.compareCalendarDates(o,w)}let v=8;for(;p;){d=this.addDaysIso(d,p*v);const _=w;w=this.isoToCalendarDate(d,r);const T=p;if(p=this.compareCalendarDates(o,w),p){if(y=po(o,w),y.years===0&&y.months===0)d=g(y.days),p=0;else if(T&&p!==T)if(v>1)v/=2;else{if(n==="reject")throw new RangeError(`Can't find ISO date from calendar date: ${JSON.stringify({...i})}`);this.compareCalendarDates(w,_)>0&&(d=this.addDaysIso(d,-1)),p=0}}}if(r.set(l,d),u&&r.set(u,d),o.year===void 0||o.month===void 0||o.day===void 0||o.monthCode===void 0||this.hasEra&&(o.era===void 0||o.eraYear===void 0))throw new RangeError("Unexpected missing property");return d}compareCalendarDates(t,n){return t.year!==n.year?Yt(t.year-n.year):t.month!==n.month?Yt(t.month-n.month):t.day!==n.day?Yt(t.day-n.day):0}regulateDate(t,n="constrain",r){const i=this.calendarToIsoDate(t,n,r);return this.isoToCalendarDate(i,r)}addDaysIso(t,n){return Ot(t.year,t.month,t.day+n)}addDaysCalendar(t,n,r){const i=this.calendarToIsoDate(t,"constrain",r),o=this.addDaysIso(i,n);return this.isoToCalendarDate(o,r)}addMonthsCalendar(t,n,r,i){let o=t;const{day:s}=o;for(let a=0,c=Math.abs(n);a<c;a++){const{month:l}=o,u=o,h=n<0?-Math.max(s,this.daysInPreviousMonth(o,i)):this.daysInMonth(o,i),d=this.calendarToIsoDate(o,"constrain",i);let g=this.addDaysIso(d,h);if(o=this.isoToCalendarDate(g,i),n>0){const p=this.monthsInYear(u,i);for(;o.month-1!=l%p;)g=this.addDaysIso(g,-1),o=this.isoToCalendarDate(g,i)}o.day!==s&&(o=this.regulateDate({...o,day:s},"constrain",i))}if(r==="reject"&&o.day!==s)throw new RangeError(`Day ${s} does not exist in resulting calendar month`);return o}addCalendar(t,{years:n=0,months:r=0,weeks:i=0,days:o=0},s,a){const{year:c,day:l,monthCode:u}=t,h=this.adjustCalendarDate({year:c+n,monthCode:u,day:l},a),d=this.addMonthsCalendar(h,r,s,a),g=o+7*i;return this.addDaysCalendar(d,g,a)}untilCalendar(t,n,r,i){let o=0,s=0,a=0,c=0;switch(r){case"day":o=this.calendarDaysUntil(t,n,i);break;case"week":{const l=this.calendarDaysUntil(t,n,i);o=l%7,s=(l-o)/7;break}case"month":case"year":{const l=this.compareCalendarDates(n,t);if(!l)return{years:0,months:0,weeks:0,days:0};const u=n.year-t.year,h=n.day-t.day;if(r==="year"&&u){let p=0;n.monthCode>t.monthCode&&(p=1),n.monthCode<t.monthCode&&(p=-1),p||(p=Math.sign(h)),c=p*l<0?u-l:u}let d,g=c?this.addCalendar(t,{years:c},"constrain",i):t;do a+=l,d=g,g=this.addMonthsCalendar(d,l,"constrain",i),g.day!==t.day&&(g=this.regulateDate({...g,day:t.day},"constrain",i));while(this.compareCalendarDates(n,g)*l>=0);a-=l,o=this.calendarDaysUntil(d,n,i);break}}return{years:c,months:a,weeks:s,days:o}}daysInMonth(t,n){const{day:r}=t,i=this.maximumMonthLength(t),o=this.minimumMonthLength(t);if(o===i)return o;const s=r<=i-o?i:o,a=this.calendarToIsoDate(t,"constrain",n),c=this.addDaysIso(a,s),l=this.isoToCalendarDate(c,n),u=this.addDaysIso(c,-l.day);return this.isoToCalendarDate(u,n).day}daysInPreviousMonth(t,n){const{day:r,month:i,year:o}=t;let s={year:i>1?o:o-1,month:i,day:1};const a=i>1?i-1:this.monthsInYear(s,n);s={...s,month:a};const c=this.minimumMonthLength(s),l=this.maximumMonthLength(s);if(c===l)return l;const u=this.calendarToIsoDate(t,"constrain",n),h=this.addDaysIso(u,-r);return this.isoToCalendarDate(h,n).day}startOfCalendarYear(t){return{year:t.year,month:1,monthCode:"M01",day:1}}startOfCalendarMonth(t){return{year:t.year,month:t.month,day:1}}calendarDaysUntil(t,n,r){const i=this.calendarToIsoDate(t,"constrain",r),o=this.calendarToIsoDate(n,"constrain",r);return Qe(o.year,o.month-1,o.day)-Qe(i.year,i.month-1,i.day)}monthDaySearchStartYear(t,n){return 1972}monthDayFromFields(t,n,r){let i,o,s,a,c,{era:l,eraYear:u,year:h,month:d,monthCode:g,day:p}=t;if(d!==void 0&&h===void 0&&(!this.hasEra||l===void 0||u===void 0))throw new TypeError("when month is present, year (or era and eraYear) are required");(g===void 0||h!==void 0||this.hasEra&&u!==void 0)&&({monthCode:g,day:p}=this.isoToCalendarDate(this.calendarToIsoDate(t,n,r),r));const w={year:this.monthDaySearchStartYear(g,p),month:12,day:31},y=this.isoToCalendarDate(w,r),v=y.monthCode>g||y.monthCode===g&&y.day>=p?y.year:y.year-1;for(let _=0;_<20;_++){const T=this.adjustCalendarDate({day:p,monthCode:g,year:v-_},r),M=this.calendarToIsoDate(T,"constrain",r),E=this.isoToCalendarDate(M,r);if({year:i,month:o,day:s}=M,E.monthCode===g&&E.day===p)return{month:o,day:s,year:i};if(n==="constrain"){const R=this.maxLengthOfMonthCodeInAnyYear(E.monthCode);if(E.monthCode===g&&E.day===R&&p>R)return{month:o,day:s,year:i};(a===void 0||E.monthCode===a.monthCode&&E.day>a.day)&&(a=E,c=M)}}if(n==="constrain"&&c!==void 0)return c;throw new RangeError(`No recent ${this.id} year with monthCode ${g} and day ${p}`)}getFirstDayOfWeek(){}getMinimalDaysInFirstWeek(){}}class vl extends tn{constructor(){super(...arguments),this.id="hebrew",this.calendarType="lunisolar",this.months={Tishri:{leap:1,regular:1,monthCode:"M01",days:30},Heshvan:{leap:2,regular:2,monthCode:"M02",days:{min:29,max:30}},Kislev:{leap:3,regular:3,monthCode:"M03",days:{min:29,max:30}},Tevet:{leap:4,regular:4,monthCode:"M04",days:29},Shevat:{leap:5,regular:5,monthCode:"M05",days:30},Adar:{leap:void 0,regular:6,monthCode:"M06",days:29},"Adar I":{leap:6,regular:void 0,monthCode:"M05L",days:30},"Adar II":{leap:7,regular:void 0,monthCode:"M06",days:29},Nisan:{leap:8,regular:7,monthCode:"M07",days:30},Iyar:{leap:9,regular:8,monthCode:"M08",days:29},Sivan:{leap:10,regular:9,monthCode:"M09",days:30},Tamuz:{leap:11,regular:10,monthCode:"M10",days:29},Av:{leap:12,regular:11,monthCode:"M11",days:30},Elul:{leap:13,regular:12,monthCode:"M12",days:29}}}inLeapYear(t){const{year:n}=t;return(7*n+1)%19<7}monthsInYear(t){return this.inLeapYear(t)?13:12}minimumMonthLength(t){return this.minMaxMonthLength(t,"min")}maximumMonthLength(t){return this.minMaxMonthLength(t,"max")}minMaxMonthLength(t,n){const{month:r,year:i}=t,o=this.getMonthCode(i,r),s=Object.entries(this.months).find((c=>c[1].monthCode===o));if(s===void 0)throw new RangeError(`unmatched Hebrew month: ${r}`);const a=s[1].days;return typeof a=="number"?a:a[n]}maxLengthOfMonthCodeInAnyYear(t){return["M04","M06","M08","M10","M12"].includes(t)?29:30}estimateIsoDate(t){const{year:n}=t;return{year:n-3760,month:1,day:1}}getMonthCode(t,n){return this.inLeapYear({year:t})?n===6?he(5,!0):he(n<6?n:n-1):he(n)}adjustCalendarDate(t,n,r="constrain",i=!1){let{year:o,month:s,monthCode:a,day:c,monthExtra:l}=t;if(o===void 0)throw new TypeError("Missing property: year");if(i){if(l){const u=this.months[l];if(!u)throw new RangeError(`Unrecognized month from formatToParts: ${l}`);s=this.inLeapYear({year:o})?u.leap:u.regular}return a=this.getMonthCode(o,s),{year:o,month:s,day:c,monthCode:a}}if(this.validateCalendarDate(t),s===void 0)if(a.endsWith("L")){if(a!=="M05L")throw new RangeError(`Hebrew leap month must have monthCode M05L, not ${a}`);if(s=6,!this.inLeapYear({year:o})){if(r==="reject")throw new RangeError(`Hebrew monthCode M05L is invalid in year ${o} which is not a leap year`);s=6,a="M06"}}else{s=Je(a),this.inLeapYear({year:o})&&s>=6&&s++;const u=this.monthsInYear({year:o});if(s<1||s>u)throw new RangeError(`Invalid monthCode: ${a}`)}else if(r==="reject"?(nt(s,1,this.monthsInYear({year:o})),nt(c,1,this.maximumMonthLength({year:o,month:s}))):(s=Et(s,1,this.monthsInYear({year:o})),c=Et(c,1,this.maximumMonthLength({year:o,month:s}))),a===void 0)a=this.getMonthCode(o,s);else if(this.getMonthCode(o,s)!==a)throw new RangeError(`monthCode ${a} doesn't correspond to month ${s} in Hebrew year ${o}`);return{...t,day:c,month:s,monthCode:a,year:o}}}class En extends tn{constructor(){super(...arguments),this.calendarType="lunar",this.DAYS_PER_ISLAMIC_YEAR=354+11/30,this.DAYS_PER_ISO_YEAR=365.2425}inLeapYear(t,n){const r={year:t.year,month:1,monthCode:"M01",day:1},i={year:t.year+1,month:1,monthCode:"M01",day:1};return this.calendarDaysUntil(r,i,n)===355}monthsInYear(){return 12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}maxLengthOfMonthCodeInAnyYear(){return 30}estimateIsoDate(t){const{year:n}=this.adjustCalendarDate(t);return{year:Math.floor(n*this.DAYS_PER_ISLAMIC_YEAR/this.DAYS_PER_ISO_YEAR)+622,month:1,day:1}}}class bl extends En{constructor(){super(...arguments),this.id="islamic"}}class _l extends En{constructor(){super(...arguments),this.id="islamic-umalqura"}}class Tl extends En{constructor(){super(...arguments),this.id="islamic-tbla"}}class Ml extends En{constructor(){super(...arguments),this.id="islamic-civil"}}class El extends En{constructor(){super(...arguments),this.id="islamic-rgsa"}}class xl extends En{constructor(){super(...arguments),this.id="islamicc"}}class Dl extends tn{constructor(){super(...arguments),this.id="persian",this.calendarType="solar"}inLeapYear(t,n){return this.daysInMonth({year:t.year,month:12,day:1},n)===30}monthsInYear(){return 12}minimumMonthLength(t){const{month:n}=t;return n===12?29:n<=6?31:30}maximumMonthLength(t){const{month:n}=t;return n===12?30:n<=6?31:30}maxLengthOfMonthCodeInAnyYear(t){return Je(t)<=6?31:30}estimateIsoDate(t){const{year:n}=this.adjustCalendarDate(t);return{year:n+621,month:1,day:1}}}class Cl extends tn{constructor(){super(...arguments),this.id="indian",this.calendarType="solar",this.months={1:{length:30,month:3,day:22,leap:{length:31,month:3,day:21}},2:{length:31,month:4,day:21},3:{length:31,month:5,day:22},4:{length:31,month:6,day:22},5:{length:31,month:7,day:23},6:{length:31,month:8,day:23},7:{length:30,month:9,day:23},8:{length:30,month:10,day:23},9:{length:30,month:11,day:22},10:{length:30,month:12,day:22},11:{length:30,month:1,nextYear:!0,day:21},12:{length:30,month:2,nextYear:!0,day:20}},this.vulnerableToBceBug=new Date("0000-01-01T00:00Z").toLocaleDateString("en-US-u-ca-indian",{timeZone:"UTC"})!=="10/11/-79 Saka"}inLeapYear(t){return yo(t.year+78)}monthsInYear(){return 12}minimumMonthLength(t){return this.getMonthInfo(t).length}maximumMonthLength(t){return this.getMonthInfo(t).length}maxLengthOfMonthCodeInAnyYear(t){const n=Je(t);let r=this.months[n];return r=r.leap??r,r.length}getMonthInfo(t){const{month:n}=t;let r=this.months[n];if(r===void 0)throw new RangeError(`Invalid month: ${n}`);return this.inLeapYear(t)&&r.leap&&(r=r.leap),r}estimateIsoDate(t){const n=this.adjustCalendarDate(t),r=this.getMonthInfo(n);return Ot(n.year+78+(r.nextYear?1:0),r.month,r.day+n.day-1)}checkIcuBugs(t){if(this.vulnerableToBceBug&&t.year<1)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 0001-01-01 (see https://bugs.chromium.org/p/v8/issues/detail?id=10529)`)}}function yo(e){return e%4==0&&(e%100!=0||e%400==0)}class ka extends tn{constructor(t,n){super(),this.calendarType="solar",this.id=t,this.isoEpoch=n}inLeapYear(t){const{year:n}=this.estimateIsoDate({month:1,day:1,year:t.year});return yo(n)}monthsInYear(){return 12}minimumMonthLength(t){const{month:n}=t;return n===2?this.inLeapYear(t)?29:28:[4,6,9,11].indexOf(n)>=0?30:31}maximumMonthLength(t){return this.minimumMonthLength(t)}maxLengthOfMonthCodeInAnyYear(t){return[31,29,31,30,31,30,31,31,30,31,30,31][Je(t)-1]}estimateIsoDate(t){const n=this.adjustCalendarDate(t);return Gn(n.year+this.isoEpoch.year,n.month+this.isoEpoch.month,n.day+this.isoEpoch.day,"constrain")}}class La extends tn{constructor(t,n){super(),this.hasEra=!0,this.calendarType="solar",this.id=t;const{eras:r,anchorEra:i}=(function(o){let s,a=o;if(a.length===0)throw new RangeError("Invalid era data: eras are required");if(a.length===1&&a[0].reverseOf)throw new RangeError("Invalid era data: anchor era cannot count years backwards");if(a.length===1&&!a[0].code)throw new RangeError("Invalid era data: at least one named era is required");if(a.filter((l=>l.reverseOf!=null)).length>1)throw new RangeError("Invalid era data: only one era can count years backwards");a.forEach((l=>{if(l.isAnchor||!l.anchorEpoch&&!l.reverseOf){if(s)throw new RangeError("Invalid era data: cannot have multiple anchor eras");s=l,l.anchorEpoch={year:l.hasYearZero?0:1}}else if(!l.code)throw new RangeError("If era name is blank, it must be the anchor era")})),a=a.filter((l=>l.code)),a.forEach((l=>{const{reverseOf:u}=l;if(u){const h=a.find((d=>d.code===u));if(h===void 0)throw new RangeError(`Invalid era data: unmatched reverseOf era: ${u}`);l.reverseOf=h,l.anchorEpoch=h.anchorEpoch,l.isoEpoch=h.isoEpoch}l.anchorEpoch.month===void 0&&(l.anchorEpoch.month=1),l.anchorEpoch.day===void 0&&(l.anchorEpoch.day=1)})),a.sort(((l,u)=>{if(l.reverseOf)return 1;if(u.reverseOf)return-1;if(!l.isoEpoch||!u.isoEpoch)throw new RangeError("Invalid era data: missing ISO epoch");return u.isoEpoch.year-l.isoEpoch.year}));const c=a[a.length-1].reverseOf;if(c&&c!==a[a.length-2])throw new RangeError("Invalid era data: invalid reverse-sign era");return a.forEach(((l,u)=>{l.genericName="era"+(a.length-1-u)})),{eras:a,anchorEra:s||a[0]}})(n);this.anchorEra=i,this.eras=r}inLeapYear(t){const{year:n}=this.estimateIsoDate({month:1,day:1,year:t.year});return yo(n)}monthsInYear(){return 12}minimumMonthLength(t){const{month:n}=t;return n===2?this.inLeapYear(t)?29:28:[4,6,9,11].indexOf(n)>=0?30:31}maximumMonthLength(t){return this.minimumMonthLength(t)}maxLengthOfMonthCodeInAnyYear(t){return[31,29,31,30,31,30,31,31,30,31,30,31][Je(t)-1]}completeEraYear(t){const n=(a,c,l)=>{const u=t[a];if(u!=null&&u!=c&&!(l||[]).includes(u)){const h=l?.[0];throw new RangeError(`Input ${a} ${u} doesn't match calculated value ${h?`${c} (also called ${h})`:c}`)}},r=a=>{let c;const l={...t,year:a},u=this.eras.find(((h,d)=>{if(d===this.eras.length-1){if(h.reverseOf){if(a>0)throw new RangeError(`Signed year ${a} is invalid for era ${h.code}`);return c=h.anchorEpoch.year-a,!0}return c=a-h.anchorEpoch.year+(h.hasYearZero?0:1),!0}return this.compareCalendarDates(l,h.anchorEpoch)>=0&&(c=a-h.anchorEpoch.year+(h.hasYearZero?0:1),!0)}));if(!u)throw new RangeError(`Year ${a} was not matched by any era`);return{eraYear:c,era:u.code,eraNames:u.names}};let{year:i,eraYear:o,era:s}=t;if(i!=null){const a=r(i);({eraYear:o,era:s}=a),n("era",s,a?.eraNames),n("eraYear",o)}else{if(o==null)throw new RangeError("Either year or eraYear and era are required");{if(s===void 0)throw new RangeError("era and eraYear must be provided together");const a=this.eras.find((({code:c,names:l=[]})=>c===s||l.includes(s)));if(!a)throw new RangeError(`Era ${s} (ISO year ${o}) was not matched by any era`);i=a.reverseOf?a.anchorEpoch.year-o:o+a.anchorEpoch.year-(a.hasYearZero?0:1),n("year",i),{eraYear:o,era:s}=r(i)}}return{...t,year:i,eraYear:o,era:s}}adjustCalendarDate(t,n,r="constrain"){let i=t;const{month:o,monthCode:s}=i;return o===void 0&&(i={...i,month:Je(s)}),this.validateCalendarDate(i),i=this.completeEraYear(i),super.adjustCalendarDate(i,n,r)}estimateIsoDate(t){const n=this.adjustCalendarDate(t),{year:r,month:i,day:o}=n,{anchorEra:s}=this;return Gn(r+s.isoEpoch.year-(s.hasYearZero?0:1),i,o,"constrain")}}class wo extends La{constructor(t,n){super(t,n)}isoToCalendarDate(t){const{year:n,month:r,day:i}=t,o=he(r),s=n-this.anchorEra.isoEpoch.year+1;return this.completeEraYear({year:s,month:r,monthCode:o,day:i})}}const de={inLeapYear(e){const{year:t}=e;return(t+1)%4==0},monthsInYear:()=>13,minimumMonthLength(e){const{month:t}=e;return t===13?this.inLeapYear(e)?6:5:30},maximumMonthLength(e){return this.minimumMonthLength(e)},maxLengthOfMonthCodeInAnyYear:e=>e==="M13"?6:30};class $l extends ka{constructor(t,n){super(t,n),this.inLeapYear=de.inLeapYear,this.monthsInYear=de.monthsInYear,this.minimumMonthLength=de.minimumMonthLength,this.maximumMonthLength=de.maximumMonthLength,this.maxLengthOfMonthCodeInAnyYear=de.maxLengthOfMonthCodeInAnyYear}}class Ra extends La{constructor(t,n){super(t,n),this.inLeapYear=de.inLeapYear,this.monthsInYear=de.monthsInYear,this.minimumMonthLength=de.minimumMonthLength,this.maximumMonthLength=de.maximumMonthLength,this.maxLengthOfMonthCodeInAnyYear=de.maxLengthOfMonthCodeInAnyYear}}class kl extends $l{constructor(){super("ethioaa",{year:-5492,month:7,day:17})}}class Ll extends Ra{constructor(){super("coptic",[{code:"coptic",isoEpoch:{year:284,month:8,day:29}},{code:"coptic-inverse",reverseOf:"coptic"}])}}class Rl extends Ra{constructor(){super("ethiopic",[{code:"ethioaa",names:["ethiopic-amete-alem","mundi"],isoEpoch:{year:-5492,month:7,day:17}},{code:"ethiopic",names:["incar"],isoEpoch:{year:8,month:8,day:27},anchorEpoch:{year:5501}}])}}class Nl extends wo{constructor(){super("roc",[{code:"roc",names:["minguo"],isoEpoch:{year:1912,month:1,day:1}},{code:"roc-inverse",names:["before-roc"],reverseOf:"roc"}])}}class Ol extends ka{constructor(){super("buddhist",{year:-543,month:1,day:1})}}class Al extends wo{constructor(){super("gregory",[{code:"gregory",names:["ad","ce"],isoEpoch:{year:1,month:1,day:1}},{code:"gregory-inverse",names:["be","bce"],reverseOf:"gregory"}])}reviseIntlEra(t){let{era:n,eraYear:r}=t;return n==="b"&&(n="gregory-inverse"),n==="a"&&(n="gregory"),{era:n,eraYear:r}}getFirstDayOfWeek(){return 1}getMinimalDaysInFirstWeek(){return 1}}class Yl extends wo{constructor(){super("japanese",[{code:"reiwa",isoEpoch:{year:2019,month:5,day:1},anchorEpoch:{year:2019,month:5,day:1}},{code:"heisei",isoEpoch:{year:1989,month:1,day:8},anchorEpoch:{year:1989,month:1,day:8}},{code:"showa",isoEpoch:{year:1926,month:12,day:25},anchorEpoch:{year:1926,month:12,day:25}},{code:"taisho",isoEpoch:{year:1912,month:7,day:30},anchorEpoch:{year:1912,month:7,day:30}},{code:"meiji",isoEpoch:{year:1868,month:9,day:8},anchorEpoch:{year:1868,month:9,day:8}},{code:"japanese",names:["japanese","gregory","ad","ce"],isoEpoch:{year:1,month:1,day:1}},{code:"japanese-inverse",names:["japanese-inverse","gregory-inverse","bc","bce"],reverseOf:"japanese"}]),this.erasBeginMidYear=!0}reviseIntlEra(t,n){const{era:r,eraYear:i}=t,{year:o}=n;return this.eras.find((s=>s.code===r))?{era:r,eraYear:i}:o<1?{era:"japanese-inverse",eraYear:1-o}:{era:"japanese",eraYear:o}}}class Na extends tn{constructor(){super(...arguments),this.calendarType="lunisolar"}inLeapYear(t,n){const r=this.getMonthList(t.year,n);return Object.entries(r).length===13}monthsInYear(t,n){return this.inLeapYear(t,n)?13:12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}maxLengthOfMonthCodeInAnyYear(t){return["M01L","M09L","M10L","M11L","M12L"].includes(t)?29:30}monthDaySearchStartYear(t,n){const r={M01L:[1651,1651],M02L:[1947,1765],M03L:[1966,1955],M04L:[1963,1944],M05L:[1971,1952],M06L:[1960,1941],M07L:[1968,1938],M08L:[1957,1718],M09L:[1832,1832],M10L:[1870,1870],M11L:[1814,1814],M12L:[1890,1890]}[t]??[1972,1972];return n<30?r[0]:r[1]}getMonthList(t,n){if(t===void 0)throw new TypeError("Missing year");const r=JSON.stringify({func:"getMonthList",calendarYear:t,id:this.id}),i=n.get(r);if(i)return i;const o=this.getFormatter(),s=(y,v)=>{const _=$a({isoYear:y,isoMonth:2,isoDay:1}),T=new Date(_);T.setUTCDate(v+1);const M=o.formatToParts(T),E=M.find((Y=>Y.type==="month")).value,R=+M.find((Y=>Y.type==="day")).value,F=M.find((Y=>Y.type==="relatedYear"));let U;if(F===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);return U=+F.value,{calendarMonthString:E,calendarDay:R,calendarYearToVerify:U}};let a=17,{calendarMonthString:c,calendarDay:l,calendarYearToVerify:u}=s(t,a);c!=="1"&&(a+=29,{calendarMonthString:c,calendarDay:l}=s(t,a)),a-=l-5;const h={};let d,g,p=1,w=!1;do({calendarMonthString:c,calendarDay:l,calendarYearToVerify:u}=s(t,a)),d&&(h[g].daysInMonth=d+30-l),u!==t?w=!0:(h[c]={monthIndex:p++},a+=30),d=l,g=c;while(!w);return h[g].daysInMonth=d+30-l,n.set(r,h),h}estimateIsoDate(t){const{year:n,month:r}=t;return{year:n,month:r>=12?12:r+1,day:1}}adjustCalendarDate(t,n,r="constrain",i=!1){let{year:o,month:s,monthExtra:a,day:c,monthCode:l}=t;if(o===void 0)throw new TypeError("Missing property: year");if(i){if(a&&a!=="bis")throw new RangeError(`Unexpected leap month suffix: ${a}`);const u=he(s,a!==void 0),h=`${s}${a||""}`,d=this.getMonthList(o,n)[h];if(d===void 0)throw new RangeError(`Unmatched month ${h} in Chinese year ${o}`);return s=d.monthIndex,{year:o,month:s,day:c,monthCode:u}}if(this.validateCalendarDate(t),s===void 0){const u=this.getMonthList(o,n);let h=l.replace(/^M|L$/g,(g=>g==="L"?"bis":""));h[0]==="0"&&(h=h.slice(1));let d=u[h];if(s=d&&d.monthIndex,s===void 0&&l.endsWith("L")&&l!="M13L"&&r==="constrain"){const g=+l.replace(/^M0?|L$/g,"");d=u[g],d&&(s=d.monthIndex,l=he(g))}if(s===void 0)throw new RangeError(`Unmatched month ${l} in Chinese year ${o}`)}else if(l===void 0){const u=this.getMonthList(o,n),h=Object.entries(u),d=h.length;r==="reject"?(nt(s,1,d),nt(c,1,this.maximumMonthLength())):(s=Et(s,1,d),c=Et(c,1,this.maximumMonthLength()));const g=h.find((p=>p[1].monthIndex===s));if(g===void 0)throw new RangeError(`Invalid month ${s} in Chinese year ${o}`);l=he(+g[0].replace("bis",""),g[0].indexOf("bis")!==-1)}else{const u=this.getMonthList(o,n);let h=l.replace(/^M|L$/g,(g=>g==="L"?"bis":""));h[0]==="0"&&(h=h.slice(1));const d=u[h];if(!d)throw new RangeError(`Unmatched monthCode ${l} in Chinese year ${o}`);if(s!==d.monthIndex)throw new RangeError(`monthCode ${l} doesn't correspond to month ${s} in Chinese year ${o}`)}return{...t,year:o,month:s,monthCode:l,day:c}}}class Il extends Na{constructor(){super(...arguments),this.id="chinese"}}class Pl extends Na{constructor(){super(...arguments),this.id="dangi"}}class Sl{constructor(t){this.helper=t}extraFields(t){return this.helper.hasEra&&t.includes("year")?["era","eraYear"]:[]}resolveFields(t){if(this.helper.calendarType!=="lunisolar"){const n=new rt;go(t,void 0,this.helper.monthsInYear({year:t.year??1972},n))}}dateToISO(t,n){const r=new rt,i=this.helper.calendarToIsoDate(t,n,r);return r.setObject(i),i}monthDayToISOReferenceDate(t,n){const r=new rt,i=this.helper.monthDayFromFields(t,n,r);return r.setObject(i),i}fieldKeysToIgnore(t){const n=new Set;for(let r=0;r<t.length;r++){const i=t[r];switch(n.add(i),i){case"era":n.add("eraYear"),n.add("year");break;case"eraYear":n.add("era"),n.add("year");break;case"year":n.add("era"),n.add("eraYear");break;case"month":n.add("monthCode"),this.helper.erasBeginMidYear&&(n.add("era"),n.add("eraYear"));break;case"monthCode":n.add("month"),this.helper.erasBeginMidYear&&(n.add("era"),n.add("eraYear"));break;case"day":this.helper.erasBeginMidYear&&(n.add("era"),n.add("eraYear"))}}return xa(n)}dateAdd(t,{years:n,months:r,weeks:i,days:o},s){const a=rt.getCacheForObject(t),c=this.helper.isoToCalendarDate(t,a),l=this.helper.addCalendar(c,{years:n,months:r,weeks:i,days:o},s,a),u=this.helper.calendarToIsoDate(l,"constrain",a);return rt.getCacheForObject(u)||new rt(a).setObject(u),u}dateUntil(t,n,r){const i=rt.getCacheForObject(t),o=rt.getCacheForObject(n),s=this.helper.isoToCalendarDate(t,i),a=this.helper.isoToCalendarDate(n,o);return this.helper.untilCalendar(s,a,r,i)}isoToDate(t,n){const r=rt.getCacheForObject(t),i=this.helper.isoToCalendarDate(t,r);if(n.dayOfWeek&&(i.dayOfWeek=vr.iso8601.isoToDate(t,{dayOfWeek:!0}).dayOfWeek),n.dayOfYear){const o=this.helper.startOfCalendarYear(i),s=this.helper.calendarDaysUntil(o,i,r);i.dayOfYear=s+1}if(n.weekOfYear&&(i.weekOfYear=Da(this.helper.id,t)),i.daysInWeek=7,n.daysInMonth&&(i.daysInMonth=this.helper.daysInMonth(i,r)),n.daysInYear){const o=this.helper.startOfCalendarYear(i),s=this.helper.addCalendar(o,{years:1},"constrain",r);i.daysInYear=this.helper.calendarDaysUntil(o,s,r)}return n.monthsInYear&&(i.monthsInYear=this.helper.monthsInYear(i,r)),n.inLeapYear&&(i.inLeapYear=this.helper.inLeapYear(i,r)),i}getFirstDayOfWeek(){return this.helper.getFirstDayOfWeek()}getMinimalDaysInFirstWeek(){return this.helper.getMinimalDaysInFirstWeek()}}for(const e of[vl,Dl,Rl,kl,Ll,Il,Pl,Nl,Cl,Ol,Al,Yl,bl,_l,Tl,Ml,El,xl]){const t=new e;vr[t.id]=new Sl(t)}Ui("calendarImpl",(function(e){return vr[e]}));const br=Intl.DateTimeFormat;function xn(e,t){let n=m(e,t);return typeof n=="function"&&(n=new br(m(e,ds),n(m(e,Pi))),(function(r,i,o){const s=zr(r);if(s===void 0)throw new TypeError("Missing slots for the given container");if(s[i]===void 0)throw new TypeError(`tried to reset ${i} which was not set`);s[i]=o})(e,t,n)),n}function _r(e){return bt(e,Fe)}class Tr{constructor(t=void 0,n=void 0){(function(r,i,o){const s=o!==void 0;let a;if(s){const h=["localeMatcher","calendar","numberingSystem","hour12","hourCycle","timeZone","weekday","era","year","month","day","dayPeriod","hour","minute","second","fractionalSecondDigits","timeZoneName","formatMatcher","dateStyle","timeStyle"];a=(function(g){if(g==null)throw new TypeError(`Expected object not ${g}`);return Object(g)})(o);const d=Object.create(null);for(let g=0;g<h.length;g++){const p=h[g];Object.prototype.hasOwnProperty.call(a,p)&&(d[p]=a[p])}a=d}else a=Object.create(null);const c=new br(i,a),l=c.resolvedOptions();if(we(r),s){const h=Object.assign(Object.create(null),l);for(const d in h)Object.prototype.hasOwnProperty.call(a,d)||delete h[d];h.hour12=a.hour12,h.hourCycle=a.hourCycle,N(r,Pi,h)}else N(r,Pi,a);N(r,ds,l.locale),N(r,Fe,c),N(r,an,l.timeZone),N(r,Un,l.calendar),N(r,ss,Wl),N(r,as,ql),N(r,cs,Xl),N(r,ls,Zl),N(r,us,Gl),N(r,hs,Vl);const u=s?a.timeZone:void 0;if(u===void 0)N(r,Ii,l.timeZone);else{const h=qr(u);if(h.startsWith(""))throw new RangeError("Unicode minus (U+2212) is not supported in time zone offsets");N(r,Ii,Mt(h))}})(this,t,n)}get format(){b(this,_r);const t=Hl.bind(this);return Object.defineProperties(t,{length:{value:1,enumerable:!1,writable:!1,configurable:!0},name:{value:"",enumerable:!1,writable:!1,configurable:!0}}),t}formatRange(t,n){return b(this,_r),jl.call(this,t,n)}formatToParts(t,...n){return b(this,_r),Ul.call(this,t,...n)}formatRangeToParts(t,n){return b(this,_r),Fl.call(this,t,n)}resolvedOptions(){return b(this,_r),zl.call(this)}}"formatToParts"in br.prototype||delete Tr.prototype.formatToParts,"formatRangeToParts"in br.prototype||delete Tr.prototype.formatRangeToParts;const Vt=function(e=void 0,t=void 0){return new Tr(e,t)};function zl(){const e=m(this,Fe).resolvedOptions();return e.timeZone=m(this,Ii),e}function Hl(e,...t){let n,r,i=Dn(e,this);return i.formatter?(n=i.formatter,r=[Gt(i.epochNs,"floor")]):(n=m(this,Fe),r=[e,...t]),n.format(...r)}function Ul(e,...t){let n,r,i=Dn(e,this);return i.formatter?(n=i.formatter,r=[Gt(i.epochNs,"floor")]):(n=m(this,Fe),r=[e,...t]),n.formatToParts(...r)}function jl(e,t){if(e===void 0||t===void 0)throw new TypeError("Intl.DateTimeFormat.formatRange requires two values");const n=hi(e),r=hi(t);let i,o=[n,r];if($e(n)!==$e(r))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");if($e(n)){if(!Oa(n,r))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");const{epochNs:s,formatter:a}=Dn(n,this),{epochNs:c,formatter:l}=Dn(r,this);a&&(i=a,o=[Gt(s,"floor"),Gt(c,"floor")])}return i||(i=m(this,Fe)),i.formatRange(...o)}function Fl(e,t){if(e===void 0||t===void 0)throw new TypeError("Intl.DateTimeFormat.formatRange requires two values");const n=hi(e),r=hi(t);let i,o=[n,r];if($e(n)!==$e(r))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");if($e(n)){if(!Oa(n,r))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");const{epochNs:s,formatter:a}=Dn(n,this),{epochNs:c,formatter:l}=Dn(r,this);a&&(i=a,o=[Gt(s,"floor"),Gt(c,"floor")])}return i||(i=m(this,Fe)),i.formatRangeToParts(...o)}function Mr(e={},t={}){const n=Object.assign({},e),r=["year","month","day","hour","minute","second","weekday","dayPeriod","timeZoneName","dateStyle","timeStyle"];for(let i=0;i<r.length;i++){const o=r[i];n[o]=o in t?t[o]:n[o],n[o]!==!1&&n[o]!==void 0||delete n[o]}return n}function Zl(e){const t=Mr(e,{year:!1,month:!1,day:!1,weekday:!1,timeZoneName:!1,dateStyle:!1});if(t.timeStyle!=="long"&&t.timeStyle!=="full"||(delete t.timeStyle,Object.assign(t,{hour:"numeric",minute:"2-digit",second:"2-digit"})),!ui(t)){if(Er(e))throw new TypeError(`cannot format Temporal.PlainTime with options [${Object.keys(e)}]`);Object.assign(t,{hour:"numeric",minute:"numeric",second:"numeric"})}return t}function ql(e){const t={short:{year:"2-digit",month:"numeric"},medium:{year:"numeric",month:"short"},long:{year:"numeric",month:"long"},full:{year:"numeric",month:"long"}},n=Mr(e,{day:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});if("dateStyle"in n&&n.dateStyle){const r=n.dateStyle;delete n.dateStyle,Object.assign(n,t[r])}if(!("year"in n||"month"in n||"era"in n)){if(Er(e))throw new TypeError(`cannot format PlainYearMonth with options [${Object.keys(e)}]`);Object.assign(n,{year:"numeric",month:"numeric"})}return n}function Xl(e){const t={short:{month:"numeric",day:"numeric"},medium:{month:"short",day:"numeric"},long:{month:"long",day:"numeric"},full:{month:"long",day:"numeric"}},n=Mr(e,{year:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});if("dateStyle"in n&&n.dateStyle){const r=n.dateStyle;delete n.dateStyle,Object.assign(n,t[r])}if(!("month"in n)&&!("day"in n)){if(Er(e))throw new TypeError(`cannot format PlainMonthDay with options [${Object.keys(e)}]`);Object.assign(n,{month:"numeric",day:"numeric"})}return n}function Wl(e){const t=Mr(e,{hour:!1,minute:!1,second:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});if(!li(t)){if(Er(e))throw new TypeError(`cannot format PlainDate with options [${Object.keys(e)}]`);Object.assign(t,{year:"numeric",month:"numeric",day:"numeric"})}return t}function Gl(e){const t=Mr(e,{timeZoneName:!1});if((t.timeStyle==="long"||t.timeStyle==="full")&&(delete t.timeStyle,Object.assign(t,{hour:"numeric",minute:"2-digit",second:"2-digit"}),t.dateStyle)&&(Object.assign(t,{short:{year:"numeric",month:"numeric",day:"numeric"},medium:{year:"numeric",month:"short",day:"numeric"},long:{year:"numeric",month:"long",day:"numeric"},full:{year:"numeric",month:"long",day:"numeric",weekday:"long"}}[t.dateStyle]),delete t.dateStyle),!ui(t)&&!li(t)){if(Er(e))throw new TypeError(`cannot format PlainDateTime with options [${Object.keys(e)}]`);Object.assign(t,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}return t}function Vl(e){let t=e;return ui(t)||li(t)||(t=Object.assign({},t,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),t}function li(e){return"year"in e||"month"in e||"day"in e||"weekday"in e||"dateStyle"in e||"era"in e}function ui(e){return"hour"in e||"minute"in e||"second"in e||"timeStyle"in e||"dayPeriod"in e||"fractionalSecondDigits"in e}function Er(e){return li(e)||ui(e)||"dateStyle"in e||"timeStyle"in e||"timeZoneName"in e}function $e(e){return K(e)||Q(e)||q(e)||A(e)||st(e)||St(e)||ot(e)}function hi(e){return $e(e)?e:Zr(e)}function Oa(e,t){return!(!$e(e)||!$e(t)||Q(e)&&!Q(t)||K(e)&&!K(t)||q(e)&&!q(t)||A(e)&&!A(t)||st(e)&&!st(t)||St(e)&&!St(t)||ot(e)&&!ot(t))}function Dn(e,t){if(Q(e)){const n={isoDate:{year:1970,month:1,day:1},time:m(e,W)};return{epochNs:ht(m(t,an),n,"compatible"),formatter:xn(t,ls)}}if(st(e)){const n=m(e,x),r=m(t,Un);if(n!==r)throw new RangeError(`cannot format PlainYearMonth with calendar ${n} in locale with calendar ${r}`);const i=z(m(e,k),{deltaDays:0,hour:12,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});return{epochNs:ht(m(t,an),i,"compatible"),formatter:xn(t,as)}}if(St(e)){const n=m(e,x),r=m(t,Un);if(n!==r)throw new RangeError(`cannot format PlainMonthDay with calendar ${n} in locale with calendar ${r}`);const i=z(m(e,k),{deltaDays:0,hour:12,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});return{epochNs:ht(m(t,an),i,"compatible"),formatter:xn(t,cs)}}if(K(e)){const n=m(e,x),r=m(t,Un);if(n!=="iso8601"&&n!==r)throw new RangeError(`cannot format PlainDate with calendar ${n} in locale with calendar ${r}`);const i=z(m(e,k),{deltaDays:0,hour:12,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});return{epochNs:ht(m(t,an),i,"compatible"),formatter:xn(t,ss)}}if(q(e)){const n=m(e,x),r=m(t,Un);if(n!=="iso8601"&&n!==r)throw new RangeError(`cannot format PlainDateTime with calendar ${n} in locale with calendar ${r}`);const i=m(e,X);return{epochNs:ht(m(t,an),i,"compatible"),formatter:xn(t,us)}}if(A(e))throw new TypeError("Temporal.ZonedDateTime not supported in DateTimeFormat methods. Use toLocaleString() instead.");return ot(e)?{epochNs:m(e,$),formatter:xn(t,hs)}:{}}function Aa(e){const t=Object.create(null);return t.years=m(e,dt),t.months=m(e,ft),t.weeks=m(e,Lt),t.days=m(e,mt),t.hours=m(e,gt),t.minutes=m(e,pt),t.seconds=m(e,yt),t.milliseconds=m(e,wt),t.microseconds=m(e,vt),t.nanoseconds=m(e,Rt),t}Tr.prototype.constructor=Vt,Object.defineProperty(Vt,"prototype",{value:Tr.prototype,writable:!1,enumerable:!1,configurable:!1}),Vt.supportedLocalesOf=br.supportedLocalesOf,ve(Vt,"Intl.DateTimeFormat");const{format:Kl,formatToParts:Ql}=Intl.DurationFormat?.prototype??Object.create(null);function Ya(e){Intl.DurationFormat.prototype.resolvedOptions.call(this);const t=Aa(Zt(e));return Kl.call(this,t)}Intl.DurationFormat?.prototype&&(Intl.DurationFormat.prototype.format=Ya,Intl.DurationFormat.prototype.formatToParts=function(e){Intl.DurationFormat.prototype.resolvedOptions.call(this);const t=Aa(Zt(e));return Ql.call(this,t)});class vo{constructor(t){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");Ss(this,ci(t))}get epochMilliseconds(){return b(this,ot),Gt(m(this,$),"floor")}get epochNanoseconds(){return b(this,ot),Ma(f.BigInt(m(this,$)))}add(t){return b(this,ot),ya("add",this,t)}subtract(t){return b(this,ot),ya("subtract",this,t)}until(t,n=void 0){return b(this,ot),ua("until",this,t,n)}since(t,n=void 0){return b(this,ot),ua("since",this,t,n)}round(t){if(b(this,ot),t===void 0)throw new TypeError("options parameter is required");const n=typeof t=="string"?Be("smallestUnit",t):C(t),r=mn(n),i=Qt(n,"halfExpand"),o=Nt(n,"smallestUnit","time",be);return gn(r,{hour:24,minute:1440,second:86400,millisecond:864e5,microsecond:864e8,nanosecond:864e11}[o],!0),oe(lo(m(this,$),r,o,i))}equals(t){b(this,ot);const n=rr(t),r=m(this,$),i=m(n,$);return f.equal(f.BigInt(r),f.BigInt(i))}toString(t=void 0){b(this,ot);const n=C(t),r=Qn(n),i=Qt(n,"trunc"),o=Nt(n,"smallestUnit","time",void 0);if(o==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');let s=n.timeZone;s!==void 0&&(s=Mt(s));const{precision:a,unit:c,increment:l}=Bn(o,r);return Zs(oe(lo(m(this,$),l,c,i)),s,a)}toJSON(){return b(this,ot),Zs(this,void 0,"auto")}toLocaleString(t=void 0,n=void 0){return b(this,ot),new Vt(t,n).format(this)}valueOf(){Ue("Instant")}toZonedDateTimeISO(t){b(this,ot);const n=Mt(t);return ut(m(this,$),n,"iso8601")}static fromEpochMilliseconds(t){return oe(ue(Zr(t)))}static fromEpochNanoseconds(t){return oe(ci(t))}static from(t){return rr(t)}static compare(t,n){const r=rr(t),i=rr(n),o=m(r,$),s=m(i,$);return f.lessThan(o,s)?-1:f.greaterThan(o,s)?1:0}}ve(vo,"Temporal.Instant");class bo{constructor(t,n,r,i="iso8601"){const o=L(t),s=L(n),a=L(r),c=xt(i===void 0?"iso8601":tt(i));Ge(o,s,a),Os(this,{year:o,month:s,day:a},c)}get calendarId(){return b(this,K),m(this,x)}get era(){return Dt(this,"era")}get eraYear(){return Dt(this,"eraYear")}get year(){return Dt(this,"year")}get month(){return Dt(this,"month")}get monthCode(){return Dt(this,"monthCode")}get day(){return Dt(this,"day")}get dayOfWeek(){return Dt(this,"dayOfWeek")}get dayOfYear(){return Dt(this,"dayOfYear")}get weekOfYear(){return Dt(this,"weekOfYear")?.week}get yearOfWeek(){return Dt(this,"weekOfYear")?.year}get daysInWeek(){return Dt(this,"daysInWeek")}get daysInMonth(){return Dt(this,"daysInMonth")}get daysInYear(){return Dt(this,"daysInYear")}get monthsInYear(){return Dt(this,"monthsInYear")}get inLeapYear(){return Dt(this,"inLeapYear")}with(t,n=void 0){if(b(this,K),!G(t))throw new TypeError("invalid argument");fn(t);const r=m(this,x);let i=_t(r,m(this,k));return i=Ze(r,i,zt(r,t,["year","month","monthCode","day"],[],"partial")),Tt(Pe(r,i,S(C(n))),r)}withCalendar(t){b(this,K);const n=ar(t);return Tt(m(this,k),n)}add(t,n=void 0){return b(this,K),wa("add",this,t,n)}subtract(t,n=void 0){return b(this,K),wa("subtract",this,t,n)}until(t,n=void 0){return b(this,K),ha("until",this,t,n)}since(t,n=void 0){return b(this,K),ha("since",this,t,n)}equals(t){b(this,K);const n=tr(t);return le(m(this,k),m(n,k))===0&&se(m(this,x),m(n,x))}toString(t=void 0){return b(this,K),qs(this,Kn(C(t)))}toJSON(){return b(this,K),qs(this)}toLocaleString(t=void 0,n=void 0){return b(this,K),new Vt(t,n).format(this)}valueOf(){Ue("PlainDate")}toPlainDateTime(t=void 0){b(this,K);const n=Ns(t);return qt(z(m(this,k),n),m(this,x))}toZonedDateTime(t){let n,r;if(b(this,K),G(t)){const s=t.timeZone;s===void 0?n=Mt(t):(n=Mt(s),r=t.plainTime)}else n=Mt(t);const i=m(this,k);let o;return r===void 0?o=Se(n,i):(r=Ie(r),o=ht(n,z(i,m(r,W)),"compatible")),ut(o,n,m(this,x))}toPlainYearMonth(){b(this,K);const t=m(this,x);return yn(lr(t,_t(t,m(this,k)),"constrain"),t)}toPlainMonthDay(){b(this,K);const t=m(this,x);return pn(Qr(t,_t(t,m(this,k)),"constrain"),t)}static from(t,n=void 0){return tr(t,n)}static compare(t,n){const r=tr(t),i=tr(n);return le(m(r,k),m(i,k))}}function Dt(e,t){b(e,K);const n=m(e,k);return Jn(e).isoToDate(n,{[t]:!0})[t]}ve(bo,"Temporal.PlainDate");class _o{constructor(t,n,r,i=0,o=0,s=0,a=0,c=0,l=0,u="iso8601"){const h=L(t),d=L(n),g=L(r),p=i===void 0?0:L(i),w=o===void 0?0:L(o),y=s===void 0?0:L(s),v=a===void 0?0:L(a),_=c===void 0?0:L(c),T=l===void 0?0:L(l),M=xt(u===void 0?"iso8601":tt(u));ro(h,d,g,p,w,y,v,_,T),As(this,{isoDate:{year:h,month:d,day:g},time:{hour:p,minute:w,second:y,millisecond:v,microsecond:_,nanosecond:T}},M)}get calendarId(){return b(this,q),m(this,x)}get year(){return Ct(this,"year")}get month(){return Ct(this,"month")}get monthCode(){return Ct(this,"monthCode")}get day(){return Ct(this,"day")}get hour(){return Cn(this,"hour")}get minute(){return Cn(this,"minute")}get second(){return Cn(this,"second")}get millisecond(){return Cn(this,"millisecond")}get microsecond(){return Cn(this,"microsecond")}get nanosecond(){return Cn(this,"nanosecond")}get era(){return Ct(this,"era")}get eraYear(){return Ct(this,"eraYear")}get dayOfWeek(){return Ct(this,"dayOfWeek")}get dayOfYear(){return Ct(this,"dayOfYear")}get weekOfYear(){return Ct(this,"weekOfYear")?.week}get yearOfWeek(){return Ct(this,"weekOfYear")?.year}get daysInWeek(){return Ct(this,"daysInWeek")}get daysInYear(){return Ct(this,"daysInYear")}get daysInMonth(){return Ct(this,"daysInMonth")}get monthsInYear(){return Ct(this,"monthsInYear")}get inLeapYear(){return Ct(this,"inLeapYear")}with(t,n=void 0){if(b(this,q),!G(t))throw new TypeError("invalid argument");fn(t);const r=m(this,x),i=m(this,X);let o={..._t(r,i.isoDate),...i.time};return o=Ze(r,o,zt(r,t,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond"],"partial")),qt(er(r,o,S(C(n))),r)}withPlainTime(t=void 0){b(this,q);const n=Ns(t);return qt(z(m(this,X).isoDate,n),m(this,x))}withCalendar(t){b(this,q);const n=ar(t);return qt(m(this,X),n)}add(t,n=void 0){return b(this,q),va("add",this,t,n)}subtract(t,n=void 0){return b(this,q),va("subtract",this,t,n)}until(t,n=void 0){return b(this,q),da("until",this,t,n)}since(t,n=void 0){return b(this,q),da("since",this,t,n)}round(t){if(b(this,q),t===void 0)throw new TypeError("options parameter is required");const n=typeof t=="string"?Be("smallestUnit",t):C(t),r=mn(n),i=Qt(n,"halfExpand"),o=Nt(n,"smallestUnit","time",be,["day"]),s={day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[o];gn(r,s,s===1);const a=m(this,X);return qt(r===1&&o==="nanosecond"?a:uo(a,r,o,i),m(this,x))}equals(t){b(this,q);const n=nr(t);return Mn(m(this,X),m(n,X))===0&&se(m(this,x),m(n,x))}toString(t=void 0){b(this,q);const n=C(t),r=Kn(n),i=Qn(n),o=Qt(n,"trunc"),s=Nt(n,"smallestUnit","time",void 0);if(s==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');const{precision:a,unit:c,increment:l}=Bn(s,i),u=uo(m(this,X),l,c,o);return Ke(u),dr(u,m(this,x),a,r)}toJSON(){return b(this,q),dr(m(this,X),m(this,x),"auto")}toLocaleString(t=void 0,n=void 0){return b(this,q),new Vt(t,n).format(this)}valueOf(){Ue("PlainDateTime")}toZonedDateTime(t,n=void 0){b(this,q);const r=Mt(t),i=Vn(C(n));return ut(ht(r,m(this,X),i),r,m(this,x))}toPlainDate(){return b(this,q),Tt(m(this,X).isoDate,m(this,x))}toPlainTime(){return b(this,q),Ee(m(this,X).time)}static from(t,n=void 0){return nr(t,n)}static compare(t,n){const r=nr(t),i=nr(n);return Mn(m(r,X),m(i,X))}}function Ct(e,t){b(e,q);const n=m(e,X).isoDate;return Jn(e).isoToDate(n,{[t]:!0})[t]}function Cn(e,t){return b(e,q),m(e,X).time[t]}ve(_o,"Temporal.PlainDateTime");class $n{constructor(t=0,n=0,r=0,i=0,o=0,s=0,a=0,c=0,l=0,u=0){const h=t===void 0?0:Kt(t),d=n===void 0?0:Kt(n),g=r===void 0?0:Kt(r),p=i===void 0?0:Kt(i),w=o===void 0?0:Kt(o),y=s===void 0?0:Kt(s),v=a===void 0?0:Kt(a),_=c===void 0?0:Kt(c),T=l===void 0?0:Kt(l),M=u===void 0?0:Kt(u);oi(h,d,g,p,w,y,v,_,T,M),we(this),N(this,dt,h),N(this,ft,d),N(this,Lt,g),N(this,mt,p),N(this,gt,w),N(this,pt,y),N(this,yt,v),N(this,wt,_),N(this,vt,T),N(this,Rt,M)}get years(){return b(this,V),m(this,dt)}get months(){return b(this,V),m(this,ft)}get weeks(){return b(this,V),m(this,Lt)}get days(){return b(this,V),m(this,mt)}get hours(){return b(this,V),m(this,gt)}get minutes(){return b(this,V),m(this,pt)}get seconds(){return b(this,V),m(this,yt)}get milliseconds(){return b(this,V),m(this,wt)}get microseconds(){return b(this,V),m(this,vt)}get nanoseconds(){return b(this,V),m(this,Rt)}get sign(){return b(this,V),ni(this)}get blank(){return b(this,V),ni(this)===0}with(t){b(this,V);const n=Ls(t),{years:r=m(this,dt),months:i=m(this,ft),weeks:o=m(this,Lt),days:s=m(this,mt),hours:a=m(this,gt),minutes:c=m(this,pt),seconds:l=m(this,yt),milliseconds:u=m(this,wt),microseconds:h=m(this,vt),nanoseconds:d=m(this,Rt)}=n;return new $n(r,i,o,s,a,c,l,u,h,d)}negated(){return b(this,V),At(this)}abs(){return b(this,V),new $n(Math.abs(m(this,dt)),Math.abs(m(this,ft)),Math.abs(m(this,Lt)),Math.abs(m(this,mt)),Math.abs(m(this,gt)),Math.abs(m(this,pt)),Math.abs(m(this,yt)),Math.abs(m(this,wt)),Math.abs(m(this,vt)),Math.abs(m(this,Rt)))}add(t){return b(this,V),pa("add",this,t)}subtract(t){return b(this,V),pa("subtract",this,t)}round(t){if(b(this,V),t===void 0)throw new TypeError("options parameter is required");const n=_e(this),r=typeof t=="string"?Be("smallestUnit",t):C(t);let i=Nt(r,"largestUnit","datetime",void 0,["auto"]),{plainRelativeTo:o,zonedRelativeTo:s}=Vi(r);const a=mn(r),c=Qt(r,"halfExpand");let l=Nt(r,"smallestUnit","datetime",void 0),u=!0;l||(u=!1,l="nanosecond");const h=Te(n,l);let d=!0;if(i||(d=!1,i=h),i==="auto"&&(i=h),!u&&!d)throw new RangeError("at least one of smallestUnit or largestUnit is required");if(Te(i,l)!==i)throw new RangeError(`largestUnit ${i} cannot be smaller than smallestUnit ${l}`);const g={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[l];if(g!==void 0&&gn(a,g,!1),a>1&&Me(l)==="date"&&i!==l)throw new RangeError("For calendar units with roundingIncrement > 1, use largestUnit = smallestUnit");if(s){let w=vn(this);const y=m(s,j),v=m(s,x),_=m(s,$);return w=la(_,gr(_,y,v,w),y,v,i,a,l,c),Me(i)==="date"&&(i="hour"),Wt(w,i)}if(o){let w=ce(this);const y=Tn({hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0},w.time),v=m(o,k),_=m(o,x),T=Ht(_,v,lt(w.date,y.deltaDays),"constrain");return w=ca(z(v,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),z(T,y),_,i,a,l,c),Wt(w,i)}if(ie(n))throw new RangeError(`a starting point is required for ${n}s balancing`);if(ie(i))throw new RangeError(`a starting point is required for ${i}s balancing`);let p=ce(this);if(l==="day"){const{quotient:w,remainder:y}=p.time.divmod(Fr);let v=p.date.days+w+pr(y,"day");v=He(v,a,c),p=De({years:0,months:0,weeks:0,days:v},O.ZERO)}else p=De({years:0,months:0,weeks:0,days:0},ai(p.time,a,l,c));return Wt(p,i)}total(t){if(b(this,V),t===void 0)throw new TypeError("options argument is required");const n=typeof t=="string"?Be("unit",t):C(t);let{plainRelativeTo:r,zonedRelativeTo:i}=Vi(n);const o=Nt(n,"unit","datetime",be);if(i){const a=vn(this),c=m(i,j),l=m(i,x),u=m(i,$);return(function(h,d,g,p,w){return Me(w)==="time"?pr(O.fromEpochNsDiff(d,h),w):aa(oa(h,d,g,p,w),d,Xt(g,h),g,p,w)})(u,gr(u,c,l,a),c,l,o)}if(r){const a=ce(this);let c=Tn({hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0},a.time);const l=m(r,k),u=m(r,x),h=Ht(u,l,lt(a.date,c.deltaDays),"constrain");return(function(d,g,p,w){if(Mn(d,g)==0)return 0;Ke(d),Ke(g);const y=ia(d,g,p,w);return w==="nanosecond"?f.toNumber(y.time.totalNs):aa(y,at(g),d,null,p,w)})(z(l,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),z(h,c),u,o)}const s=_e(this);if(ie(s))throw new RangeError(`a starting point is required for ${s}s total`);if(ie(o))throw new RangeError(`a starting point is required for ${o}s total`);return pr(ce(this).time,o)}toString(t=void 0){b(this,V);const n=C(t),r=Qn(n),i=Qt(n,"trunc"),o=Nt(n,"smallestUnit","time",void 0);if(o==="hour"||o==="minute")throw new RangeError('smallestUnit must be a time unit other than "hours" or "minutes"');const{precision:s,unit:a,increment:c}=Bn(o,r);if(a==="nanosecond"&&c===1)return Jr(this,s);const l=_e(this);let u=vn(this);const h=ai(u.time,c,a,i);return u=De(u.date,h),Jr(Wt(u,Te(l,"second")),s)}toJSON(){return b(this,V),Jr(this,"auto")}toLocaleString(t=void 0,n=void 0){if(b(this,V),typeof Intl.DurationFormat=="function"){const r=new Intl.DurationFormat(t,n);return Ya.call(r,this)}return console.warn("Temporal.Duration.prototype.toLocaleString() requires Intl.DurationFormat."),Jr(this,"auto")}valueOf(){Ue("Duration")}static from(t){return Zt(t)}static compare(t,n,r=void 0){const i=Zt(t),o=Zt(n),s=C(r),{plainRelativeTo:a,zonedRelativeTo:c}=Vi(s);if(m(i,dt)===m(o,dt)&&m(i,ft)===m(o,ft)&&m(i,Lt)===m(o,Lt)&&m(i,mt)===m(o,mt)&&m(i,gt)===m(o,gt)&&m(i,pt)===m(o,pt)&&m(i,yt)===m(o,yt)&&m(i,wt)===m(o,wt)&&m(i,vt)===m(o,vt)&&m(i,Rt)===m(o,Rt))return 0;const l=_e(i),u=_e(o),h=vn(i),d=vn(o);if(c&&(Me(l)==="date"||Me(u)==="date")){const v=m(c,j),_=m(c,x),T=m(c,$),M=gr(T,v,_,h),E=gr(T,v,_,d);return Yt(f.toNumber(f.subtract(M,E)))}let g=h.date.days,p=d.date.days;if(ie(l)||ie(u)){if(!a)throw new RangeError("A starting point is required for years, months, or weeks comparison");g=ea(h.date,a),p=ea(d.date,a)}const w=h.time.add24HourDays(g),y=d.time.add24HourDays(p);return w.cmp(y)}}ve($n,"Temporal.Duration");class To{constructor(t,n,r="iso8601",i=1972){const o=L(t),s=L(n),a=xt(r===void 0?"iso8601":tt(r)),c=L(i);Ge(c,o,s),Ys(this,{year:c,month:o,day:s},a)}get monthCode(){return Ia(this,"monthCode")}get day(){return Ia(this,"day")}get calendarId(){return b(this,St),m(this,x)}with(t,n=void 0){if(b(this,St),!G(t))throw new TypeError("invalid argument");fn(t);const r=m(this,x);let i=_t(r,m(this,k),"month-day");return i=Ze(r,i,zt(r,t,["year","month","monthCode","day"],[],"partial")),pn(Qr(r,i,S(C(n))),r)}equals(t){b(this,St);const n=Rs(t);return le(m(this,k),m(n,k))===0&&se(m(this,x),m(n,x))}toString(t=void 0){return b(this,St),Ws(this,Kn(C(t)))}toJSON(){return b(this,St),Ws(this)}toLocaleString(t=void 0,n=void 0){return b(this,St),new Vt(t,n).format(this)}valueOf(){Ue("PlainMonthDay")}toPlainDate(t){if(b(this,St),!G(t))throw new TypeError("argument should be an object");const n=m(this,x);return Tt(Pe(n,Ze(n,_t(n,m(this,k),"month-day"),zt(n,t,["year"],[],[])),"constrain"),n)}static from(t,n=void 0){return Rs(t,n)}}function Ia(e,t){b(e,St);const n=m(e,k);return Jn(e).isoToDate(n,{[t]:!0})[t]}function Mo(e){return Xt(e,mo())}ve(To,"Temporal.PlainMonthDay");const Pa={instant:()=>oe(mo()),plainDateTimeISO:(e=yr())=>qt(Mo(Mt(e)),"iso8601"),plainDateISO:(e=yr())=>Tt(Mo(Mt(e)).isoDate,"iso8601"),plainTimeISO:(e=yr())=>Ee(Mo(Mt(e)).time),timeZoneId:()=>yr(),zonedDateTimeISO:(e=yr())=>{const t=Mt(e);return ut(mo(),t,"iso8601")},[Symbol.toStringTag]:"Temporal.Now"};Object.defineProperty(Pa,Symbol.toStringTag,{value:"Temporal.Now",writable:!1,enumerable:!1,configurable:!0});class xr{constructor(t=0,n=0,r=0,i=0,o=0,s=0){const a=t===void 0?0:L(t),c=n===void 0?0:L(n),l=r===void 0?0:L(r),u=i===void 0?0:L(i),h=o===void 0?0:L(o),d=s===void 0?0:L(s);ii(a,c,l,u,h,d),Is(this,{hour:a,minute:c,second:l,millisecond:u,microsecond:h,nanosecond:d})}get hour(){return b(this,Q),m(this,W).hour}get minute(){return b(this,Q),m(this,W).minute}get second(){return b(this,Q),m(this,W).second}get millisecond(){return b(this,Q),m(this,W).millisecond}get microsecond(){return b(this,Q),m(this,W).microsecond}get nanosecond(){return b(this,Q),m(this,W).nanosecond}with(t,n=void 0){if(b(this,Q),!G(t))throw new TypeError("invalid argument");fn(t);const r=Ki(t,"partial"),i=Ki(this);let{hour:o,minute:s,second:a,millisecond:c,microsecond:l,nanosecond:u}=Object.assign(i,r);const h=S(C(n));return{hour:o,minute:s,second:a,millisecond:c,microsecond:l,nanosecond:u}=Gr(o,s,a,c,l,u,h),new xr(o,s,a,c,l,u)}add(t){return b(this,Q),ba("add",this,t)}subtract(t){return b(this,Q),ba("subtract",this,t)}until(t,n=void 0){return b(this,Q),fa("until",this,t,n)}since(t,n=void 0){return b(this,Q),fa("since",this,t,n)}round(t){if(b(this,Q),t===void 0)throw new TypeError("options parameter is required");const n=typeof t=="string"?Be("smallestUnit",t):C(t),r=mn(n),i=Qt(n,"halfExpand"),o=Nt(n,"smallestUnit","time",be);return gn(r,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[o],!1),Ee(ho(m(this,W),r,o,i))}equals(t){b(this,Q);const n=Ie(t);return fo(m(this,W),m(n,W))===0}toString(t=void 0){b(this,Q);const n=C(t),r=Qn(n),i=Qt(n,"trunc"),o=Nt(n,"smallestUnit","time",void 0);if(o==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');const{precision:s,unit:a,increment:c}=Bn(o,r);return Xs(ho(m(this,W),c,a,i),s)}toJSON(){return b(this,Q),Xs(m(this,W),"auto")}toLocaleString(t=void 0,n=void 0){return b(this,Q),new Vt(t,n).format(this)}valueOf(){Ue("PlainTime")}static from(t,n=void 0){return Ie(t,n)}static compare(t,n){const r=Ie(t),i=Ie(n);return fo(m(r,W),m(i,W))}}ve(xr,"Temporal.PlainTime");class Eo{constructor(t,n,r="iso8601",i=1){const o=L(t),s=L(n),a=xt(r===void 0?"iso8601":tt(r)),c=L(i);Ge(o,s,c),Ps(this,{year:o,month:s,day:c},a)}get year(){return ke(this,"year")}get month(){return ke(this,"month")}get monthCode(){return ke(this,"monthCode")}get calendarId(){return b(this,st),m(this,x)}get era(){return ke(this,"era")}get eraYear(){return ke(this,"eraYear")}get daysInMonth(){return ke(this,"daysInMonth")}get daysInYear(){return ke(this,"daysInYear")}get monthsInYear(){return ke(this,"monthsInYear")}get inLeapYear(){return ke(this,"inLeapYear")}with(t,n=void 0){if(b(this,st),!G(t))throw new TypeError("invalid argument");fn(t);const r=m(this,x);let i=_t(r,m(this,k),"year-month");return i=Ze(r,i,zt(r,t,["year","month","monthCode"],[],"partial")),yn(lr(r,i,S(C(n))),r)}add(t,n=void 0){return b(this,st),_a("add",this,t,n)}subtract(t,n=void 0){return b(this,st),_a("subtract",this,t,n)}until(t,n=void 0){return b(this,st),ma("until",this,t,n)}since(t,n=void 0){return b(this,st),ma("since",this,t,n)}equals(t){b(this,st);const n=ir(t);return le(m(this,k),m(n,k))===0&&se(m(this,x),m(n,x))}toString(t=void 0){return b(this,st),Gs(this,Kn(C(t)))}toJSON(){return b(this,st),Gs(this)}toLocaleString(t=void 0,n=void 0){return b(this,st),new Vt(t,n).format(this)}valueOf(){Ue("PlainYearMonth")}toPlainDate(t){if(b(this,st),!G(t))throw new TypeError("argument should be an object");const n=m(this,x);return Tt(Pe(n,Ze(n,_t(n,m(this,k),"year-month"),zt(n,t,["day"],[],[])),"constrain"),n)}static from(t,n=void 0){return ir(t,n)}static compare(t,n){const r=ir(t),i=ir(n);return le(m(r,k),m(i,k))}}function ke(e,t){b(e,st);const n=m(e,k);return Jn(e).isoToDate(n,{[t]:!0})[t]}ve(Eo,"Temporal.PlainYearMonth");const Bl=Vt.prototype.resolvedOptions;class xo{constructor(t,n,r="iso8601"){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");const i=ci(t);let o=tt(n);const{tzName:s,offsetMinutes:a}=Ae(o);if(a===void 0){const c=ti(s);if(!c)throw new RangeError(`unknown time zone ${s}`);o=c.identifier}else o=Ji(a);zs(this,i,o,xt(r===void 0?"iso8601":tt(r)))}get calendarId(){return b(this,A),m(this,x)}get timeZoneId(){return b(this,A),m(this,j)}get year(){return $t(this,"year")}get month(){return $t(this,"month")}get monthCode(){return $t(this,"monthCode")}get day(){return $t(this,"day")}get hour(){return kn(this,"hour")}get minute(){return kn(this,"minute")}get second(){return kn(this,"second")}get millisecond(){return kn(this,"millisecond")}get microsecond(){return kn(this,"microsecond")}get nanosecond(){return kn(this,"nanosecond")}get era(){return $t(this,"era")}get eraYear(){return $t(this,"eraYear")}get epochMilliseconds(){return b(this,A),Gt(m(this,$),"floor")}get epochNanoseconds(){return b(this,A),Ma(m(this,$))}get dayOfWeek(){return $t(this,"dayOfWeek")}get dayOfYear(){return $t(this,"dayOfYear")}get weekOfYear(){return $t(this,"weekOfYear")?.week}get yearOfWeek(){return $t(this,"weekOfYear")?.year}get hoursInDay(){b(this,A);const t=m(this,j),n=fe(this).isoDate,r=Ot(n.year,n.month,n.day+1),i=Se(t,n),o=Se(t,r);return pr(O.fromEpochNsDiff(o,i),"hour")}get daysInWeek(){return $t(this,"daysInWeek")}get daysInMonth(){return $t(this,"daysInMonth")}get daysInYear(){return $t(this,"daysInYear")}get monthsInYear(){return $t(this,"monthsInYear")}get inLeapYear(){return $t(this,"inLeapYear")}get offset(){return b(this,A),Qi(xe(m(this,j),m(this,$)))}get offsetNanoseconds(){return b(this,A),xe(m(this,j),m(this,$))}with(t,n=void 0){if(b(this,A),!G(t))throw new TypeError("invalid zoned-date-time-like");fn(t);const r=m(this,x),i=m(this,j),o=xe(i,m(this,$)),s=fe(this);let a={..._t(r,s.isoDate),...s.time,offset:Qi(o)};a=Ze(r,a,zt(r,t,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond","offset"],"partial"));const c=C(n),l=Vn(c),u=Vr(c,"prefer"),h=er(r,a,S(c)),d=wn(a.offset);return ut(Kr(h.isoDate,h.time,"option",d,i,l,u,!1),i,r)}withPlainTime(t=void 0){b(this,A);const n=m(this,j),r=m(this,x),i=fe(this).isoDate;let o;return o=t===void 0?Se(n,i):ht(n,z(i,m(Ie(t),W)),"compatible"),ut(o,n,r)}withTimeZone(t){b(this,A);const n=Mt(t);return ut(m(this,$),n,m(this,x))}withCalendar(t){b(this,A);const n=ar(t);return ut(m(this,$),m(this,j),n)}add(t,n=void 0){return b(this,A),Ta("add",this,t,n)}subtract(t,n=void 0){return b(this,A),Ta("subtract",this,t,n)}until(t,n=void 0){return b(this,A),ga("until",this,t,n)}since(t,n=void 0){return b(this,A),ga("since",this,t,n)}round(t){if(b(this,A),t===void 0)throw new TypeError("options parameter is required");const n=typeof t=="string"?Be("smallestUnit",t):C(t),r=mn(n),i=Qt(n,"halfExpand"),o=Nt(n,"smallestUnit","time",be,["day"]),s={day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[o];if(gn(r,s,s===1),o==="nanosecond"&&r===1)return ut(m(this,$),m(this,j),m(this,x));const a=m(this,j),c=m(this,$),l=fe(this);let u;if(o==="day"){const h=l.isoDate,d=Ot(h.year,h.month,h.day+1),g=Se(a,h),p=Se(a,d),w=f.subtract(p,g);u=O.fromEpochNsDiff(c,g).round(w,i).addToEpochNs(g)}else{const h=uo(l,r,o,i),d=xe(a,c);u=Kr(h.isoDate,h.time,"option",d,a,"compatible","prefer",!1)}return ut(u,a,m(this,x))}equals(t){b(this,A);const n=or(t),r=m(this,$),i=m(n,$);return!!f.equal(f.BigInt(r),f.BigInt(i))&&!!Us(m(this,j),m(n,j))&&se(m(this,x),m(n,x))}toString(t=void 0){b(this,A);const n=C(t),r=Kn(n),i=Qn(n),o=(function(d){return Ce(d,"offset",["auto","never"],"auto")})(n),s=Qt(n,"trunc"),a=Nt(n,"smallestUnit","time",void 0);if(a==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');const c=(function(d){return Ce(d,"timeZoneName",["auto","never","critical"],"auto")})(n),{precision:l,unit:u,increment:h}=Bn(a,i);return Vs(this,l,r,c,o,{unit:u,increment:h,roundingMode:s})}toLocaleString(t=void 0,n=void 0){b(this,A);const r=C(n),i=Object.create(null);if((function(c,l,u,h){if(l==null)return;const d=Reflect.ownKeys(l);for(let g=0;g<d.length;g++){const p=d[g];if(!u.some((w=>Object.is(w,p)))&&Object.prototype.propertyIsEnumerable.call(l,p)){const w=l[p];c[p]=w}}})(i,r,["timeZone"]),r.timeZone!==void 0)throw new TypeError("ZonedDateTime toLocaleString does not accept a timeZone option");if(i.year===void 0&&i.month===void 0&&i.day===void 0&&i.era===void 0&&i.weekday===void 0&&i.dateStyle===void 0&&i.hour===void 0&&i.minute===void 0&&i.second===void 0&&i.fractionalSecondDigits===void 0&&i.timeStyle===void 0&&i.dayPeriod===void 0&&i.timeZoneName===void 0&&(i.timeZoneName="short"),i.timeZone=m(this,j),Ks(i.timeZone))throw new RangeError("toLocaleString does not currently support offset time zones");const o=new Vt(t,i),s=Bl.call(o).calendar,a=m(this,x);if(a!=="iso8601"&&s!=="iso8601"&&!se(s,a))throw new RangeError(`cannot format ZonedDateTime with calendar ${a} in locale with calendar ${s}`);return o.format(oe(m(this,$)))}toJSON(){return b(this,A),Vs(this,"auto")}valueOf(){Ue("ZonedDateTime")}startOfDay(){b(this,A);const t=m(this,j);return ut(Se(t,fe(this).isoDate),t,m(this,x))}getTimeZoneTransition(t){b(this,A);const n=m(this,j);if(t===void 0)throw new TypeError("options parameter is required");const r=Ce(typeof t=="string"?Be("direction",t):C(t),"direction",["next","previous"],be);if(r===void 0)throw new TypeError("direction option is required");if(Ks(n)||n==="UTC")return null;const i=m(this,$),o=r==="next"?eo(n,i):no(n,i);return o===null?null:ut(o,n,m(this,x))}toInstant(){return b(this,A),oe(m(this,$))}toPlainDate(){return b(this,A),Tt(fe(this).isoDate,m(this,x))}toPlainTime(){return b(this,A),Ee(fe(this).time)}toPlainDateTime(){return b(this,A),qt(fe(this),m(this,x))}static from(t,n=void 0){return or(t,n)}static compare(t,n){const r=or(t),i=or(n),o=m(r,$),s=m(i,$);return f.lessThan(f.BigInt(o),f.BigInt(s))?-1:f.greaterThan(f.BigInt(o),f.BigInt(s))?1:0}}function fe(e){return Xt(m(e,j),m(e,$))}function $t(e,t){b(e,A);const n=fe(e).isoDate;return Jn(e).isoToDate(n,{[t]:!0})[t]}function kn(e,t){return b(e,A),fe(e).time[t]}ve(xo,"Temporal.ZonedDateTime");var Jl=Object.freeze({__proto__:null,Duration:$n,Instant:vo,Now:Pa,PlainDate:bo,PlainDateTime:_o,PlainMonthDay:To,PlainTime:xr,PlainYearMonth:Eo,ZonedDateTime:xo});const tu=[vo,bo,_o,$n,To,xr,Eo,xo];for(const e of tu){const t=Object.getOwnPropertyDescriptor(e,"prototype");(t.configurable||t.enumerable||t.writable)&&(t.configurable=!1,t.enumerable=!1,t.writable=!1,Object.defineProperty(e,"prototype",t))}function J(e){if(e==null)throw new Error('normalizeTime received undefined or null input. Check that all events have a "time" property and all periods have a "startTime" property.');if(typeof e=="string"){const t=/Z|[+-]\d{2}:\d{2}$/.test(e);let n;if(t)n=Temporal.Instant.from(e);else try{n=Temporal.PlainDateTime.from(e).toZonedDateTime("UTC").toInstant()}catch{n=Temporal.PlainDate.from(e).toZonedDateTime("UTC").toInstant()}return di(n)}if(e instanceof Temporal.Instant)return di(e);if("value"in e&&"unit"in e){const t=Temporal.Now.plainDateISO().year;if(e.unit==="mya")return-(e.value*1e6);if(e.unit==="years-ago")return t-e.value;if(e.unit==="bce")return-e.value;if(e.unit==="ce")return e.value}if("localTime"in e&&"timezone"in e){const t=Temporal.PlainDateTime.from(e.localTime).toZonedDateTime(e.timezone);return di(t.toInstant())}throw new Error(`Unsupported time input format: ${JSON.stringify(e)}`)}function di(e){const n=e.toZonedDateTimeISO("UTC").year,r=Temporal.ZonedDateTime.from({year:n,month:1,day:1,hour:0,minute:0,second:0,timeZone:"UTC"}),o=Temporal.ZonedDateTime.from({year:n+1,month:1,day:1,hour:0,minute:0,second:0,timeZone:"UTC"}).epochNanoseconds-r.epochNanoseconds,s=e.epochNanoseconds-r.toInstant().epochNanoseconds,a=Number(s)/Number(o);return n+a}function eu(e,t){if(e<-1e6)return`${(Math.abs(e)/1e6).toFixed(1)} MYA`;if(e<-1e4)return`${(Math.abs(e)/1e3).toFixed(1)} KYA`;if(e<0)return`${Math.abs(Math.floor(e))} BCE`;if(e<1e3)return`${Math.floor(e)} CE`;{const n=Math.floor(e);return t==="precise"?nu(e).toString():t==="historical"?`${n} CE`:n.toString()}}function nu(e){const t=Math.floor(e),n=e-t,r=Temporal.ZonedDateTime.from({year:t,month:1,day:1,hour:0,minute:0,second:0,timeZone:"UTC"}),o=Temporal.ZonedDateTime.from({year:t+1,month:1,day:1,hour:0,minute:0,second:0,timeZone:"UTC"}).epochNanoseconds-r.epochNanoseconds,s=BigInt(Math.round(n*Number(o))),a=r.epochNanoseconds+s;return Temporal.Instant.fromEpochNanoseconds(a)}function ru(e,t){const n=t-e;return n>1e6||e<-1e6?"geological":n>1e4||e<-1e4?"prehistoric":n>1e3?"historical":n>1?"modern":"precise"}function Do(){return di(Temporal.Now.instant())}function Sa(e){return e.endTime===void 0||e.endTime===null}function Dr(e,t=!1){return e==null?t?1/0:Do():J(e)}function iu(e,t){const n=new Map;e.forEach(y=>{n.set(y.id,{name:y.name,startTime:J(y.startTime),endTime:Dr(y.endTime,!0)})});const r=t.filter(y=>y.type==="defined"),i=new Map,o=new Map;r.forEach(y=>{i.has(y.fromId)||i.set(y.fromId,[]),i.get(y.fromId).push(y.toId),o.has(y.toId)||o.set(y.toId,[]),o.get(y.toId).push(y.fromId)});const s=[];new Set([...r.map(y=>y.fromId),...r.map(y=>y.toId)]).forEach(y=>{o.has(y)||s.push(y)});const c=new Map;function l(y){const v=new Set;let _=[y];for(;_.length>0;){const T=[];for(const M of _){if(v.has(M))continue;v.add(M);const E=o.get(M)||[];if(E.length===0){const R=n.get(M);if(R)return{rootId:M,rootStartTime:R.startTime}}else T.push(...E)}_=T}return null}o.forEach((y,v)=>{if(y.length>1){let _=null;for(const T of y){const M=l(T);M&&(!_||M.rootStartTime<_.rootStartTime)&&(_=M)}_&&c.set(v,_.rootId)}});const u=new Set;function h(y,v){const _=n.get(y);if(!_||c.has(y)&&c.get(y)!==v||u.has(y))return null;u.add(y);const T={id:y,name:_.name,startTime:_.startTime,endTime:_.endTime,children:[]},M=i.get(y)||[];for(const E of M){const R=h(E,v);R&&T.children.push(R)}return T.children.sort((E,R)=>E.startTime-R.startTime),T}const d=[],g=new Set;function p(y,v){v.add(y.id),y.children.forEach(_=>p(_,v))}for(const y of s){u.clear();const v=h(y,y);if(v){const _=new Set;p(v,_),d.push({root:v,allNodeIds:_}),_.forEach(T=>g.add(T))}}d.sort((y,v)=>y.root.startTime-v.root.startTime);const w=new Map;return n.forEach((y,v)=>{g.has(v)||w.set(v,y)}),{trees:d,unconnectedPeriods:w,periodMap:n}}function Co(e){let t=e.endTime;for(const n of e.children){const r=Co(n);r>t&&(t=r)}return t}function $o(e){const t=[e],n=e.children.filter(a=>a.startTime>=e.endTime);if(n.length===0)return t;let r=n[0],i=r.startTime,o=Co(r);for(let a=1;a<n.length;a++){const c=n[a],l=Co(c);c.startTime<i?(r=c,i=c.startTime,o=l):c.startTime===i&&l>o&&(r=c,o=l)}const s=$o(r);return t.push(...s),t}function ou(e){const t=new Set(e.map(r=>r.id)),n=[];for(const r of e)for(const i of r.children)if(!t.has(i.id)){const o=$o(i);n.push(o)}return n}function su(e,t,n,r){return e<r&&n<t}function za(e,t,n,r){const i=r.find(o=>o.lane===n&&su(e,t,o.startTime,o.endTime));return i?i.id:null}function Ha(e,t,n,r){for(const i of e){const o=za(i.startTime,i.endTime,t,n);if(o)return r.get(o),!1}return!0}function ko(e,t,n){for(const r of e)n.push({id:r.id,lane:t,startTime:r.startTime,endTime:r.endTime})}function au(e,t,n,r){const i=[],o=$o(e.root);let s=t;const a=100;let c=0;for(;c<a;){if(s<0){s=0,c++;continue}const w=[...n,...i];if(Ha(o,s,w,r)){ko(o,s,i);break}s++,c++}const l=[{trunk:o,parentLane:s,isAboveParent:null}],u=new Map;u.set(o[0].id,s);let h=0;for(;h<l.length;){const{trunk:w,parentLane:y,isAboveParent:v}=l[h],_=v===null,T=ou(w);T.length>0;let M=1,E=1,R=_?!0:v;for(let F=0;F<T.length;F++){const U=T[F],Y=U[0].id;let P,D=!1;for(c=0;!D&&c<a;){if(R?P=y+M:P=y-E,P<0){s++,i.length=0,ko(o,s,i),l.length=1,l[0]={trunk:o,parentLane:s,isAboveParent:null},u.clear(),u.set(o[0].id,s),h=-1;break}const I=[...n,...i];if(Ha(U,P,I,r)){ko(U,P,i),D=!0,u.set(Y,P);const H=P>y;l.push({trunk:U,parentLane:P,isAboveParent:H}),R?M++:E++,_&&(R=!R)}else R?M++:E++;c++}}h++}const d=i.map(w=>w.lane),g=d.length>0?Math.min(...d):s,p=d.length>0?Math.max(...d):s;return{placements:i,minLane:g,maxLane:p}}function cu(e,t){const n=[],r=Array.from(e.entries()).sort((i,o)=>i[1].startTime-o[1].startTime);for(const[i,o]of r){let s=0;const a=[...t,...n];for(;za(o.startTime,o.endTime,s,a);)s++;n.push({id:i,lane:s,startTime:o.startTime,endTime:o.endTime})}return n}const lu={name:"Succession-based",description:"Periods that succeed each other are placed on the same row",layout(e,t=[]){if(e.length===0)return[];const{trees:n,unconnectedPeriods:r,periodMap:i}=iu(e,t);n.forEach((l,u)=>{});const o=[];let s=0;for(let l=0;l<n.length;l++){const u=n[l],{placements:h,maxLane:d}=au(u,s,o,i);o.push(...h),s=d+1}const a=cu(r,o);o.push(...a);const c=o.map(l=>({itemId:l.id,lane:l.lane,startTime:l.startTime,endTime:l.endTime,type:"period"}));return c.forEach(l=>{}),c}};function Ua(e,t){return e<t}function uu(e,t){const n=[0,1,-1];for(const o of n)if(!Ua(e,t.get(o)))return o;let r=0,i=t.get(0);for(const o of n){const s=t.get(o);s<i&&(r=o,i=s)}return r}function hu(e,t=0,n=[]){const r=[],i=new Map;for(const u of n)i.set(u.itemId,u.lane);const o=[],s=[];for(const u of e)u.relates_to&&i.has(u.relates_to)?o.push(u):s.push(u);const a=new Map;for(const u of o){const h=i.get(u.relates_to),d=J(u.time);a.has(h)||a.set(h,[]),a.get(h).push({event:u,time:d})}for(const[u,h]of a){h.sort((g,p)=>g.time-p.time);const d=new Map([[-1,-1/0],[0,-1/0],[1,-1/0]]);for(const{event:g,time:p}of h){const w=uu(p,d);d.set(w,p),r.push({itemId:g.id,lane:u,startTime:p,endTime:p,type:"event",subLane:w})}}const c=s.map(u=>{const h=J(u.time);return{id:u.id,time:h}});c.sort((u,h)=>u.time-h.time);const l=[];for(const u of c){let h=-1;for(let d=0;d<Math.min(l.length,3);d++)if(!Ua(u.time,l[d].endTime)){h=d;break}if(h===-1&&l.length<3)h=l.length,l.push({endTime:u.time});else if(h===-1){let d=0,g=l[0].endTime;for(let p=1;p<3;p++)l[p].endTime<g&&(d=p,g=l[p].endTime);h=d,l[h].endTime=u.time}else l[h].endTime=u.time;r.push({itemId:u.id,lane:h+t,startTime:u.time,endTime:u.time,type:"event",subLane:h})}return r}const ja={succession:lu},Fa="succession";function Za(e,t,n=Fa,r=[]){const i=ja[n];if(!i)throw new Error(`Unknown period layout algorithm: ${n}`);const o=i.layout(e,r),a=(o.length>0?Math.max(...o.map(l=>l.lane)):-1)+1,c=hu(t,a,o);return[...o,...c]}function du(e){return e.length===0?0:Math.max(...e.map(t=>t.lane))+1}function fi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function fu(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function qa(e){let t,n,r;e.length!==2?(t=fi,n=(a,c)=>fi(e(a),c),r=(a,c)=>e(a)-c):(t=e===fi||e===fu?e:mu,n=e,r=e);function i(a,c,l=0,u=a.length){if(l<u){if(t(c,c)!==0)return u;do{const h=l+u>>>1;n(a[h],c)<0?l=h+1:u=h}while(l<u)}return l}function o(a,c,l=0,u=a.length){if(l<u){if(t(c,c)!==0)return u;do{const h=l+u>>>1;n(a[h],c)<=0?l=h+1:u=h}while(l<u)}return l}function s(a,c,l=0,u=a.length){const h=i(a,c,l,u-1);return h>l&&r(a[h-1],c)>-r(a[h],c)?h-1:h}return{left:i,center:s,right:o}}function mu(){return 0}function gu(e){return e===null?NaN:+e}const pu=qa(fi).right;qa(gu).center;const yu=Math.sqrt(50),wu=Math.sqrt(10),vu=Math.sqrt(2);function mi(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=yu?10:o>=wu?5:o>=vu?2:1;let a,c,l;return i<0?(l=Math.pow(10,-i)/s,a=Math.round(e*l),c=Math.round(t*l),a/l<e&&++a,c/l>t&&--c,l=-l):(l=Math.pow(10,i)*s,a=Math.round(e/l),c=Math.round(t/l),a*l<e&&++a,c*l>t&&--c),c<a&&.5<=n&&n<2?mi(e,t,n*2):[a,c,l]}function bu(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,s]=r?mi(t,e,n):mi(e,t,n);if(!(o>=i))return[];const a=o-i+1,c=new Array(a);if(r)if(s<0)for(let l=0;l<a;++l)c[l]=(o-l)/-s;else for(let l=0;l<a;++l)c[l]=(o-l)*s;else if(s<0)for(let l=0;l<a;++l)c[l]=(i+l)/-s;else for(let l=0;l<a;++l)c[l]=(i+l)*s;return c}function Lo(e,t,n){return t=+t,e=+e,n=+n,mi(e,t,n)[2]}function _u(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Lo(t,e,n):Lo(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}var Tu={value:()=>{}};function Xa(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new gi(n)}function gi(e){this._=e}function Mu(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}gi.prototype=Xa.prototype={constructor:gi,on:function(e,t){var n=this._,r=Mu(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=Eu(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=Wa(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Wa(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new gi(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Eu(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Wa(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Tu,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ro="http://www.w3.org/1999/xhtml";const Ga={svg:"http://www.w3.org/2000/svg",xhtml:Ro,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function pi(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ga.hasOwnProperty(t)?{space:Ga[t],local:e}:e}function xu(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ro&&t.documentElement.namespaceURI===Ro?t.createElement(e):t.createElementNS(n,e)}}function Du(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Va(e){var t=pi(e);return(t.local?Du:xu)(t)}function Cu(){}function No(e){return e==null?Cu:function(){return this.querySelector(e)}}function $u(e){typeof e!="function"&&(e=No(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),c,l,u=0;u<s;++u)(c=o[u])&&(l=e.call(c,c.__data__,u,o))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new Bt(r,this._parents)}function ku(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Lu(){return[]}function Ka(e){return e==null?Lu:function(){return this.querySelectorAll(e)}}function Ru(e){return function(){return ku(e.apply(this,arguments))}}function Nu(e){typeof e=="function"?e=Ru(e):e=Ka(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&(r.push(e.call(c,c.__data__,l,s)),i.push(c));return new Bt(r,i)}function Qa(e){return function(){return this.matches(e)}}function Ba(e){return function(t){return t.matches(e)}}var Ou=Array.prototype.find;function Au(e){return function(){return Ou.call(this.children,e)}}function Yu(){return this.firstElementChild}function Iu(e){return this.select(e==null?Yu:Au(typeof e=="function"?e:Ba(e)))}var Pu=Array.prototype.filter;function Su(){return Array.from(this.children)}function zu(e){return function(){return Pu.call(this.children,e)}}function Hu(e){return this.selectAll(e==null?Su:zu(typeof e=="function"?e:Ba(e)))}function Uu(e){typeof e!="function"&&(e=Qa(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],c,l=0;l<s;++l)(c=o[l])&&e.call(c,c.__data__,l,o)&&a.push(c);return new Bt(r,this._parents)}function Ja(e){return new Array(e.length)}function ju(){return new Bt(this._enter||this._groups.map(Ja),this._parents)}function yi(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}yi.prototype={constructor:yi,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Fu(e){return function(){return e}}function Zu(e,t,n,r,i,o){for(var s=0,a,c=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new yi(e,o[s]);for(;s<c;++s)(a=t[s])&&(i[s]=a)}function qu(e,t,n,r,i,o,s){var a,c,l=new Map,u=t.length,h=o.length,d=new Array(u),g;for(a=0;a<u;++a)(c=t[a])&&(d[a]=g=s.call(c,c.__data__,a,t)+"",l.has(g)?i[a]=c:l.set(g,c));for(a=0;a<h;++a)g=s.call(e,o[a],a,o)+"",(c=l.get(g))?(r[a]=c,c.__data__=o[a],l.delete(g)):n[a]=new yi(e,o[a]);for(a=0;a<u;++a)(c=t[a])&&l.get(d[a])===c&&(i[a]=c)}function Xu(e){return e.__data__}function Wu(e,t){if(!arguments.length)return Array.from(this,Xu);var n=t?qu:Zu,r=this._parents,i=this._groups;typeof e!="function"&&(e=Fu(e));for(var o=i.length,s=new Array(o),a=new Array(o),c=new Array(o),l=0;l<o;++l){var u=r[l],h=i[l],d=h.length,g=Gu(e.call(u,u&&u.__data__,l,r)),p=g.length,w=a[l]=new Array(p),y=s[l]=new Array(p),v=c[l]=new Array(d);n(u,h,w,y,v,g,t);for(var _=0,T=0,M,E;_<p;++_)if(M=w[_]){for(_>=T&&(T=_+1);!(E=y[T])&&++T<p;);M._next=E||null}}return s=new Bt(s,r),s._enter=a,s._exit=c,s}function Gu(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Vu(){return new Bt(this._exit||this._groups.map(Ja),this._parents)}function Ku(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Qu(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),c=0;c<s;++c)for(var l=n[c],u=r[c],h=l.length,d=a[c]=new Array(h),g,p=0;p<h;++p)(g=l[p]||u[p])&&(d[p]=g);for(;c<i;++c)a[c]=n[c];return new Bt(a,this._parents)}function Bu(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Ju(e){e||(e=th);function t(h,d){return h&&d?e(h.__data__,d.__data__):!h-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,c=i[o]=new Array(a),l,u=0;u<a;++u)(l=s[u])&&(c[u]=l);c.sort(t)}return new Bt(i,this._parents).order()}function th(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function eh(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function nh(){return Array.from(this)}function rh(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function ih(){let e=0;for(const t of this)++e;return e}function oh(){return!this.node()}function sh(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function ah(e){return function(){this.removeAttribute(e)}}function ch(e){return function(){this.removeAttributeNS(e.space,e.local)}}function lh(e,t){return function(){this.setAttribute(e,t)}}function uh(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function hh(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function dh(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function fh(e,t){var n=pi(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?ch:ah:typeof t=="function"?n.local?dh:hh:n.local?uh:lh)(n,t))}function tc(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function mh(e){return function(){this.style.removeProperty(e)}}function gh(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ph(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function yh(e,t,n){return arguments.length>1?this.each((t==null?mh:typeof t=="function"?ph:gh)(e,t,n??"")):Ln(this.node(),e)}function Ln(e,t){return e.style.getPropertyValue(t)||tc(e).getComputedStyle(e,null).getPropertyValue(t)}function wh(e){return function(){delete this[e]}}function vh(e,t){return function(){this[e]=t}}function bh(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function _h(e,t){return arguments.length>1?this.each((t==null?wh:typeof t=="function"?bh:vh)(e,t)):this.node()[e]}function ec(e){return e.trim().split(/^|\s+/)}function Oo(e){return e.classList||new nc(e)}function nc(e){this._node=e,this._names=ec(e.getAttribute("class")||"")}nc.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function rc(e,t){for(var n=Oo(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function ic(e,t){for(var n=Oo(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Th(e){return function(){rc(this,e)}}function Mh(e){return function(){ic(this,e)}}function Eh(e,t){return function(){(t.apply(this,arguments)?rc:ic)(this,e)}}function xh(e,t){var n=ec(e+"");if(arguments.length<2){for(var r=Oo(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Eh:t?Th:Mh)(n,t))}function Dh(){this.textContent=""}function Ch(e){return function(){this.textContent=e}}function $h(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function kh(e){return arguments.length?this.each(e==null?Dh:(typeof e=="function"?$h:Ch)(e)):this.node().textContent}function Lh(){this.innerHTML=""}function Rh(e){return function(){this.innerHTML=e}}function Nh(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Oh(e){return arguments.length?this.each(e==null?Lh:(typeof e=="function"?Nh:Rh)(e)):this.node().innerHTML}function Ah(){this.nextSibling&&this.parentNode.appendChild(this)}function Yh(){return this.each(Ah)}function Ih(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ph(){return this.each(Ih)}function Sh(e){var t=typeof e=="function"?e:Va(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function zh(){return null}function Hh(e,t){var n=typeof e=="function"?e:Va(e),r=t==null?zh:typeof t=="function"?t:No(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Uh(){var e=this.parentNode;e&&e.removeChild(this)}function jh(){return this.each(Uh)}function Fh(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Zh(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function qh(e){return this.select(e?Zh:Fh)}function Xh(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Wh(e){return function(t){e.call(this,t,this.__data__)}}function Gh(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Vh(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Kh(e,t,n){return function(){var r=this.__on,i,o=Wh(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Qh(e,t,n){var r=Gh(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,u;c<l;++c)for(i=0,u=a[c];i<o;++i)if((s=r[i]).type===u.type&&s.name===u.name)return u.value}return}for(a=t?Kh:Vh,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function oc(e,t,n){var r=tc(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Bh(e,t){return function(){return oc(this,e,t)}}function Jh(e,t){return function(){return oc(this,e,t.apply(this,arguments))}}function td(e,t){return this.each((typeof t=="function"?Jh:Bh)(e,t))}function*ed(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var nd=[null];function Bt(e,t){this._groups=e,this._parents=t}function Cr(){return new Bt([[document.documentElement]],nd)}function rd(){return this}Bt.prototype=Cr.prototype={constructor:Bt,select:$u,selectAll:Nu,selectChild:Iu,selectChildren:Hu,filter:Uu,data:Wu,enter:ju,exit:Vu,join:Ku,merge:Qu,selection:rd,order:Bu,sort:Ju,call:eh,nodes:nh,node:rh,size:ih,empty:oh,each:sh,attr:fh,style:yh,property:_h,classed:xh,text:kh,html:Oh,raise:Yh,lower:Ph,append:Sh,insert:Hh,remove:jh,clone:qh,datum:Xh,on:Qh,dispatch:td,[Symbol.iterator]:ed};function Ao(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function sc(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function $r(){}var kr=.7,wi=1/kr,Rn="\\s*([+-]?\\d+)\\s*",Lr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",me="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",id=/^#([0-9a-f]{3,8})$/,od=new RegExp(`^rgb\\(${Rn},${Rn},${Rn}\\)$`),sd=new RegExp(`^rgb\\(${me},${me},${me}\\)$`),ad=new RegExp(`^rgba\\(${Rn},${Rn},${Rn},${Lr}\\)$`),cd=new RegExp(`^rgba\\(${me},${me},${me},${Lr}\\)$`),ld=new RegExp(`^hsl\\(${Lr},${me},${me}\\)$`),ud=new RegExp(`^hsla\\(${Lr},${me},${me},${Lr}\\)$`),ac={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ao($r,en,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:cc,formatHex:cc,formatHex8:hd,formatHsl:dd,formatRgb:lc,toString:lc});function cc(){return this.rgb().formatHex()}function hd(){return this.rgb().formatHex8()}function dd(){return mc(this).formatHsl()}function lc(){return this.rgb().formatRgb()}function en(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=id.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?uc(t):n===3?new It(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?vi(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?vi(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=od.exec(e))?new It(t[1],t[2],t[3],1):(t=sd.exec(e))?new It(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ad.exec(e))?vi(t[1],t[2],t[3],t[4]):(t=cd.exec(e))?vi(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ld.exec(e))?fc(t[1],t[2]/100,t[3]/100,1):(t=ud.exec(e))?fc(t[1],t[2]/100,t[3]/100,t[4]):ac.hasOwnProperty(e)?uc(ac[e]):e==="transparent"?new It(NaN,NaN,NaN,0):null}function uc(e){return new It(e>>16&255,e>>8&255,e&255,1)}function vi(e,t,n,r){return r<=0&&(e=t=n=NaN),new It(e,t,n,r)}function fd(e){return e instanceof $r||(e=en(e)),e?(e=e.rgb(),new It(e.r,e.g,e.b,e.opacity)):new It}function Yo(e,t,n,r){return arguments.length===1?fd(e):new It(e,t,n,r??1)}function It(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ao(It,Yo,sc($r,{brighter(e){return e=e==null?wi:Math.pow(wi,e),new It(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?kr:Math.pow(kr,e),new It(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new It(nn(this.r),nn(this.g),nn(this.b),bi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hc,formatHex:hc,formatHex8:md,formatRgb:dc,toString:dc}));function hc(){return`#${rn(this.r)}${rn(this.g)}${rn(this.b)}`}function md(){return`#${rn(this.r)}${rn(this.g)}${rn(this.b)}${rn((isNaN(this.opacity)?1:this.opacity)*255)}`}function dc(){const e=bi(this.opacity);return`${e===1?"rgb(":"rgba("}${nn(this.r)}, ${nn(this.g)}, ${nn(this.b)}${e===1?")":`, ${e})`}`}function bi(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function nn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function rn(e){return e=nn(e),(e<16?"0":"")+e.toString(16)}function fc(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Jt(e,t,n,r)}function mc(e){if(e instanceof Jt)return new Jt(e.h,e.s,e.l,e.opacity);if(e instanceof $r||(e=en(e)),!e)return new Jt;if(e instanceof Jt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,c=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=c<.5?o+i:2-o-i,s*=60):a=c>0&&c<1?0:s,new Jt(s,a,c,e.opacity)}function gd(e,t,n,r){return arguments.length===1?mc(e):new Jt(e,t,n,r??1)}function Jt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ao(Jt,gd,sc($r,{brighter(e){return e=e==null?wi:Math.pow(wi,e),new Jt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?kr:Math.pow(kr,e),new Jt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new It(Io(e>=240?e-240:e+120,i,r),Io(e,i,r),Io(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Jt(gc(this.h),_i(this.s),_i(this.l),bi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=bi(this.opacity);return`${e===1?"hsl(":"hsla("}${gc(this.h)}, ${_i(this.s)*100}%, ${_i(this.l)*100}%${e===1?")":`, ${e})`}`}}));function gc(e){return e=(e||0)%360,e<0?e+360:e}function _i(e){return Math.max(0,Math.min(1,e||0))}function Io(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Po=e=>()=>e;function pd(e,t){return function(n){return e+n*t}}function yd(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function wd(e){return(e=+e)==1?pc:function(t,n){return n-t?yd(t,n,e):Po(isNaN(t)?n:t)}}function pc(e,t){var n=t-e;return n?pd(e,n):Po(isNaN(e)?t:e)}const Ti=(function e(t){var n=wd(t);function r(i,o){var s=n((i=Yo(i)).r,(o=Yo(o)).r),a=n(i.g,o.g),c=n(i.b,o.b),l=pc(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=a(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=e,r})(1);function vd(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function bd(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function _d(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Ho(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function Td(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function te(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Md(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Ho(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var So=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zo=new RegExp(So.source,"g");function Ed(e){return function(){return e}}function xd(e){return function(t){return e(t)+""}}function yc(e,t){var n=So.lastIndex=zo.lastIndex=0,r,i,o,s=-1,a=[],c=[];for(e=e+"",t=t+"";(r=So.exec(e))&&(i=zo.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,c.push({i:s,x:te(r,i)})),n=zo.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?c[0]?xd(c[0].x):Ed(t):(t=c.length,function(l){for(var u=0,h;u<t;++u)a[(h=c[u]).i]=h.x(l);return a.join("")})}function Ho(e,t){var n=typeof t,r;return t==null||n==="boolean"?Po(t):(n==="number"?te:n==="string"?(r=en(t))?(t=r,Ti):yc:t instanceof en?Ti:t instanceof Date?Td:bd(t)?vd:Array.isArray(t)?_d:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Md:te)(e,t)}function Dd(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var wc=180/Math.PI,Uo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function vc(e,t,n,r,i,o){var s,a,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),e*r<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*wc,skewX:Math.atan(c)*wc,scaleX:s,scaleY:a}}var Mi;function Cd(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Uo:vc(t.a,t.b,t.c,t.d,t.e,t.f)}function $d(e){return e==null||(Mi||(Mi=document.createElementNS("http://www.w3.org/2000/svg","g")),Mi.setAttribute("transform",e),!(e=Mi.transform.baseVal.consolidate()))?Uo:(e=e.matrix,vc(e.a,e.b,e.c,e.d,e.e,e.f))}function bc(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,h,d,g,p){if(l!==h||u!==d){var w=g.push("translate(",null,t,null,n);p.push({i:w-4,x:te(l,h)},{i:w-2,x:te(u,d)})}else(h||d)&&g.push("translate("+h+t+d+n)}function s(l,u,h,d){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),d.push({i:h.push(i(h)+"rotate(",null,r)-2,x:te(l,u)})):u&&h.push(i(h)+"rotate("+u+r)}function a(l,u,h,d){l!==u?d.push({i:h.push(i(h)+"skewX(",null,r)-2,x:te(l,u)}):u&&h.push(i(h)+"skewX("+u+r)}function c(l,u,h,d,g,p){if(l!==h||u!==d){var w=g.push(i(g)+"scale(",null,",",null,")");p.push({i:w-4,x:te(l,h)},{i:w-2,x:te(u,d)})}else(h!==1||d!==1)&&g.push(i(g)+"scale("+h+","+d+")")}return function(l,u){var h=[],d=[];return l=e(l),u=e(u),o(l.translateX,l.translateY,u.translateX,u.translateY,h,d),s(l.rotate,u.rotate,h,d),a(l.skewX,u.skewX,h,d),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,h,d),l=u=null,function(g){for(var p=-1,w=d.length,y;++p<w;)h[(y=d[p]).i]=y.x(g);return h.join("")}}}var kd=bc(Cd,"px, ","px)","deg)"),Ld=bc($d,", ",")",")"),Nn=0,Rr=0,Nr=0,_c=1e3,Ei,Or,xi=0,on=0,Di=0,Ar=typeof performance=="object"&&performance.now?performance:Date,Tc=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function jo(){return on||(Tc(Rd),on=Ar.now()+Di)}function Rd(){on=0}function Ci(){this._call=this._time=this._next=null}Ci.prototype=Mc.prototype={constructor:Ci,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?jo():+n)+(t==null?0:+t),!this._next&&Or!==this&&(Or?Or._next=this:Ei=this,Or=this),this._call=e,this._time=n,Fo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Fo())}};function Mc(e,t,n){var r=new Ci;return r.restart(e,t,n),r}function Nd(){jo(),++Nn;for(var e=Ei,t;e;)(t=on-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Nn}function Ec(){on=(xi=Ar.now())+Di,Nn=Rr=0;try{Nd()}finally{Nn=0,Ad(),on=0}}function Od(){var e=Ar.now(),t=e-xi;t>_c&&(Di-=t,xi=e)}function Ad(){for(var e,t=Ei,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ei=n);Or=e,Fo(r)}function Fo(e){if(!Nn){Rr&&(Rr=clearTimeout(Rr));var t=e-on;t>24?(e<1/0&&(Rr=setTimeout(Ec,e-Ar.now()-Di)),Nr&&(Nr=clearInterval(Nr))):(Nr||(xi=Ar.now(),Nr=setInterval(Od,_c)),Nn=1,Tc(Ec))}}function xc(e,t,n){var r=new Ci;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Yd=Xa("start","end","cancel","interrupt"),Id=[],Dc=0,Cc=1,Zo=2,$i=3,$c=4,qo=5,ki=6;function Li(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Pd(e,n,{name:t,index:r,group:i,on:Yd,tween:Id,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Dc})}function Xo(e,t){var n=ee(e,t);if(n.state>Dc)throw new Error("too late; already scheduled");return n}function ge(e,t){var n=ee(e,t);if(n.state>$i)throw new Error("too late; already running");return n}function ee(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Pd(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Mc(o,0,n.time);function o(l){n.state=Cc,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var u,h,d,g;if(n.state!==Cc)return c();for(u in r)if(g=r[u],g.name===n.name){if(g.state===$i)return xc(s);g.state===$c?(g.state=ki,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[u]):+u<t&&(g.state=ki,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[u])}if(xc(function(){n.state===$i&&(n.state=$c,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=Zo,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Zo){for(n.state=$i,i=new Array(d=n.tween.length),u=0,h=-1;u<d;++u)(g=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=g);i.length=h+1}}function a(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=qo,1),h=-1,d=i.length;++h<d;)i[h].call(e,u);n.state===qo&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=ki,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function Sd(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>Zo&&r.state<qo,r.state=ki,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function zd(e){return this.each(function(){Sd(this,e)})}function Hd(e,t){var n,r;return function(){var i=ge(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Ud(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=ge(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===t){i[c]=a;break}c===l&&i.push(a)}o.tween=i}}function jd(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=ee(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?Hd:Ud)(n,e,t))}function Wo(e,t,n){var r=e._id;return e.each(function(){var i=ge(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return ee(i,r).value[t]}}function kc(e,t){var n;return(typeof t=="number"?te:t instanceof en?Ti:(n=en(t))?(t=n,Ti):yc)(e,t)}function Fd(e){return function(){this.removeAttribute(e)}}function Zd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function qd(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function Xd(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function Wd(e,t,n){var r,i,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=t(r=s,a)))}}function Gd(e,t,n){var r,i,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=t(r=s,a)))}}function Vd(e,t){var n=pi(e),r=n==="transform"?Ld:kc;return this.attrTween(e,typeof t=="function"?(n.local?Gd:Wd)(n,r,Wo(this,"attr."+e,t)):t==null?(n.local?Zd:Fd)(n):(n.local?Xd:qd)(n,r,t))}function Kd(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Qd(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Bd(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Qd(e,o)),n}return i._value=t,i}function Jd(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Kd(e,o)),n}return i._value=t,i}function tf(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=pi(e);return this.tween(n,(r.local?Bd:Jd)(r,t))}function ef(e,t){return function(){Xo(this,e).delay=+t.apply(this,arguments)}}function nf(e,t){return t=+t,function(){Xo(this,e).delay=t}}function rf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ef:nf)(t,e)):ee(this.node(),t).delay}function of(e,t){return function(){ge(this,e).duration=+t.apply(this,arguments)}}function sf(e,t){return t=+t,function(){ge(this,e).duration=t}}function af(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?of:sf)(t,e)):ee(this.node(),t).duration}function cf(e,t){if(typeof t!="function")throw new Error;return function(){ge(this,e).ease=t}}function lf(e){var t=this._id;return arguments.length?this.each(cf(t,e)):ee(this.node(),t).ease}function uf(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ge(this,e).ease=n}}function hf(e){if(typeof e!="function")throw new Error;return this.each(uf(this._id,e))}function df(e){typeof e!="function"&&(e=Qa(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],c,l=0;l<s;++l)(c=o[l])&&e.call(c,c.__data__,l,o)&&a.push(c);return new Le(r,this._parents,this._name,this._id)}function ff(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var c=t[a],l=n[a],u=c.length,h=s[a]=new Array(u),d,g=0;g<u;++g)(d=c[g]||l[g])&&(h[g]=d);for(;a<r;++a)s[a]=t[a];return new Le(s,this._parents,this._name,this._id)}function mf(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function gf(e,t,n){var r,i,o=mf(t)?Xo:ge;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function pf(e,t){var n=this._id;return arguments.length<2?ee(this.node(),n).on.on(e):this.each(gf(n,e,t))}function yf(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function wf(){return this.on("end.remove",yf(this._id))}function vf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=No(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],c=a.length,l=o[s]=new Array(c),u,h,d=0;d<c;++d)(u=a[d])&&(h=e.call(u,u.__data__,d,a))&&("__data__"in u&&(h.__data__=u.__data__),l[d]=h,Li(l[d],t,n,d,l,ee(u,n)));return new Le(o,this._parents,t,n)}function bf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ka(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var c=r[a],l=c.length,u,h=0;h<l;++h)if(u=c[h]){for(var d=e.call(u,u.__data__,h,c),g,p=ee(u,n),w=0,y=d.length;w<y;++w)(g=d[w])&&Li(g,t,n,w,d,p);o.push(d),s.push(u)}return new Le(o,s,t,n)}var _f=Cr.prototype.constructor;function Tf(){return new _f(this._groups,this._parents)}function Mf(e,t){var n,r,i;return function(){var o=Ln(this,e),s=(this.style.removeProperty(e),Ln(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function Lc(e){return function(){this.style.removeProperty(e)}}function Ef(e,t,n){var r,i=n+"",o;return function(){var s=Ln(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function xf(e,t,n){var r,i,o;return function(){var s=Ln(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),Ln(this,e))),s===c?null:s===r&&c===i?o:(i=c,o=t(r=s,a))}}function Df(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var c=ge(this,e),l=c.on,u=c.value[o]==null?a||(a=Lc(t)):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(s,i=u),c.on=r}}function Cf(e,t,n){var r=(e+="")=="transform"?kd:kc;return t==null?this.styleTween(e,Mf(e,r)).on("end.style."+e,Lc(e)):typeof t=="function"?this.styleTween(e,xf(e,r,Wo(this,"style."+e,t))).each(Df(this._id,e)):this.styleTween(e,Ef(e,r,t),n).on("end.style."+e,null)}function $f(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function kf(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&$f(e,s,n)),r}return o._value=t,o}function Lf(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,kf(e,t,n??""))}function Rf(e){return function(){this.textContent=e}}function Nf(e){return function(){var t=e(this);this.textContent=t??""}}function Of(e){return this.tween("text",typeof e=="function"?Nf(Wo(this,"text",e)):Rf(e==null?"":e+""))}function Af(e){return function(t){this.textContent=e.call(this,t)}}function Yf(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Af(i)),t}return r._value=e,r}function If(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Yf(e))}function Pf(){for(var e=this._name,t=this._id,n=Rc(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,l=0;l<a;++l)if(c=s[l]){var u=ee(c,t);Li(c,e,n,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Le(r,this._parents,e,n)}function Sf(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},c={value:function(){--i===0&&o()}};n.each(function(){var l=ge(this,r),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),l.on=t}),i===0&&o()})}var zf=0;function Le(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Rc(){return++zf}var Re=Cr.prototype;Le.prototype={constructor:Le,select:vf,selectAll:bf,selectChild:Re.selectChild,selectChildren:Re.selectChildren,filter:df,merge:ff,selection:Tf,transition:Pf,call:Re.call,nodes:Re.nodes,node:Re.node,size:Re.size,empty:Re.empty,each:Re.each,on:pf,attr:Vd,attrTween:tf,style:Cf,styleTween:Lf,text:Of,textTween:If,remove:wf,tween:jd,delay:rf,duration:af,ease:lf,easeVarying:hf,end:Sf,[Symbol.iterator]:Re[Symbol.iterator]};function Hf(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Uf={time:null,delay:0,duration:250,ease:Hf};function jf(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Ff(e){var t,n;e instanceof Le?(t=e._id,e=e._name):(t=Rc(),(n=Uf).time=jo(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&Li(c,e,t,l,s,n||jf(c,t));return new Le(r,this._parents,e,t)}Cr.prototype.interrupt=zd,Cr.prototype.transition=Ff;const Go=Math.PI,Vo=2*Go,sn=1e-6,Zf=Vo-sn;function Nc(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function qf(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Nc;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Xf{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Nc:qf(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,c=r-t,l=i-n,u=s-t,h=a-n,d=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>sn)if(!(Math.abs(h*c-l*u)>sn)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let g=r-s,p=i-a,w=c*c+l*l,y=g*g+p*p,v=Math.sqrt(w),_=Math.sqrt(d),T=o*Math.tan((Go-Math.acos((w+d-y)/(2*v*_)))/2),M=T/_,E=T/v;Math.abs(M-1)>sn&&this._append`L${t+M*u},${n+M*h}`,this._append`A${o},${o},0,0,${+(h*g>u*p)},${this._x1=t+E*c},${this._y1=n+E*l}`}}arc(t,n,r,i,o,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),c=r*Math.sin(i),l=t+a,u=n+c,h=1^s,d=s?i-o:o-i;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>sn||Math.abs(this._y1-u)>sn)&&this._append`L${l},${u}`,r&&(d<0&&(d=d%Vo+Vo),d>Zf?this._append`A${r},${r},0,1,${h},${t-a},${n-c}A${r},${r},0,1,${h},${this._x1=l},${this._y1=u}`:d>sn&&this._append`A${r},${r},0,${+(d>=Go)},${h},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Wf(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ri(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function On(e){return e=Ri(Math.abs(e)),e?e[1]:NaN}function Gf(e,t){return function(n,r){for(var i=n.length,o=[],s=0,a=e[0],c=0;i>0&&a>0&&(c+a+1>r&&(a=Math.max(1,r-c)),o.push(n.substring(i-=a,i+a)),!((c+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function Vf(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Kf=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ni(e){if(!(t=Kf.exec(e)))throw new Error("invalid format: "+e);var t;return new Ko({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ni.prototype=Ko.prototype;function Ko(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ko.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Qf(e){t:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break t;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Oc;function Bf(e,t){var n=Ri(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(Oc=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Ri(e,Math.max(0,t+o-1))[0]}function Ac(e,t){var n=Ri(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Yc={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Wf,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Ac(e*100,t),r:Ac,s:Bf,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Ic(e){return e}var Pc=Array.prototype.map,Sc=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Jf(e){var t=e.grouping===void 0||e.thousands===void 0?Ic:Gf(Pc.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?Ic:Vf(Pc.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function l(h){h=Ni(h);var d=h.fill,g=h.align,p=h.sign,w=h.symbol,y=h.zero,v=h.width,_=h.comma,T=h.precision,M=h.trim,E=h.type;E==="n"?(_=!0,E="g"):Yc[E]||(T===void 0&&(T=12),M=!0,E="g"),(y||d==="0"&&g==="=")&&(y=!0,d="0",g="=");var R=w==="$"?n:w==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",F=w==="$"?r:/[%p]/.test(E)?s:"",U=Yc[E],Y=/[defgprs%]/.test(E);T=T===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function P(D){var I=R,H=F,B,Ft,Z;if(E==="c")H=U(D)+H,D="";else{D=+D;var ct=D<0||1/D<0;if(D=isNaN(D)?c:U(Math.abs(D),T),M&&(D=Qf(D)),ct&&+D==0&&p!=="+"&&(ct=!1),I=(ct?p==="("?p:a:p==="-"||p==="("?"":p)+I,H=(E==="s"?Sc[8+Oc/3]:"")+H+(ct&&p==="("?")":""),Y){for(B=-1,Ft=D.length;++B<Ft;)if(Z=D.charCodeAt(B),48>Z||Z>57){H=(Z===46?i+D.slice(B+1):D.slice(B))+H,D=D.slice(0,B);break}}}_&&!y&&(D=t(D,1/0));var kt=I.length+D.length+H.length,ne=kt<v?new Array(v-kt+1).join(d):"";switch(_&&y&&(D=t(ne+D,ne.length?v-H.length:1/0),ne=""),g){case"<":D=I+D+H+ne;break;case"=":D=I+ne+D+H;break;case"^":D=ne.slice(0,kt=ne.length>>1)+I+D+H+ne.slice(kt);break;default:D=ne+I+D+H;break}return o(D)}return P.toString=function(){return h+""},P}function u(h,d){var g=l((h=Ni(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(On(d)/3)))*3,w=Math.pow(10,-p),y=Sc[8+p/3];return function(v){return g(w*v)+y}}return{format:l,formatPrefix:u}}var Oi,zc,Hc;tm({thousands:",",grouping:[3],currency:["$",""]});function tm(e){return Oi=Jf(e),zc=Oi.format,Hc=Oi.formatPrefix,Oi}function em(e){return Math.max(0,-On(Math.abs(e)))}function nm(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(On(t)/3)))*3-On(Math.abs(e)))}function rm(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,On(t)-On(e))+1}function im(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function om(e){return function(){return e}}function sm(e){return+e}var Uc=[0,1];function An(e){return e}function Qo(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:om(isNaN(t)?NaN:.5)}function am(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function cm(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=Qo(i,r),o=n(s,o)):(r=Qo(r,i),o=n(o,s)),function(a){return o(r(a))}}function lm(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=Qo(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var c=pu(e,a,1,r)-1;return o[c](i[c](a))}}function um(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function hm(){var e=Uc,t=Uc,n=Ho,r,i,o,s=An,a,c,l;function u(){var d=Math.min(e.length,t.length);return s!==An&&(s=am(e[0],e[d-1])),a=d>2?lm:cm,c=l=null,h}function h(d){return d==null||isNaN(d=+d)?o:(c||(c=a(e.map(r),t,n)))(r(s(d)))}return h.invert=function(d){return s(i((l||(l=a(t,e.map(r),te)))(d)))},h.domain=function(d){return arguments.length?(e=Array.from(d,sm),u()):e.slice()},h.range=function(d){return arguments.length?(t=Array.from(d),u()):t.slice()},h.rangeRound=function(d){return t=Array.from(d),n=Dd,u()},h.clamp=function(d){return arguments.length?(s=d?!0:An,u()):s!==An},h.interpolate=function(d){return arguments.length?(n=d,u()):n},h.unknown=function(d){return arguments.length?(o=d,h):o},function(d,g){return r=d,i=g,u()}}function dm(){return hm()(An,An)}function fm(e,t,n,r){var i=_u(e,t,n),o;switch(r=Ni(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=nm(i,s))&&(r.precision=o),Hc(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=rm(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=em(i))&&(r.precision=o-(r.type==="%")*2);break}}return zc(r)}function mm(e){var t=e.domain;return e.ticks=function(n){var r=t();return bu(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return fm(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],a=r[o],c,l,u=10;for(a<s&&(l=s,s=a,a=l,l=i,i=o,o=l);u-- >0;){if(l=Lo(s,a,n),l===c)return r[i]=s,r[o]=a,t(r);if(l>0)s=Math.floor(s/l)*l,a=Math.ceil(a/l)*l;else if(l<0)s=Math.ceil(s*l)/l,a=Math.floor(a*l)/l;else break;c=l}return e},e}function Yr(){var e=dm();return e.copy=function(){return um(e,Yr())},im.apply(e,arguments),mm(e)}function Yn(e){return function(){return e}}function gm(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Xf(t)}function pm(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function jc(e){this._context=e}jc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function ym(e){return new jc(e)}function wm(e){return e[0]}function vm(e){return e[1]}function Fc(e,t){var n=Yn(!0),r=null,i=ym,o=null,s=gm(a);e=typeof e=="function"?e:e===void 0?wm:Yn(e),t=typeof t=="function"?t:t===void 0?vm:Yn(t);function a(c){var l,u=(c=pm(c)).length,h,d=!1,g;for(r==null&&(o=i(g=s())),l=0;l<=u;++l)!(l<u&&n(h=c[l],l,c))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(h,l,c),+t(h,l,c));if(g)return o=null,g+""||null}return a.x=function(c){return arguments.length?(e=typeof c=="function"?c:Yn(+c),a):e},a.y=function(c){return arguments.length?(t=typeof c=="function"?c:Yn(+c),a):t},a.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Yn(!!c),a):n},a.curve=function(c){return arguments.length?(i=c,r!=null&&(o=i(r)),a):i},a.context=function(c){return arguments.length?(c==null?r=o=null:o=i(r=c),a):r},a}function Ir(e,t,n){this.k=e,this.x=t,this.y=n}Ir.prototype={constructor:Ir,scale:function(e){return e===1?this:new Ir(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ir(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},Ir.prototype;const bm={name:"Sigmoid v3",description:"Smooth sigmoid curve that travels horizontally first, with limited curve distance",render(e){const t=[],n=e.fromX-5,r=e.toX+5;let i=e.fromY;e.toY<e.fromY?i=e.fromY-5:e.toY>e.fromY&&(i=e.fromY+5);const o=e.toY,s=Math.abs(r-n),a=50;if(s<=a)return _m(n,i,r,o,e);const l=r>n?n+a:n-a,u=Zc(n,i,l,o);if(!u){const g=document.createElementNS("http://www.w3.org/2000/svg","path");return g.setAttribute("d",`M ${n},${i} L ${r},${o}`),g.setAttribute("stroke",e.color),g.setAttribute("stroke-width","5"),g.setAttribute("fill","none"),t.push(g),t}const h=`${u} L ${r},${o}`,d=document.createElementNS("http://www.w3.org/2000/svg","path");return d.setAttribute("d",h),d.setAttribute("stroke",e.color),d.setAttribute("stroke-width","5"),d.setAttribute("fill","none"),e.connectorType==="undefined"?(d.setAttribute("stroke-dasharray","5,5"),d.setAttribute("stroke-opacity","0.5")):d.setAttribute("stroke-opacity",e.opacity.toString()),t.push(d),t}};function _m(e,t,n,r,i){const o=[],s=Zc(e,t,n,r);if(!s){const c=document.createElementNS("http://www.w3.org/2000/svg","path");return c.setAttribute("d",`M ${e},${t} L ${n},${r}`),c.setAttribute("stroke",i.color),c.setAttribute("stroke-width","2"),c.setAttribute("fill","none"),o.push(c),o}const a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("d",s),a.setAttribute("stroke",i.color),a.setAttribute("stroke-width","5"),a.setAttribute("fill","none"),i.connectorType==="undefined"?(a.setAttribute("stroke-dasharray","5,5"),a.setAttribute("stroke-opacity","0.5")):a.setAttribute("stroke-opacity",i.opacity.toString()),o.push(a),o}function Zc(e,t,n,r){const i=h=>1/(1+Math.exp(-2*h)),a=[];for(let h=-3;h<=3;h+=.1){const d=i(h);a.push([d,h])}const c=Yr().domain([0,1]).range([e,n]),l=Yr().domain([0,1]).range([t,r]);return Fc().x(h=>{const d=(h[1]+3)/6;return c(d)}).y(h=>l(h[0]))(a)}const Tm={name:"Connector v4",description:"Limited sigmoid for defined connectors, full sigmoid for undefined connectors",render(e){return e.connectorType==="undefined"?Mm(e):Em(e)}};function Mm(e){const t=[],n=e.fromX-5,r=e.fromY,i=e.toX+5,o=e.toY,s=Bo(n,r,i,o);if(!s){const c=document.createElementNS("http://www.w3.org/2000/svg","path");return c.setAttribute("d",`M ${n},${r} L ${i},${o}`),c.setAttribute("stroke",e.color),c.setAttribute("stroke-width","3"),c.setAttribute("fill","none"),c.setAttribute("stroke-dasharray","5,5"),c.setAttribute("stroke-opacity","0.5"),t.push(c),t}const a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("d",s),a.setAttribute("stroke",e.color),a.setAttribute("stroke-width","3"),a.setAttribute("fill","none"),a.setAttribute("stroke-dasharray","5,5"),a.setAttribute("stroke-opacity","0.5"),t.push(a),t}function Em(e){const t=[],n=e.fromX-5,r=e.toX+5;let i=e.fromY;e.toY<e.fromY?i=e.fromY-5:e.toY>e.fromY&&(i=e.fromY+5);const o=e.toY,s=Math.abs(r-n),a=50;if(s<=a){const g=Bo(n,i,r,o);if(!g){const w=document.createElementNS("http://www.w3.org/2000/svg","path");return w.setAttribute("d",`M ${n},${i} L ${r},${o}`),w.setAttribute("stroke",e.color),w.setAttribute("stroke-width","5"),w.setAttribute("fill","none"),w.setAttribute("stroke-opacity",e.opacity.toString()),t.push(w),t}const p=document.createElementNS("http://www.w3.org/2000/svg","path");return p.setAttribute("d",g),p.setAttribute("stroke",e.color),p.setAttribute("stroke-width","5"),p.setAttribute("fill","none"),p.setAttribute("stroke-opacity",e.opacity.toString()),t.push(p),t}const l=r>n?n+a:n-a,u=Bo(n,i,l,o);if(!u){const g=document.createElementNS("http://www.w3.org/2000/svg","path");return g.setAttribute("d",`M ${n},${i} L ${r},${o}`),g.setAttribute("stroke",e.color),g.setAttribute("stroke-width","5"),g.setAttribute("fill","none"),g.setAttribute("stroke-opacity",e.opacity.toString()),t.push(g),t}const h=`${u} L ${r},${o}`,d=document.createElementNS("http://www.w3.org/2000/svg","path");return d.setAttribute("d",h),d.setAttribute("stroke",e.color),d.setAttribute("stroke-width","5"),d.setAttribute("fill","none"),d.setAttribute("stroke-opacity",e.opacity.toString()),t.push(d),t}function Bo(e,t,n,r){const i=h=>1/(1+Math.exp(-2*h)),a=[];for(let h=-3;h<=3;h+=.1){const d=i(h);a.push([d,h])}const c=Yr().domain([0,1]).range([e,n]),l=Yr().domain([0,1]).range([t,r]);return Fc().x(h=>{const d=(h[1]+3)/6;return c(d)}).y(h=>l(h[0]))(a)}const qc={"connector-v4":Tm,sigmoidHorizontalLimited:bm},Xc="sigmoidHorizontalLimited",xm=`
.info-popup {
  position: absolute;
  background: white;
  border: 1px solid #ccc;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  max-width: 300px;
  min-width: 200px;
  z-index: 1000;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  font-size: 14px;
}

.info-popup-close {
  position: absolute;
  top: 8px;
  right: 8px;
  background: none;
  border: none;
  font-size: 18px;
  cursor: pointer;
  color: #666;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px;
}

.info-popup-close:hover {
  background: #f0f0f0;
  color: #333;
}

.info-popup-content {
  padding: 12px 16px;
  padding-right: 36px;
  white-space: pre-wrap;
  line-height: 1.5;
  color: #333;
}
`;let Wc=!1;function Dm(){if(Wc)return;const e=document.createElement("style");e.setAttribute("data-thymeline-info-popup",""),e.textContent=xm,document.head.appendChild(e),Wc=!0}class Cm{element=null;container;documentClickHandler=null;constructor(t){this.container=t,Dm()}show(t,n,r){this.hide(),this.element=document.createElement("div"),this.element.className="info-popup";const i=document.createElement("button");i.className="info-popup-close",i.innerHTML="&times;",i.addEventListener("click",s=>{s.stopPropagation(),this.hide()});const o=document.createElement("div");o.className="info-popup-content",o.textContent=t,this.element.appendChild(i),this.element.appendChild(o),this.container.appendChild(this.element),this.positionPopup(n,r),setTimeout(()=>{this.documentClickHandler=s=>{this.element&&!this.element.contains(s.target)&&this.hide()},document.addEventListener("click",this.documentClickHandler)},0)}positionPopup(t,n){if(!this.element)return;const r=this.container.getBoundingClientRect(),i=250,o=150,s=10;let a=t-r.left+s,c=n-r.top+s;a+i>r.width&&(a=t-r.left-i-s),c+o>r.height&&(c=n-r.top-o-s),a=Math.max(10,a),c=Math.max(10,c),this.element.style.left=`${a}px`,this.element.style.top=`${c}px`}hide(){this.element&&(this.element.remove(),this.element=null),this.documentClickHandler&&(document.removeEventListener("click",this.documentClickHandler),this.documentClickHandler=null)}isVisible(){return this.element!==null}destroy(){this.hide()}}function jt(e,t={}){const n=document.createElementNS("http://www.w3.org/2000/svg",e);return $m(n,t),n}function $m(e,t){for(const[n,r]of Object.entries(t))r!==void 0&&e.setAttribute(n,String(r))}function pe(e,t){const n=jt("text",{"font-size":11,fill:"#666",...t});return n.textContent=e,n}function Ai(e,t,n,r,i={}){return jt("line",{x1:e,y1:t,x2:n,y2:r,stroke:"#666","stroke-width":1,...i})}function Pr(e,t,n,r,i={}){return jt("rect",{x:e,y:t,width:n,height:r,...i})}function km(e,t,n,r={}){return jt("circle",{cx:e,cy:t,r:n,...r})}class Lm{constructor(t){this.options=t;const n=J(t.initialStartTime),r=J(t.initialEndTime);this.state={startTime:n,endTime:r,zoomLevel:1,centerTime:(n+r)/2}}state;data=null;getState(){return{...this.state}}get startTime(){return this.state.startTime}get endTime(){return this.state.endTime}get zoomLevel(){return this.state.zoomLevel}get centerTime(){return this.state.centerTime}setWidth(t){this.options.width=t}setData(t){this.data=t}fitToData(){if(!this.data)return;const{minTime:t,maxTime:n}=this.calculateDataTimeRange(this.data);this.state.startTime=t,this.state.endTime=n,this.state.centerTime=(t+n)/2,this.state.zoomLevel=1}timeToX(t){const n=this.state.endTime-this.state.startTime,r=this.options.width/n;return(t-this.state.startTime)*r}xToTime(t){const n=this.state.endTime-this.state.startTime,r=t/this.options.width;return this.state.startTime+n*r}zoomTo(t,n){this.state.startTime=J(t),this.state.endTime=J(n),this.state.centerTime=(this.state.startTime+this.state.endTime)/2,this.state.zoomLevel=1}setZoomLevel(t,n){if(!this.data)return!1;const r=this.state.zoomLevel,i=this.state.endTime-this.state.startTime,o=n??this.state.centerTime,{minTime:s,maxTime:a}=this.calculateDataTimeRange(this.data),c=a-s,l=this.state.endTime-this.state.startTime,u=Math.min(this.options.minZoom,r*(l/c)),h=this.findShortestPeriod();let d=this.options.maxZoom;if(h!==null){const w=h*10;d=Math.min(this.options.maxZoom,c/w)}const g=Math.max(u,Math.min(d,t));if(g===r)return!1;this.state.zoomLevel=g;let p=i*(r/g);return p=Math.min(p,c*1.05),this.state.centerTime=o,this.state.startTime=o-p/2,this.state.endTime=o+p/2,this.clampPanPosition(),this.recalculateViewportBounds(),!0}panTo(t){this.state.centerTime=typeof t=="number"?t:J(t),this.clampPanPosition(),this.recalculateViewportBounds()}panBy(t){const n=this.state.endTime-this.state.startTime,r=t/this.options.width*n;this.state.centerTime+=r,this.clampPanPosition(),this.recalculateViewportBounds()}calculateDataTimeRange(t){let n=1/0,r=-1/0;for(const s of t.events){const a=J(s.time);n=Math.min(n,a),r=Math.max(r,a)}for(const s of t.periods){const a=J(s.startTime),c=Dr(s.endTime,!1);n=Math.min(n,a),r=Math.max(r,c)}(n===1/0||r===-1/0)&&(n=J(this.options.initialStartTime),r=J(this.options.initialEndTime));const o=(r-n)*.025;return{minTime:n-o,maxTime:r+o}}findShortestPeriod(){if(!this.data||this.data.periods.length===0)return null;let t=1/0;for(const n of this.data.periods){if(n.endTime===void 0||n.endTime===null)continue;const r=J(n.startTime),o=J(n.endTime)-r;o>0&&(t=Math.min(t,o))}return t===1/0?null:t}clampPanPosition(){if(!this.data)return;let t=1/0,n=-1/0;for(const a of this.data.events){const c=J(a.time);t=Math.min(t,c),n=Math.max(n,c)}for(const a of this.data.periods){const c=J(a.startTime),l=Dr(a.endTime,!1);t=Math.min(t,c),n=Math.max(n,l)}if(t===1/0||n===-1/0)return;const r=this.state.endTime-this.state.startTime,i=r*.15,o=t-i+r/2,s=n+i-r/2;this.state.centerTime=Math.max(o,Math.min(s,this.state.centerTime))}recalculateViewportBounds(){const t=this.state.endTime-this.state.startTime;this.state.startTime=this.state.centerTime-t/2,this.state.endTime=this.state.centerTime+t/2}}const In=-138e8;function Rm(e){const t=[],n=[],r=[...e.events.map(o=>o.id),...e.periods.map(o=>o.id),...e.connectors.map(o=>o.id)],i=r.filter((o,s)=>r.indexOf(o)!==s);i.length>0&&t.push({type:"error",message:`Duplicate IDs found: ${[...new Set(i)].join(", ")}`});for(const o of e.periods)try{const s=J(o.startTime);if(!Sa(o)){const c=Dr(o.endTime);s>c&&t.push({type:"error",message:`Period "${o.name}" has start time after end time`,itemId:o.id}),c<In&&t.push({type:"error",message:`Period "${o.name}" ends before the Big Bang (13.8 billion years ago). End time: ${c.toExponential(2)}`,itemId:o.id})}s<In&&t.push({type:"error",message:`Period "${o.name}" starts before the Big Bang (13.8 billion years ago). Start time: ${s.toExponential(2)}`,itemId:o.id})}catch(s){t.push({type:"error",message:`Period "${o.name}" has invalid time format: ${s instanceof Error?s.message:String(s)}`,itemId:o.id})}for(const o of e.connectors){const s=e.periods.find(c=>c.id===o.fromId),a=e.periods.find(c=>c.id===o.toId);if(!s){t.push({type:"error",message:`Connector "${o.id}" references non-existent period: ${o.fromId}`,itemId:o.id});continue}if(!a){t.push({type:"error",message:`Connector "${o.id}" references non-existent period: ${o.toId}`,itemId:o.id});continue}try{if(!Sa(a)){const c=J(s.startTime),l=Dr(a.endTime);if(c>l){const u=c-l;n.push({type:"warning",message:`Connector "${o.id}" connects "${s.name}"  "${a.name}", but "${s.name}" starts ${u.toFixed(0)} years after "${a.name}" ends. The periods don't overlap in time.`,itemId:o.id})}}}catch{}}for(const o of e.events)try{const s=J(o.time);s<In&&t.push({type:"error",message:`Event "${o.name}" is set before the Big Bang (13.8 billion years ago). Time: ${s.toExponential(2)}`,itemId:o.id})}catch(s){t.push({type:"error",message:`Event "${o.name}" has invalid time format: ${s instanceof Error?s.message:String(s)}`,itemId:o.id})}return{valid:t.length===0,errors:t,warnings:n}}function Nm(e){const t=[];if(e.valid&&e.warnings.length===0)return t.push(" Timeline data is valid"),t.join(`
`);if(e.errors.length>0){t.push(" Timeline validation failed:"),t.push(""),t.push("Errors:");for(const n of e.errors)t.push(`   ${n.message}`)}if(e.warnings.length>0){t.length>0&&t.push(""),t.push("Warnings:");for(const n of e.warnings)t.push(`   ${n.message}`)}return t.join(`
`)}const Om={width:800,axisHeight:40,tickHeight:10,margin:40,numMarkers:10};class Am{config;constructor(t={}){this.config={...Om,...t}}setConfig(t){this.config={...this.config,...t}}render(t,n){this.renderBackground(t),this.renderBigBangBoundary(t,n),this.renderAxisLine(t),this.renderTicksAndLabels(t,n)}renderTodayLine(t,n){const r=Do(),i=n.timeToX(r);if(i<0||i>this.config.width)return;const o=parseFloat(t.getAttribute("height")||"500"),s=Ai(i,this.config.axisHeight,i,o,{stroke:"#333","stroke-width":2,"stroke-dasharray":"5,5"});t.appendChild(s);const a=pe("Today",{x:i+5,y:this.config.axisHeight+15,"text-anchor":"start","font-size":10,"font-style":"italic"});t.appendChild(a)}renderBackground(t){const n=Pr(0,0,this.config.width,this.config.axisHeight,{id:"time-axis-background",fill:"#f8f9fa"});t.appendChild(n)}renderAxisLine(t){const n=Ai(0,this.config.axisHeight,this.config.width,this.config.axisHeight,{"stroke-width":2});t.appendChild(n)}renderTicksAndLabels(t,n){const{width:r,axisHeight:i,tickHeight:o,margin:s,numMarkers:a}=this.config,c=r-s*2,l=n.endTime-n.startTime;for(let u=0;u<=a;u++){const h=s+c/a*u,d=h/r,g=n.startTime+l*d,p=Ai(h,i,h,i+o);if(t.appendChild(p),g>=In){const w=pe(this.formatTimeLabel(g),{x:h,y:25,"text-anchor":"middle"});t.appendChild(w)}}}renderBigBangBoundary(t,n){const r=n.timeToX(In);if(r<0||r>this.config.width)return;const i=parseFloat(t.getAttribute("height")||"500");let o=t.querySelector("defs");o||(o=jt("defs"),t.insertBefore(o,t.firstChild));const s=o.querySelector("#static-noise-pattern");s&&s.remove();const a=jt("filter",{id:"noise-filter",x:0,y:0,width:"100%",height:"100%"}),c=jt("feTurbulence",{type:"fractalNoise",baseFrequency:2.5,numOctaves:5,result:"noise"}),l=jt("feColorMatrix",{in:"noise",type:"matrix",values:"0 0 0 0 0.5 0 0 0 0 0.5 0 0 0 0 0.5 0 0 0 1 0"});if(a.appendChild(c),a.appendChild(l),o.appendChild(a),r>0){const u=Pr(0,this.config.axisHeight,r,i-this.config.axisHeight,{fill:"#d0d0d0",filter:"url(#noise-filter)",opacity:.35});t.appendChild(u);const h=Ai(r,this.config.axisHeight,r,i,{stroke:"#333","stroke-width":2,"stroke-dasharray":"5,5"});t.appendChild(h);const d=pe("Big Bang",{x:r-5,y:this.config.axisHeight+15,"text-anchor":"end","font-size":10,"font-style":"italic"});t.appendChild(d)}}formatTimeLabel(t){return t<-1e6?`${(Math.abs(t)/1e6).toFixed(0)}M BCE`:t<0?`${Math.abs(Math.floor(t))} BCE`:t<1e3?`${Math.floor(t)} CE`:Math.floor(t).toString()}}const Ym={eventHeight:20,circleRadius:4,labelGap:8,fontSize:10,charWidth:6};class Im{config;constructor(t={}){this.config={...Ym,...t}}calculatePlacements(t,n,r,i){const{eventHeight:o,circleRadius:s,labelGap:a,charWidth:c}=this.config,l=this.config.fontSize+4,u=[...t].sort((w,y)=>w.assignment.startTime-y.assignment.startTime),h=[],d=new Map,g=[],p=[0,1,-1];for(const{event:w,assignment:y,row:v,isRelatedEvent:_}of u){const T=r.timeToX(y.startTime),M=y.subLane??0,E=w.name.length*c,R=Z=>{const kt=r.eventToY(v,Z,_)+o/2;return{id:w.id,circleX:T,circleY:kt,circleRadius:s,labelY:kt-l/2,labelHeight:l,labelWidth:E,rightLabelX:T+a,leftLabelX:T-a-E,subLane:Z,row:v,isRelatedEvent:_}},F=Z=>{const ct=`${v}:${Z}`,kt=d.get(ct);return kt!==void 0&&y.startTime<kt},U=(Z,ct)=>{if(F(Z))return!1;const kt=R(Z);return!this.checkOverlap(kt,ct,h,n)};let Y=M,P="right",D=!1;if(_){if(U(M,"right")&&(Y=M,P="right",D=!0),!D){for(const Z of p)if(Z!==M){if(U(Z,"right")){Y=Z,P="right",D=!0;break}if(U(Z,"left")){Y=Z,P="left",D=!0;break}}}!D&&U(M,"left")&&(Y=M,P="left",D=!0),D||(Y=M,P="hidden")}else{const Z=R(M);this.checkOverlap(Z,"right",h,n)?P=this.checkOverlap(Z,"left",h,n)?"hidden":"left":P="right",Y=M}g.push({eventId:w.id,subLane:Y,labelPosition:P});const I=R(Y);I.labelPosition=P,h.push(I);const H=`${v}:${Y}`,B=d.get(H)??-1/0,Ft=y.startTime+(E+a+s*2)/i.width*(i.endTime-i.startTime);d.set(H,Math.max(B,Ft))}return g}checkOverlap(t,n,r,i){const o=n==="right"?t.rightLabelX:t.leftLabelX,s=o+t.labelWidth,a=t.labelY,c=t.labelY+t.labelHeight,l=t.circleX-t.circleRadius,u=t.circleX+t.circleRadius,h=t.circleY-t.circleRadius,d=t.circleY+t.circleRadius;for(const g of r){if(g.id===t.id)continue;const p=g.circleX-g.circleRadius,w=g.circleX+g.circleRadius,y=g.circleY-g.circleRadius,v=g.circleY+g.circleRadius;if(l<w&&u>p&&h<v&&d>y||o<w&&s>p&&a<v&&c>y)return!0;if(g.labelPosition&&g.labelPosition!=="hidden"){const _=g.labelPosition==="right"?g.rightLabelX:g.leftLabelX,T=_+g.labelWidth,M=g.labelY,E=g.labelY+g.labelHeight;if(o<T&&s>_&&a<E&&c>M)return!0}}for(const g of i){const p=g.x+g.width,w=g.y+g.height;if(o<p&&s>g.x&&a<w&&c>g.y||l<p&&u>g.x&&h<w&&d>g.y)return!0}return!1}}function Pm(e,t,n,r,i=5){const o=[],s=Math.abs(n-e),a=50,c=i/2+2,l=g=>1/(1+Math.exp(-2*g)),u=[],h=3,d=20;if(s<=a)for(let g=0;g<=d;g++){const p=-h+g/d*(2*h),w=(p+h)/(2*h),y=l(p);u.push({x:e+w*(n-e),y:t+y*(r-t)})}else{const p=n>e?e+a:e-a;for(let w=0;w<=d;w++){const y=-h+w/d*(2*h),v=(y+h)/(2*h),_=l(y);u.push({x:e+v*(p-e),y:t+_*(r-t)})}u.push({x:n,y:r})}for(let g=0;g<u.length-1;g++){const p=u[g],w=u[g+1],y=Math.min(p.x,w.x)-c,v=Math.max(p.x,w.x)+c,_=Math.min(p.y,w.y)-c,T=Math.max(p.y,w.y)+c;o.push({x:y,y:_,width:v-y,height:T-_})}return o}const Sm={zoomSensitivity:.001,doubleClickZoomFactor:1.5,doubleClickThreshold:300};class zm{svg;callbacks;config;isDragging=!1;startX=0;startY=0;startCenterTime=0;startScrollY=0;lastClickTime=0;boundHandlers;constructor(t,n,r={}){this.svg=t,this.callbacks=n,this.config={...Sm,...r},this.boundHandlers={mousedown:this.handleMouseDown.bind(this),mousemove:this.handleMouseMove.bind(this),mouseup:this.handleMouseUp.bind(this),mouseleave:this.handleMouseUp.bind(this),wheel:this.handleWheel.bind(this)},this.attach()}attach(){this.svg.addEventListener("mousedown",this.boundHandlers.mousedown),this.svg.addEventListener("mousemove",this.boundHandlers.mousemove),this.svg.addEventListener("mouseup",this.boundHandlers.mouseup),this.svg.addEventListener("mouseleave",this.boundHandlers.mouseleave),this.svg.addEventListener("wheel",this.boundHandlers.wheel)}detach(){this.svg.removeEventListener("mousedown",this.boundHandlers.mousedown),this.svg.removeEventListener("mousemove",this.boundHandlers.mousemove),this.svg.removeEventListener("mouseup",this.boundHandlers.mouseup),this.svg.removeEventListener("mouseleave",this.boundHandlers.mouseleave),this.svg.removeEventListener("wheel",this.boundHandlers.wheel)}handleMouseDown(t){const n=Date.now();if(n-this.lastClickTime<this.config.doubleClickThreshold){this.handleDoubleClick(t),this.lastClickTime=0;return}this.lastClickTime=n,this.isDragging=!0,this.startX=t.clientX,this.startY=t.clientY,this.startCenterTime=this.callbacks.getCenterTime(),this.startScrollY=this.callbacks.getScrollY(),this.svg.style.cursor="grabbing"}handleMouseMove(t){if(!this.isDragging)return;const n=t.clientX-this.startX,r=this.callbacks.getTimeRange(),i=this.callbacks.getWidth(),o=-n/i*r,s=this.startCenterTime+o;this.callbacks.onPan(s);const a=t.clientY-this.startY;this.callbacks.onVerticalPan(this.startScrollY+a)}handleMouseUp(){this.isDragging&&(this.isDragging=!1,this.svg.style.cursor="grab")}handleWheel(t){t.preventDefault();const n=this.svg.getBoundingClientRect(),r=t.clientX-n.left,i=this.callbacks.xToTime(r),o=1+Math.abs(t.deltaY)*this.config.zoomSensitivity,s=this.callbacks.getZoomLevel(),a=t.deltaY<0?s*o:s/o;this.callbacks.onZoom(a,i)}handleDoubleClick(t){const n=this.svg.getBoundingClientRect(),r=t.clientX-n.left,i=this.callbacks.xToTime(r),s=this.callbacks.getZoomLevel()*this.config.doubleClickZoomFactor;this.callbacks.onZoom(s,i)}}class Hm{container;svg=null;data=null;options;viewport;timeAxisRenderer;labelPositioner;interactionHandler=null;eventListeners=new Map;laneAssignments=[];rowMapping=new Map;infoPopup=null;scrollY=0;contentHeight=0;contentGroup=null;constructor(t,n={}){if(typeof t=="string"){const r=document.querySelector(t);if(!r||!(r instanceof HTMLElement))throw new Error(`Container element not found: ${t}`);this.container=r}else this.container=t;this.container.style.position="relative",this.options={width:n.width??this.container.clientWidth,height:n.height??this.container.clientHeight,initialStartTime:n.initialStartTime??"1900-01-01",initialEndTime:n.initialEndTime??Temporal.Now.instant().toString(),minZoom:n.minZoom??.1,maxZoom:n.maxZoom??1e9,theme:n.theme??"light",constraints:n.constraints??{minEventWidth:2,maxEventWidth:20,periodHeight:28,laneGap:39},periodLayoutAlgorithm:n.periodLayoutAlgorithm??"succession",connectorRenderer:n.connectorRenderer??Xc,showRowNumbers:n.showRowNumbers??!1},this.viewport=new Lm({width:this.options.width,minZoom:this.options.minZoom,maxZoom:this.options.maxZoom,initialStartTime:this.options.initialStartTime,initialEndTime:this.options.initialEndTime}),this.timeAxisRenderer=new Am({width:this.options.width}),this.labelPositioner=new Im}render(t){this.data=t,this.scrollY=0,this.viewport.setData(t),this.viewport.fitToData();const n=Za(t.periods,t.events,this.options.periodLayoutAlgorithm,t.connectors);this.laneAssignments=n,this.rowMapping=this.buildRowMapping(),this.createSVG(),this.renderTimeline()}zoomIn(){this.setZoomLevel(this.viewport.zoomLevel*1.5)}zoomOut(){this.setZoomLevel(this.viewport.zoomLevel/1.5)}zoomTo(t,n){this.viewport.zoomTo(t,n),this.updateView()}setZoomLevel(t,n){if(!this.data)return;this.viewport.setZoomLevel(t,n)&&(this.updateView(),this.emit("zoom",this.viewport.zoomLevel))}panTo(t){this.viewport.panTo(t),this.updateView(),this.emit("pan",this.viewport.centerTime)}panBy(t){this.viewport.panBy(t),this.updateView(),this.emit("pan",this.viewport.centerTime)}addEvent(t){this.data&&(this.data.events.push(t),this.render(this.data))}addPeriod(t){this.data&&(this.data.periods.push(t),this.render(this.data))}addConnector(t){this.data&&(this.data.connectors.push(t),this.render(this.data))}removeItem(t){this.data&&(this.data.events=this.data.events.filter(n=>n.id!==t),this.data.periods=this.data.periods.filter(n=>n.id!==t),this.data.connectors=this.data.connectors.filter(n=>n.id!==t),this.render(this.data))}updateItem(t,n){if(!this.data)return;const r=this.data.events.find(o=>o.id===t);r&&Object.assign(r,n);const i=this.data.periods.find(o=>o.id===t);i&&Object.assign(i,n),this.render(this.data)}setShowRowNumbers(t){this.options.showRowNumbers=t,this.renderTimeline()}toSVG(){return this.svg?.outerHTML??""}async toPNG(){throw new Error("PNG export not yet implemented")}destroy(){this.interactionHandler&&(this.interactionHandler.detach(),this.interactionHandler=null),this.infoPopup&&(this.infoPopup.destroy(),this.infoPopup=null),this.svg&&(this.svg.remove(),this.svg=null),this.eventListeners.clear()}getViewport(){return this.viewport.getState()}on(t,n){this.eventListeners.has(t)||this.eventListeners.set(t,new Set),this.eventListeners.get(t).add(n)}createSVG(){this.svg&&this.svg.remove();const t=this.rowMapping.size>0?Math.max(...this.rowMapping.values())+1:1,n=this.options.constraints.periodHeight,r=this.options.constraints.laneGap,i=60,o=r/3,s=o,a=o,c=o*2,u=i+s+a+t*(n+r)+c+20;this.contentHeight=Math.max(this.options.height,u);const h=this.options.height;this.svg=jt("svg",{width:this.options.width,height:h}),this.svg.style.border="1px solid #ccc",this.svg.style.background="#fff",this.svg.style.cursor="grab",this.svg.style.userSelect="none",this.interactionHandler&&this.interactionHandler.detach(),this.interactionHandler=new zm(this.svg,{onPan:d=>{this.viewport.panTo(d),this.updateView(),this.emit("pan",this.viewport.centerTime)},onVerticalPan:d=>{const g=Math.max(0,this.contentHeight-this.options.height);this.scrollY=Math.max(-g,Math.min(0,d)),this.updateView()},onZoom:(d,g)=>{this.setZoomLevel(d,g)},xToTime:d=>this.viewport.xToTime(d),getZoomLevel:()=>this.viewport.zoomLevel,getCenterTime:()=>this.viewport.centerTime,getTimeRange:()=>this.viewport.endTime-this.viewport.startTime,getWidth:()=>this.options.width,getScrollY:()=>this.scrollY}),this.container.appendChild(this.svg),this.infoPopup||(this.infoPopup=new Cm(this.container))}updateView(){this.data&&this.renderTimeline()}emit(t,...n){const r=this.eventListeners.get(t);r&&r.forEach(i=>i(...n))}timeToX(t){return this.viewport.timeToX(t)}buildRowMapping(){const t=new Map,n=this.laneAssignments.filter(u=>u.type==="period"),r=this.laneAssignments.filter(u=>u.type==="event"),i=[...new Set(n.map(u=>u.lane))].sort((u,h)=>u-h);n.forEach(u=>{const h=i.indexOf(u.lane);t.set(u.itemId,h)});const o=new Set(i),s=r.filter(u=>o.has(u.lane)),a=r.filter(u=>!o.has(u.lane));s.forEach(u=>{const h=i.indexOf(u.lane);t.set(u.itemId,h)});const c=i.length,l=[...new Set(a.map(u=>u.lane))].sort((u,h)=>u-h);return a.forEach(u=>{const h=l.indexOf(u.lane),d=c+h;t.set(u.itemId,d)}),t}rowToY(t,n){const r=this.options.constraints.periodHeight,i=20,o=this.options.constraints.laneGap,s=60,a=o/3,c=a,l=a;return n==="period"?s+c+l+t*(r+o):s+c+l+t*(i+o)}eventToY(t,n,r){const i=this.options.constraints.periodHeight,o=this.options.constraints.laneGap,s=60,a=o/3,c=a,l=a;if(r){const u=s+c+l+t*(i+o);return n===-1?u-a-4:u+i+n*a}else return s}renderTimeline(){if(!this.svg||!this.data)return;this.svg.innerHTML="";const t=60,n=jt("defs",{}),r=jt("clipPath",{id:"thymeline-content-clip"}),i=Pr(0,t,this.options.width,this.options.height-t);r.appendChild(i),n.appendChild(r),this.svg.appendChild(n);const o=jt("g",{"clip-path":"url(#thymeline-content-clip)"});this.svg.appendChild(o);const s=jt("g",{transform:`translate(0, ${this.scrollY})`});this.contentGroup=s,o.appendChild(s),this.options.showRowNumbers&&this.renderRowNumbers(),this.timeAxisRenderer.render(this.svg,this.viewport);for(const a of this.data.connectors)a.type==="undefined"&&this.renderConnector(a);for(const a of this.data.connectors)a.type!=="undefined"&&this.renderConnector(a);for(const a of this.data.periods)this.renderPeriod(a);this.renderEventsWithLabelPositioning(this.data.events),this.timeAxisRenderer.renderTodayLine(this.svg,this.viewport)}renderRowNumbers(){if(!this.contentGroup)return;const t=this.rowMapping.size>0?Math.max(...this.rowMapping.values())+1:0,n=this.options.constraints.periodHeight;for(let r=0;r<t;r++){let i=!0;for(const[c,l]of this.rowMapping.entries())if(l===r&&this.laneAssignments.find(h=>h.itemId===c)?.type==="period"){i=!1;break}const o=this.rowToY(r,i?"event":"period"),s=Pr(0,o,30,n,{fill:"#f0f0f0",stroke:"#ccc","stroke-width":.5});this.contentGroup.appendChild(s);const a=pe(r.toString(),{x:15,y:o+n/2+4,"text-anchor":"middle","font-size":10,"font-family":"monospace"});this.contentGroup.appendChild(a)}}formatTimeForDisplay(t){if(typeof t=="string")try{return new Date(t).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}catch{return t}else{if(t instanceof Temporal.Instant)return new Date(t.epochMilliseconds).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"});if("unit"in t){if(t.unit==="mya")return`${t.value} million years ago`;if(t.unit==="years-ago")return`${t.value} years ago`;if(t.unit==="bce")return`${t.value} BCE`;if(t.unit==="ce")return`${t.value} CE`}else if("localTime"in t)return`${t.localTime} (${t.timezone})`}return String(t)}renderPeriod(t){if(!this.svg)return;const n=this.laneAssignments.find(d=>d.itemId===t.id);if(!n)return;const r=this.rowMapping.get(t.id);if(r===void 0)return;const i=this.timeToX(n.startTime),o=n.endTime===1/0?Do():n.endTime,s=this.timeToX(o),a=this.rowToY(r,"period"),c=Math.max(2,s-i),l=this.options.constraints.periodHeight,u=Pr(i,a,c,l,{id:t.id,fill:"#000","fill-opacity":1,stroke:"#000","stroke-width":1,rx:5,ry:l*.35});if(u.style.cursor="pointer",u.addEventListener("click",d=>{if(d.stopPropagation(),this.infoPopup){const g=this.formatTimeForDisplay(t.startTime),p=t.endTime?this.formatTimeForDisplay(t.endTime):"ongoing";let w=`${t.name}
${g}  ${p}`;t.info&&(w+=`

${t.info}`),this.infoPopup.show(w,d.clientX,d.clientY)}this.emit("itemClick",t)}),this.contentGroup.appendChild(u),!this.renderPeriodLabel(t.name,i,a,c,l)){let d=null;u.addEventListener("mouseenter",()=>{this.contentGroup&&(d=pe(t.name,{x:i+c/2,y:a+l+14,"text-anchor":"middle",fill:"#000","font-weight":"bold","pointer-events":"none"}),this.contentGroup.appendChild(d))}),u.addEventListener("mouseleave",()=>{d&&(d.remove(),d=null)})}}renderPeriodLabel(t,n,r,i,o){if(!this.svg||!this.contentGroup)return!1;const a=i-8*2;if(a<=0)return!1;const c=n+i/2,l=11,u=l+2,h=M=>{const E=pe(M,{x:0,y:0,"font-size":l,"font-weight":"bold"});this.svg.appendChild(E);const R=E.getBBox();return E.remove(),R.width};if(h(t)<=a){const M=pe(t,{x:c,y:r+o/2+l/3,"text-anchor":"middle","font-size":l,fill:"#fff","font-weight":"bold","pointer-events":"none"});return this.contentGroup.appendChild(M),!0}const g=t.split(" ");if(g.length<2)return!1;let p=1,w=1/0;for(let M=1;M<g.length;M++){const E=g.slice(0,M).join(" "),R=g.slice(M).join(" "),F=Math.max(h(E),h(R));F<w&&(w=F,p=M)}if(w>a)return!1;const y=g.slice(0,p).join(" "),v=g.slice(p).join(" "),_=pe(y,{x:c,y:r+o/2-u/2+l/3,"text-anchor":"middle","font-size":l,fill:"#fff","font-weight":"bold","pointer-events":"none"});this.contentGroup.appendChild(_);const T=pe(v,{x:c,y:r+o/2+u/2+l/3,"text-anchor":"middle","font-size":l,fill:"#fff","font-weight":"bold","pointer-events":"none"});return this.contentGroup.appendChild(T),!0}calculateConnectorBounds(){if(!this.data)return[];const t=[];for(const n of this.data.connectors){const r=this.laneAssignments.find(T=>T.itemId===n.fromId),i=this.laneAssignments.find(T=>T.itemId===n.toId);if(!r||!i)continue;const o=this.timeToX(r.startTime),a=this.timeToX(r.endTime)-o,c=this.timeToX(i.startTime),u=this.timeToX(i.endTime)-c;if(a<10||u<10)continue;const h=this.rowMapping.get(n.fromId),d=this.rowMapping.get(n.toId);if(h===void 0||d===void 0)continue;const g=Math.min(r.endTime,i.startTime),p=this.timeToX(g)-5,w=this.timeToX(i.startTime)+5;let y=this.rowToY(h,r.type)+this.options.constraints.periodHeight/2;const v=this.rowToY(d,i.type)+this.options.constraints.periodHeight/2;v<y?y=y-5:v>y&&(y=y+5);const _=Pm(p,y,w,v);t.push(..._)}return t}renderEventsWithLabelPositioning(t){if(!this.svg)return;const n=this.calculateConnectorBounds(),r=[];for(const s of t){const a=this.laneAssignments.find(l=>l.itemId===s.id);if(!a)continue;const c=this.rowMapping.get(s.id);c!==void 0&&r.push({event:s,assignment:a,row:c,isRelatedEvent:!!s.relates_to})}const i=this.labelPositioner.calculatePlacements(r,n,{timeToX:s=>this.timeToX(s),eventToY:(s,a,c)=>this.eventToY(s,a,c)},{width:this.options.width,startTime:this.viewport.startTime,endTime:this.viewport.endTime}),o=new Map(i.map(s=>[s.eventId,s]));for(const{event:s,row:a,isRelatedEvent:c}of r){const l=o.get(s.id);l&&this.renderEventWithSubLane(s,a,l.subLane,c,l.labelPosition)}}renderEventWithSubLane(t,n,r,i,o="right"){if(!this.svg)return;const s=this.laneAssignments.find(h=>h.itemId===t.id);if(!s)return;const a=this.timeToX(s.startTime),c=20,l=this.eventToY(n,r,i),u=km(a,l+c/2,4,{id:t.id,fill:"none",stroke:"#000","stroke-width":2});if(u.style.cursor="pointer",u.addEventListener("click",h=>{if(h.stopPropagation(),this.infoPopup){const d=this.formatTimeForDisplay(t.time);let g=`${t.name}
${d}`;t.info&&(g+=`

${t.info}`),this.infoPopup.show(g,h.clientX,h.clientY)}this.emit("itemClick",t)}),this.contentGroup.appendChild(u),o!=="hidden"){const h=pe(t.name,{x:o==="right"?a+8:a-8,y:l+c/2+4,"text-anchor":o==="right"?"start":"end","font-size":10,fill:"#333","pointer-events":"none"});this.contentGroup.appendChild(h)}}renderConnector(t){if(!this.svg||!this.data)return;const n=this.laneAssignments.find(E=>E.itemId===t.fromId),r=this.laneAssignments.find(E=>E.itemId===t.toId);if(!n||!r)return;const i=this.timeToX(n.startTime),s=this.timeToX(n.endTime)-i,a=this.timeToX(r.startTime),l=this.timeToX(r.endTime)-a;if(s<10||l<10)return;const u=this.rowMapping.get(t.fromId),h=this.rowMapping.get(t.toId);if(u===void 0||h===void 0)return;const g=this.data.periods.find(E=>E.id===t.fromId)?"#000":"#f587f3",p=Math.min(n.endTime,r.startTime),w=this.timeToX(p),y=this.timeToX(r.startTime),v=this.rowToY(u,n.type)+this.options.constraints.periodHeight/2,_=this.rowToY(h,r.type)+this.options.constraints.periodHeight/2,T=qc[this.options.connectorRenderer];if(!T){console.warn(`Connector renderer not found: ${this.options.connectorRenderer}`);return}T.render({fromX:w,fromY:v,toX:y,toY:_,connectorType:t.type,color:g,opacity:.85}).forEach(E=>{E.setAttribute("id",t.id),this.contentGroup.appendChild(E)})}}typeof globalThis.Temporal>"u"&&(globalThis.Temporal=Jl),et.BIG_BANG_TIME=In,et.CONNECTOR_RENDERERS=qc,et.DEFAULT_CONNECTOR=Xc,et.DEFAULT_PERIOD_LAYOUT=Fa,et.PERIOD_LAYOUT_ALGORITHMS=ja,et.TimelineRenderer=Hm,et.assignLanes=Za,et.determineTimeScale=ru,et.formatTime=eu,et.formatValidationResult=Nm,et.getLaneCount=du,et.normalizeTime=J,et.validateTimelineData=Rm,Object.defineProperty(et,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=thymeline.umd.cjs.map
